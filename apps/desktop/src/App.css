:root {
  --shadow: 0 10px 28px rgba(17, 24, 39, 0.06);
  --shadow2: 0 10px 18px rgba(17, 24, 39, 0.08);
  --right-panel-width: 300px;
  --radius-xs: 6px;
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --control-h-xs: 26px;
  --control-h-sm: 30px;
  --control-h-md: 36px;
  --control-h-lg: 40px;
  --control-pad-sm: 0 10px;
  --control-pad-md: 0 12px;
  --control-pad-lg: 0 14px;
  --control-border: rgba(17, 24, 39, 0.12);
  --control-bg: rgba(255, 255, 255, 0.9);
  --control-bg-hover: rgba(255, 255, 255, 1);
  --control-shadow: 0 6px 16px rgba(15, 23, 42, 0.08);
  --control-shadow-hover: 0 10px 24px rgba(15, 23, 42, 0.12);
  --focus-ring: var(--accentSoft);
  --cta-gradient: linear-gradient(135deg, var(--accent), rgba(217, 93, 57, 0.85));
  --cta-border: var(--accentBorder);
}

:root[data-calendar-mode='day'] {
  --right-panel-width: 600px;
}

/* Base controls */
button,
input,
textarea {
  font: inherit;
}

button {
  border: 1px solid var(--control-border);
  background: var(--control-bg);
  color: var(--text);
  border-radius: var(--radius-md);
  height: var(--control-h-md);
  padding: var(--control-pad-md);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  font-weight: 700;
  line-height: 1;
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.7) inset;
  transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.15s ease, background 0.2s ease;
}

button:hover {
  border-color: var(--border2);
  background: var(--control-bg-hover);
  box-shadow: var(--control-shadow-hover);
}

button:focus-visible {
  outline: none;
  border-color: var(--accentBorder);
  box-shadow: 0 0 0 3px var(--focus-ring), var(--control-shadow);
}

button:disabled {
  opacity: 0.55;
  cursor: not-allowed;
  box-shadow: none;
}

input:not([type='checkbox']):not([type='radio']):not([type='range']):not([type='color']),
textarea {
  border: 1px solid var(--border);
  background: var(--panel2);
  color: var(--text);
  border-radius: var(--radius-md);
  padding: 8px 10px;
  min-height: var(--control-h-md);
  line-height: 1.25;
  outline: none;
  transition: border-color 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
}

input:not([type='checkbox']):not([type='radio']):not([type='range']):not([type='color']):focus,
textarea:focus {
  border-color: var(--accentBorder);
  box-shadow: 0 0 0 3px var(--focus-ring);
}

select {
  font: inherit;
  height: var(--control-h-md);
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
  background: var(--panel2);
  padding: 0 10px;
  color: var(--text);
  outline: none;
}

select:focus-visible {
  border-color: var(--accentBorder);
  box-shadow: 0 0 0 3px var(--focus-ring);
}

/* Shell */
.uiShell {
  height: 100%;
  display: grid;
  grid-template-rows: 1fr;
  gap: 0;
  padding: 0;
  position: relative;
}

.uiMain {
  display: grid;
  gap: 3px;
  padding: 3px;
  min-height: 0;
  height: 100%;
  overflow: hidden;
  grid-template-rows: minmax(0, 1fr);
  transition: grid-template-columns 220ms ease;
}

.uiMain > * {
  min-height: 0;
}

@media (min-width: 920px) {
  .uiMain {
    gap: 4px;
    padding: 4px;
  }
}

/* Left ribbon (Obsidian-like) */
.rail {
  background: transparent;
  border: none;
  box-shadow: none;
  display: flex;
  flex-direction: column;
  padding: 12px 8px;
  gap: 12px;
  overflow: hidden;
}

.rail.showLabels {
  overflow: visible;
}

.railBtn {
  width: 44px;
  height: 44px;
  padding: 0;
  border-radius: 16px;
  display: grid;
  place-items: center;
  background: var(--panelAlpha);
  backdrop-filter: blur(10px);
  border: 1px solid var(--border);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  color: var(--muted);
  position: relative;
}

.railLabel {
  position: absolute;
  left: 56px;
  top: 50%;
  transform: translateY(-50%) translateX(-4px);
  background: var(--panel);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 6px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  box-shadow: 0 12px 20px rgba(0, 0, 0, 0.08);
  transition: opacity 160ms ease, transform 160ms ease;
  z-index: 2;
}

.rail.showLabels .railLabel {
  opacity: 1;
  transform: translateY(-50%) translateX(0);
}

.railBtn:hover {
  background: var(--panel);
  color: var(--text);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08);
  transform: translateY(-1px);
}

.railBtn.active {
  background: var(--panel);
  color: var(--accent);
  box-shadow: 0 8px 24px var(--accentSoft);
  border-color: var(--accent);
}

.railBtn.active::after {
  content: '';
  position: absolute;
  left: -8px;
  top: 50%;
  transform: translateY(-50%);
  width: 4px;
  height: 16px;
  background: var(--accent);
  border-radius: 0 4px 4px 0;
  box-shadow: 0 0 12px var(--accent);
}

.railBtn.railPrimary {
  background: var(--accent);
  color: white;
  border: none;
  box-shadow: 0 8px 20px var(--accentSoft);
}

.railBtn.railPrimary:hover {
  filter: brightness(1.1);
  transform: translateY(-2px) scale(1.05);
}

.railSep {
  height: 1px;
  margin: 4px 4px;
  background: var(--border);
}

.railGrow {
  flex: 1;
}

/* Theme Selector - Top Right */
.themeSelector {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 100;
}

.themeSelectorBtn {
  width: 40px;
  height: 40px;
  border-radius: 12px;
  background: var(--panelAlpha);
  backdrop-filter: blur(10px);
  border: 1px solid var(--border);
  display: grid;
  place-items: center;
  color: var(--muted);
  cursor: pointer;
  transition: all 0.2s ease;
}

.themeSelectorBtn:hover {
  background: var(--panel);
  color: var(--text);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08);
}

.themeDropdown {
  position: absolute;
  top: 48px;
  right: 0;
  min-width: 180px;
  border-radius: 16px;
  background: var(--panel);
  backdrop-filter: blur(20px);
  border: 1px solid var(--border);
  box-shadow: 0 16px 40px rgba(0, 0, 0, 0.12);
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  opacity: 0;
  transform: translateY(-8px) scale(0.95);
  pointer-events: none;
  transition: opacity 180ms ease, transform 180ms ease;
}

.themeDropdown.open {
  opacity: 1;
  transform: translateY(0) scale(1);
  pointer-events: auto;
}

.themeOption {
  height: 40px;
  border-radius: 10px;
  border: 1px solid transparent;
  background: transparent;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 0 12px;
  color: var(--text);
  cursor: pointer;
  font-weight: 700;
  font-size: 13px;
  transition: all 0.15s ease;
}

.themeOption:hover {
  background: var(--accentSoft);
  border-color: var(--accentBorder);
}

.themeOption.active {
  background: var(--accentSoft);
  border-color: var(--accentMid);
  color: var(--accent);
}

.themeOptionPreview {
  width: 20px;
  height: 20px;
  border-radius: 6px;
  border: 2px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.themeOptionPreview .inner {
  width: 8px;
  height: 8px;
  border-radius: 3px;
}

/* Sidebar (Obsidian-ish) */
.sb {
  border-radius: 32px;
  background: var(--panelAlpha);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid var(--border);
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.04);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  height: 100%;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

.sb.explorer {
  width: 260px;
  transition: width 220ms ease, opacity 180ms ease, transform 220ms ease;
}

.sb.explorer.collapsed {
  width: 0;
  opacity: 0;
  transform: translateX(-10px);
  pointer-events: none;
  border-width: 0;
}

.pageHero {
  border-radius: 28px;
  border: 1px solid var(--border);
  background: var(--panel);
  box-shadow: var(--shadow2);
}

/* Sidebar grid removed for cleaner flat look */

.sb > * {
  position: relative;
  z-index: 1;
}

.sbTop {
  padding: 24px 20px;
  border-bottom: 1px solid var(--border);
}

.sbTitle {
  font-size: 18px;
  font-weight: 800;
  color: var(--text);
  letter-spacing: -0.02em;
}

.sbSub {
  margin-top: 4px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.sbSection {
  padding: 6px 7px;
  border-bottom: 1px solid var(--border);
}

.sbSectionTitle {
  font-size: 12px;
  font-weight: 800;
  letter-spacing: 0.7px;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 8px;
}

.sbSectionHead {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 8px;
}

.sbSectionToggle {
  width: var(--control-h-xs);
  height: var(--control-h-xs);
  padding: 0;
  border-radius: 8px;
  display: grid;
  place-items: center;
  border: 1px solid transparent;
  background: transparent;
  color: var(--muted);
}

.sbSectionToggle:hover {
  background: rgba(17, 24, 39, 0.04);
}

.sbSectionTitleInline {
  font-size: 12px;
  font-weight: 800;
  letter-spacing: 0.6px;
  text-transform: uppercase;
  color: var(--muted);
  flex: 1;
}

.sbSectionSelect {
  height: var(--control-h-xs);
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  background: var(--panel2);
  color: var(--muted);
  font-weight: 800;
  padding: 0 8px;
  outline: none;
}

.sbItem {
  width: 100%;
  text-align: left;
  padding: 12px 16px;
  border-radius: 16px;
  border: 1px solid transparent;
  background: transparent;
  font-weight: 600;
  color: var(--text);
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  align-items: center;
  gap: 12px;
}

.sbItem:hover {
  background: var(--panel);
  border-color: var(--border);
}

.sbTree {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.sbTreeItem {
  padding: 6px 8px;
  border-radius: 8px;
  color: var(--muted);
}

.sbTreeBtn {
  width: 100%;
  text-align: left;
  border-radius: 10px;
  border: 1px solid transparent;
  background: transparent;
  padding: 6px 8px;
  display: grid;
  grid-template-columns: 1fr auto;
  grid-template-rows: auto auto;
  gap: 4px 8px;
  align-items: baseline;
}

.sbTreeBtn:hover {
  background: var(--panelAlpha);
}

.sbTreeBtn.active {
  border-color: var(--accent);
  background: var(--accentSoft);
}

.sbTreeTitle {
  grid-column: 1;
  grid-row: 1;
}

.sbTreeMeta {
  grid-column: 2;
  grid-row: 1;
}

.sbTreeSnippet {
  grid-column: 1 / -1;
  grid-row: 2;
  color: var(--muted);
  font-size: 11px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Activity Explorer styles */
.sbActivityCategory {
  display: flex;
  flex-direction: column;
}

.sbActivityCategoryHead {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  border: none;
  background: transparent;
  border-radius: 6px;
  cursor: pointer;
  text-align: left;
  width: 100%;
}

.sbActivityCategoryHead:hover {
  background: var(--panelAlpha);
}

.sbActivityCategoryTitle {
  flex: 1;
  font-weight: 500;
  font-size: 13px;
  color: var(--fg);
}

.sbActivityCategoryCount {
  font-size: 11px;
  color: var(--muted);
  padding: 1px 6px;
  background: var(--panelAlpha);
  border-radius: 10px;
}

.sbActivitySubcategories {
  display: flex;
  flex-direction: column;
  padding-left: 20px;
  margin-top: 2px;
}

.sbActivitySubcategory {
  padding: 3px 8px;
  border-radius: 4px;
}

.sbActivitySubcategory:hover {
  background: var(--panelAlpha);
}

.sbActivitySubcategoryTitle {
  font-size: 12px;
  color: var(--muted);
}

.sbTasks {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.sbPinnedStack {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.sbPinnedGroup {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.sbPinnedHead {
  display: flex;
  align-items: center;
  gap: 6px;
}

.sbPinnedTitle {
  font-size: 11px;
  font-weight: 900;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.sbTasksRow {
  display: flex;
  gap: 6px;
}

.sbTasksSearch,
.sbTasksQuick {
  flex: 1;
  height: var(--control-h-sm);
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  background: var(--panel2);
  padding: 0 10px;
  outline: none;
}

.sbTasksAdd {
  height: var(--control-h-sm);
  border-radius: var(--radius-sm);
  padding: 0 10px;
  font-weight: 900;
  background: var(--cta-gradient);
  border: 1px solid var(--cta-border);
  color: #fff;
}

.sbTasksList {
  display: flex;
  flex-direction: column;
  gap: 6px;
  max-height: 300px;
  overflow: auto;
  padding-right: 2px;
}

.sbTasksEmpty {
  padding: 6px 4px;
  color: var(--muted);
  font-size: 11px;
}

.sbTaskRow {
  display: grid;
  grid-template-columns: 18px 1fr;
  gap: 8px;
  align-items: center;
  padding: 6px 8px;
  border-radius: 10px;
  border: 1px solid transparent;
  cursor: pointer;
}

.sbTaskRow:hover {
  background: rgba(17, 24, 39, 0.04);
}

.sbTaskRow.selected {
  border-color: var(--accentBorder);
  background: var(--accentSoft);
}

.sbTaskRow.done .sbTaskTitle {
  text-decoration: line-through;
  color: var(--muted);
}

.sbTaskCheck {
  width: 18px;
  height: 18px;
  border-radius: 6px;
  border: 1px solid rgba(17, 24, 39, 0.18);
  display: grid;
  place-items: center;
  background: rgba(17, 24, 39, 0.02);
}

.sbTaskBox {
  width: 8px;
  height: 8px;
  border-radius: 3px;
  background: transparent;
}

.sbTaskCheck.checked .sbTaskBox {
  background: rgba(16, 185, 129, 0.9);
}

.sbTaskTitle {
  font-weight: 800;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.sbQuickList {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.sbQuickRow {
  display: grid;
  grid-template-columns: 18px 1fr auto;
  gap: 8px;
  align-items: center;
  padding: 6px 8px;
  border-radius: 10px;
  border: 1px solid transparent;
  cursor: grab;
}

.sbQuickRow:hover {
  background: rgba(17, 24, 39, 0.04);
}

.sbQuickIcon {
  width: 18px;
  height: 18px;
  border-radius: 6px;
  border: 1px solid var(--accentMid);
  background: var(--accentSoft);
  display: grid;
  place-items: center;
  color: var(--text);
}

.sbQuickTitle {
  font-weight: 800;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.sbQuickMeta {
  font-size: 11px;
  color: var(--muted);
  font-weight: 700;
  white-space: nowrap;
}

.sbQuickEmpty {
  padding: 6px 4px;
  color: var(--muted);
  font-size: 11px;
}

.sbTreeTitle {
  font-weight: 800;
  color: var(--text);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.sbTreeMeta {
  font-size: 11px;
  color: var(--muted);
  font-weight: 900;
  white-space: nowrap;
}

.sbTreeItem.muted {
  opacity: 0.6;
}

.sbPomodoro {
  margin-top: auto;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.pomoHeader {
  color: var(--muted);
  font-weight: 700;
}

.pomoCircle {
  width: 170px;
  height: 170px;
  border-radius: 999px;
  margin: 6px auto 2px;
  display: grid;
  place-items: center;
  background: conic-gradient(var(--accent) calc(var(--pomo) * 1turn), rgba(17, 24, 39, 0.08) 0);
  position: relative;
}

@media (min-width: 920px) {
  .pomoCircle {
    width: 140px;
    height: 140px;
  }
  .pomoTime {
    font-size: 24px;
  }
}

.pomoCircle::before {
  content: '';
  position: absolute;
  inset: 10px;
  border-radius: 999px;
  background: var(--panel);
  border: 1px solid var(--border);
}

.pomoTime {
  position: relative;
  font-weight: 900;
  font-size: 28px;
  letter-spacing: 0.4px;
}

.pomoActions {
  display: flex;
  gap: 8px;
}

.pomoBtn {
  flex: 1;
  height: 36px;
  border-radius: 10px;
  font-weight: 800;
}

.pomoBtn.secondary {
  background: var(--panel2);
}

.pomoTask {
  margin-top: 6px;
  color: var(--muted);
  font-size: 12px;
}

.pomoTaskLabel {
  font-weight: 900;
  letter-spacing: 0.2px;
}

.pomoTaskValueRow {
  margin-top: 6px;
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 8px;
  align-items: center;
}

.pomoTaskValue {
  color: var(--text);
  font-weight: 800;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.pomoTaskClear {
  width: 26px;
  height: 26px;
  border-radius: 10px;
  border: 1px solid rgba(17, 24, 39, 0.14);
  background: rgba(17, 24, 39, 0.04);
  color: var(--muted);
  font-weight: 900;
  cursor: pointer;
}

.pomoTaskClear:disabled {
  opacity: 0.4;
  cursor: default;
}

.pomoPickRow {
  margin-top: 8px;
  display: flex;
  gap: 8px;
}

.pomoPickBtn {
  flex: 1;
  height: 32px;
  border-radius: 10px;
  font-weight: 800;
  background: var(--accentSoft);
  border: 1px solid var(--accentMid);
  color: var(--text);
}

.pomoPickBtn.secondary {
  background: var(--panel2);
  border: 1px solid rgba(17, 24, 39, 0.12);
}

.pomoPickBtn:disabled {
  opacity: 0.45;
  cursor: default;
}

.pomoPickList {
  margin-top: 8px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.pomoPickItem {
  height: 30px;
  border-radius: 10px;
  padding: 0 10px;
  text-align: left;
  font-weight: 800;
  background: rgba(17, 24, 39, 0.03);
  border: 1px solid rgba(17, 24, 39, 0.10);
  color: var(--text);
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  cursor: pointer;
}

.pomoPickItem.active {
  background: var(--accentSoft);
  border-color: var(--accentMid);
}

.pomoPickEmpty {
  font-size: 12px;
  color: var(--muted);
  font-weight: 800;
  padding: 4px 2px 0;
}

.pomoNotes {
  margin-top: 2px;
  color: var(--muted);
  font-size: 12px;
}

.pomoNotesLabel {
  font-weight: 900;
  letter-spacing: 0.2px;
}

.pomoNotesList {
  margin-top: 8px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.pomoNoteItem {
  height: 30px;
  border-radius: 10px;
  padding: 0 10px;
  text-align: left;
  font-weight: 800;
  background: rgba(17, 24, 39, 0.02);
  border: 1px solid rgba(17, 24, 39, 0.10);
  color: var(--text);
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  cursor: pointer;
}

/* Workspace */
.ws {
  border-radius: 12px;
  background: transparent;
  display: grid;
  grid-template-rows: 1fr;
  gap: 8px;
  height: 100%;
  min-width: 0;
  min-height: 0;
  overflow: hidden;
}

.wsSplit {
  display: flex;
  min-width: 0;
  min-height: 0;
  border-radius: 12px;
  overflow: hidden;
}

.wsSplit.dragging {
  user-select: none;
}

.wsPane {
  min-width: 0;
  min-height: 0;
  height: 100%;
}

.wsDivider {
  width: 10px;
  cursor: col-resize;
  background: transparent;
  position: relative;
}

.wsDivider::before {
  content: '';
  position: absolute;
  left: 4px;
  top: 10px;
  bottom: 10px;
  width: 2px;
  border-radius: 99px;
  background: rgba(17, 24, 39, 0.12);
}

.wsPaneRoot {
  height: 100%;
  border: none;
  background: transparent;
  display: flex;
  flex-direction: column;
  min-width: 0;
  min-height: 0;
}

@media (min-width: 920px) {
  .wsPaneRoot {
    box-shadow: none;
  }
}

.wsTabbar {
  display: none;
}

.wsTabs {
  display: flex;
  gap: 6px;
  overflow: auto;
}

.wsTab {
  height: var(--control-h-xs);
  border-radius: 999px;
  padding: 0 12px;
  background: transparent;
  border: 1px solid transparent;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  color: var(--muted);
  font-weight: 800;
  transition: all 0.2s ease;
}

.wsTab.active {
  background: white;
  border-color: rgba(0, 0, 0, 0.05);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03);
  color: var(--text);
}

.wsTabTitle {
  font-weight: 800;
  font-size: 11px;
}

.wsTabClose {
  width: 18px;
  height: 18px;
  border-radius: 6px;
  display: grid;
  place-items: center;
  opacity: 0.55;
}

.wsTab:hover .wsTabClose {
  opacity: 0.85;
  background: rgba(17, 24, 39, 0.06);
}

.wsPaneBody {
  flex: 1;
  min-height: 0;
  overflow: auto;
}

.wsPaneBody > * {
  min-height: 0;
}

/* Details */
.details {
  border-radius: 10px;
  background: var(--panel);
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  min-width: 0;
  height: 100%;
}

.detailsHeader {
  padding: 6px 7px;
  border-bottom: 1px solid var(--border);
  background: var(--panel2);
  backdrop-filter: blur(12px);
}

.detailsHeaderRow {
  align-items: center;
}

.detailsHeaderRow {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 10px;
}

.detailsHeaderActions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.detailsIconBtn {
  width: 28px;
  height: 28px;
  border-radius: 8px;
  background: var(--panel);
  border: 1px solid var(--border);
  display: grid;
  place-items: center;
  transition: transform 120ms ease, box-shadow 120ms ease, border-color 120ms ease;
}

.detailsIconBtn.active {
  border-color: var(--accentBorder);
  background: var(--accentSoft);
  box-shadow: 0 6px 14px var(--accentMid);
}

.detailsTitle {
  font-weight: 900;
  letter-spacing: 0.02em;
}

.detailsSub {
  margin-top: 4px;
  font-size: 12px;
  color: var(--muted);
}

.detailsBody {
  padding: 10px 10px 14px;
  overflow: auto;
}

.detailCard {
  border: 1px solid var(--border);
  background: var(--panel);
  border-radius: 14px;
  padding: 12px;
  box-shadow: 0 16px 30px rgba(15, 23, 42, 0.08);
}

.detailTitle {
  font-weight: 900;
  letter-spacing: 0.02em;
}

.detailMeta {
  margin-top: 4px;
  font-size: 12px;
  color: var(--muted);
  font-variant-numeric: tabular-nums;
}

.detailBadgeRow {
  margin-top: 8px;
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
}

.detailBadgeRowSplit {
  justify-content: space-between;
  align-items: center;
  margin-top: 4px;
}

.detailBadgeGroup {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
}

.detailBadge {
  display: inline-flex;
  align-items: center;
  height: 22px;
  padding: 0 8px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 900;
  color: var(--muted);
  background: rgba(17, 24, 39, 0.04);
  border: 1px solid rgba(17, 24, 39, 0.08);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.detailToggle {
  height: 26px;
  padding: 0 8px;
  border-radius: 999px;
  font-weight: 900;
  font-size: 12px;
  background: var(--accentSoft);
  border: 1px solid var(--accentMid);
  color: var(--text);
  transition: transform 120ms ease, box-shadow 120ms ease;
}

.detailToggle.active {
  background: rgba(16, 185, 129, 0.12);
  border-color: rgba(16, 185, 129, 0.28);
}

.detailsIconBtn:hover,
.detailToggle:hover {
  transform: translateY(-1px);
  box-shadow: 0 8px 16px rgba(15, 23, 42, 0.12);
}

.detailText {
  margin-top: 8px;
  white-space: pre-wrap;
  line-height: 1.35;
}

.detailInput {
  width: 100%;
  margin-top: 8px;
  height: 34px;
  border-radius: 9px;
  border: 1px solid var(--border);
  padding: 0 9px;
  outline: none;
  background: var(--panel2);
}

.detailTitleInput {
  height: 46px;
  border-radius: 12px;
  font-size: 18px;
  font-weight: 800;
  padding: 0 14px;
}

.detailGrid {
  margin-top: 10px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}

.detailGrid label {
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 700;
}

.detailSmall {
  height: 34px;
  border-radius: 10px;
  border: 1px solid var(--border);
  padding: 0 10px;
  outline: none;
  background: var(--panel2);
  color: var(--text);
}

.detailRangeRow {
  height: 34px;
  border-radius: 10px;
  border: 1px solid var(--border);
  padding: 0 8px;
  background: var(--panel2);
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: 8px;
  align-items: center;
}

.detailRange {
  width: 100%;
}

.detailRangeValue {
  min-width: 22px;
  text-align: right;
  font-weight: 900;
  color: var(--text);
}

.detailRangeClear {
  width: 24px;
  height: 24px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: rgba(17, 24, 39, 0.02);
  color: var(--muted);
  font-weight: 900;
  cursor: pointer;
}

:root[data-theme='dark'] .detailRangeClear {
  background: rgba(148, 163, 184, 0.06);
}

.detailRangeClear:disabled {
  opacity: 0.5;
  cursor: default;
}

.detailIconSelect {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 8px;
  align-items: center;
}

.detailIconPreview {
  width: 34px;
  height: 34px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--panel2);
  display: grid;
  place-items: center;
  color: var(--text);
}

.detailColorRow {
  display: flex;
  gap: 8px;
  align-items: center;
}

.detailColorInput {
  width: 44px;
  height: 34px;
  padding: 0;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel2);
}

.detailColorAuto {
  height: 34px;
  padding: 0 10px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel2);
  color: var(--text);
  font-weight: 800;
  cursor: pointer;
}

.detailSwatches {
  margin-top: 8px;
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.detailSwatch {
  width: 16px;
  height: 16px;
  border-radius: 6px;
  border: 1px solid rgba(17, 24, 39, 0.18);
  cursor: pointer;
  opacity: 0.9;
}

:root[data-theme='dark'] .detailSwatch {
  border-color: rgba(148, 163, 184, 0.12);
}

.detailSwatch.active {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
  opacity: 1;
}

.detailLogList {
  margin-top: 8px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.detailLogChips {
  margin-top: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.detailLogChip {
  border-radius: 999px;
  border: 1px solid rgba(17, 24, 39, 0.12);
  background: rgba(17, 24, 39, 0.04);
  padding: 6px 10px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  color: var(--text);
  font-weight: 700;
  cursor: pointer;
}

:root[data-theme='dark'] .detailLogChip {
  border-color: rgba(148, 163, 184, 0.12);
  background: rgba(148, 163, 184, 0.06);
}

.detailLogChipTime {
  font-size: 11px;
  font-weight: 900;
  color: var(--muted2);
}

.detailLogChipTitle {
  font-size: 12px;
  font-weight: 800;
}

.detailLogRow {
  width: 100%;
  text-align: left;
  border-radius: 10px;
  border: 1px solid rgba(17, 24, 39, 0.10);
  background: rgba(17, 24, 39, 0.03);
  padding: 7px 8px;
  display: grid;
  grid-template-columns: 64px 1fr;
  gap: 8px;
  color: var(--text);
}

:root[data-theme='dark'] .detailLogRow {
  border-color: rgba(148, 163, 184, 0.08);
  background: rgba(148, 163, 184, 0.06);
}

.detailTaskRow {
  display: grid;
  grid-template-columns: 32px 1fr;
  gap: 8px;
  align-items: center;
}

.detailTaskCheck {
  width: 32px;
  height: 32px;
  border-radius: 10px;
  border: 1px solid rgba(17, 24, 39, 0.10);
  background: rgba(17, 24, 39, 0.03);
  color: var(--muted);
  display: grid;
  place-items: center;
  cursor: pointer;
}

.detailTaskCheck.checked {
  background: rgba(16, 185, 129, 0.16);
  border-color: rgba(16, 185, 129, 0.30);
  color: rgba(16, 185, 129, 0.95);
}

.detailTaskOpen {
  width: 100%;
  text-align: left;
  border-radius: 10px;
  border: 1px solid rgba(17, 24, 39, 0.10);
  background: rgba(17, 24, 39, 0.03);
  padding: 7px 10px;
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  align-items: baseline;
  color: var(--text);
  cursor: pointer;
}

:root[data-theme='dark'] .detailTaskOpen,
:root[data-theme='dark'] .detailTaskCheck {
  border-color: rgba(148, 163, 184, 0.08);
  background: rgba(148, 163, 184, 0.06);
}

.detailTaskTitle {
  font-weight: 850;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.detailTaskMeta {
  font-size: 12px;
  font-weight: 900;
  color: var(--muted);
  white-space: nowrap;
}

.detailLogTime {
  font-size: 12px;
  font-weight: 900;
  color: var(--muted);
}

.detailLogTitle {
  font-weight: 800;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.detailRow {
  margin-top: 12px;
}

.taxonomyPathInput {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px dashed var(--border2);
  background: rgba(255, 255, 255, 0.6);
}

.taxonomyPathField {
  width: 90px;
  height: 24px;
  padding: 0 6px;
  border-radius: 8px;
  border: 1px solid transparent;
  background: transparent;
  color: var(--text);
  font-size: 11px;
  font-weight: 700;
  outline: none;
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
}

.taxonomyPathField::placeholder {
  color: var(--muted);
  font-weight: 600;
}

.taxonomyPathField:focus {
  border-color: var(--accentBorder);
  box-shadow: 0 0 0 1px rgba(255, 153, 102, 0.2);
}

.taxonomyPathDivider {
  color: var(--muted);
  font-weight: 800;
}

.taxonomyPathAdd,
.taxonomyPathClear {
  height: 24px;
  padding: 0 10px;
  border-radius: 999px;
  border: 1px solid transparent;
  font-size: 11px;
  font-weight: 800;
  cursor: pointer;
  transition: all 0.15s ease;
}

.taxonomyPathAdd {
  background: var(--accent);
  color: #fff;
}

.taxonomyPathAdd:hover {
  filter: brightness(1.06);
}

.taxonomyPathClear {
  background: transparent;
  color: var(--muted);
  border-color: var(--border2);
}

.taxonomyPathClear:hover {
  border-color: var(--accentBorder);
  color: var(--text);
}

.taxonomyPathHint {
  margin-top: 6px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 600;
}

.tableInlineInput {
  width: 100%;
  height: 28px;
  padding: 0 8px;
  border-radius: 8px;
  border: 1px solid transparent;
  background: transparent;
  color: var(--text);
  font-size: 12px;
  font-weight: 600;
  outline: none;
  transition: border-color 0.15s ease, background 0.15s ease, box-shadow 0.15s ease;
}

.tableInlineInput::placeholder {
  color: var(--muted);
  font-weight: 600;
}

.tableInlineInput:focus {
  border-color: var(--accentBorder);
  background: var(--panel);
  box-shadow: 0 0 0 1px rgba(255, 153, 102, 0.16);
}

.tableInlineStrong {
  font-weight: 700;
}

.tableInlineNumber {
  text-align: center;
  font-variant-numeric: tabular-nums;
}

.tableRangeInput {
  display: flex;
  align-items: center;
  gap: 6px;
}

.tableRangeField {
  width: 70px;
}

.tableRangeDivider {
  font-size: 11px;
  font-weight: 700;
  color: var(--muted);
}

:root[data-theme='dark'] .taxonomyPathInput {
  background: rgba(15, 19, 32, 0.55);
  border-color: rgba(148, 163, 184, 0.2);
}

.detailChecklist {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.detailCheckItem {
  height: 32px;
  border-radius: 10px;
  display: grid;
  grid-template-columns: 18px 1fr;
  gap: 10px;
  align-items: center;
  padding: 0 10px;
  text-align: left;
  background: rgba(17, 24, 39, 0.03);
  border: 1px solid rgba(17, 24, 39, 0.10);
  color: var(--text);
  cursor: pointer;
}

.detailCheckItem.checked {
  opacity: 0.82;
}

.detailCheckBox {
  width: 14px;
  height: 14px;
  border-radius: 4px;
  border: 1px solid rgba(17, 24, 39, 0.22);
  background: rgba(255, 255, 255, 0.80);
}

.detailCheckItem.checked .detailCheckBox {
  background: rgba(16, 185, 129, 0.18);
  border-color: rgba(16, 185, 129, 0.55);
}

.detailCheckText {
  font-weight: 850;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.detailLabel {
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 700;
}

.detailLabelRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  margin-bottom: 6px;
}

.detailLabelActions {
  display: flex;
  align-items: center;
  gap: 6px;
}

.detailInlineBtn {
  height: 26px;
  border-radius: 999px;
  padding: 0 10px;
  border: 1px solid var(--border);
  background: var(--panel2);
  font-weight: 800;
  font-size: 11px;
  color: var(--text);
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.detailAiBtn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

/* Collapsible Properties Header */
.detailPropsHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 10px 0;
  margin-top: 12px;
  border: none;
  border-top: 1px solid var(--border);
  background: transparent;
  cursor: pointer;
  transition: opacity 0.15s ease;
}
.detailPropsHeader:hover {
  opacity: 0.7;
}
.detailPropsLabel {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: var(--muted);
}
.detailPropsChevron {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--muted);
  transition: transform 0.2s ease;
}
.detailPropsChevron.open {
  transform: rotate(180deg);
}

/* Notes Section Styling */
.detailNotesSection {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 180px;
}
.detailNotesSection .mdEditor {
  flex: 1;
  min-height: 140px;
}
.detailActiveSession {
  margin: 0 0 12px;
}

.detailActiveSession .asbRoot {
  border-radius: 16px;
}

.detailActiveSession .asbContent {
  padding: 14px 18px 14px 20px;
  gap: 6px;
}

.detailActiveSession .asbTitle {
  font-size: 18px;
}

.detailActiveSession .asbClock {
  font-size: 36px;
}

.detailActiveSession .asbXp {
  font-size: 18px;
}

.detailActiveSession .asbOpenBtn,
.detailActiveSession .asbStopBtn {
  height: 36px;
}
.detailSegmentBtn {
  margin-top: 8px;
  align-self: flex-start;
}

.detailChips {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  align-items: center;
  padding: 6px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel2);
}

.detailChip {
  height: 24px;
  border-radius: 999px;
  padding: 0 8px;
  font-size: 11px;
  font-weight: 800;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  border: 1px solid var(--accentMid);
  background: var(--accentSoft);
  color: var(--text);
}

.detailChip.active {
  border-color: var(--accentBorder);
  background: var(--accentMid);
}

.detailChipRemove {
  font-weight: 900;
  color: var(--muted);
}

.detailChipInput {
  flex: 1;
  min-width: 120px;
  border: none;
  background: transparent;
  outline: none;
  font-size: 12px;
  color: var(--text);
}

:root[data-theme='dark'] .detailInlineBtn {
  border-color: rgba(148, 163, 184, 0.08);
  background: rgba(148, 163, 184, 0.06);
}

:root[data-theme='dark'] .detailChip {
  border-color: var(--accentBorder);
  background: var(--accentMid);
}

.charGrid {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 8px;
}

.charChip {
  height: 32px;
  border-radius: 999px;
  border: 1px solid rgba(17, 24, 39, 0.12);
  background: rgba(17, 24, 39, 0.03);
  color: var(--text);
  font-weight: 950;
  letter-spacing: 0.4px;
  cursor: pointer;
}

.charChip.active {
  border-color: var(--accentBorder);
  background: var(--accentSoft);
}

:root[data-theme='dark'] .charChip {
  border-color: rgba(148, 163, 184, 0.08);
  background: rgba(148, 163, 184, 0.06);
}

:root[data-theme='dark'] .charChip.active {
  border-color: var(--accentBorder);
  background: var(--accentMid);
}

.detailTextarea {
  min-height: 120px;
  border-radius: 12px;
  border: 1px solid var(--border);
  padding: 10px;
  outline: none;
  background: var(--panel2);
  color: var(--text);
  resize: vertical;
  font: inherit;
  line-height: 1.4;
}

.mdEditor {
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--panel2);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.mdEditorTop {
  padding: 8px;
  border-bottom: 1px solid rgba(17, 24, 39, 0.08);
  display: flex;
  justify-content: flex-end;
}

.mdEditorTabs {
  display: inline-flex;
  gap: 6px;
}

.mdTab {
  height: 30px;
  padding: 0 10px;
  border-radius: 10px;
  border: 1px solid rgba(17, 24, 39, 0.10);
  background: rgba(17, 24, 39, 0.04);
  font-weight: 900;
  color: var(--text);
  cursor: pointer;
}

.mdTab.active {
  border-color: var(--accentBorder);
  background: var(--accentSoft);
}

.mdTextarea {
  flex: 1;
  min-height: 140px;
  width: 100%;
  border: none;
  outline: none;
  padding: 12px;
  background: transparent;
  color: var(--text);
  resize: vertical;
  font: inherit;
  line-height: 1.55;
}

.mdPreviewPane {
  flex: 1;
  min-height: 140px;
  padding: 8px;
  overflow: auto;
}

.mdEmpty {
  color: var(--muted);
  font-weight: 800;
}

.md {
  font-size: 13px;
  line-height: 1.35;
  color: var(--text);
}

.md > :first-child {
  margin-top: 0;
}

.md h1,
.md h2,
.md h3 {
  line-height: 1.25;
  margin: 16px 0 10px;
  font-weight: 950;
}

.md h1 {
  font-size: 20px;
}

.md h2 {
  font-size: 17px;
}

.md h3 {
  font-size: 15px;
}

.md p,
.md ul,
.md ol {
  margin: 6px 0;
}

.md ul,
.md ol {
  padding-left: 16px;
}

.md li {
  margin: 2px 0;
}

.mdLi {
  list-style: inherit;
}

.mdLiChecklist {
  list-style: none;
}

.mdLiRow {
  display: flex;
  align-items: center;
  gap: 4px;
}

.mdLiContent {
  flex: 1;
  min-width: 0;
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}

.mdLiText {
  display: inline-flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 4px;
}

.mdLiChips {
  display: inline-flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 4px;
}

.mdLiToggle {
  border: 1px solid rgba(17, 24, 39, 0.18);
  background: rgba(255, 255, 255, 0.7);
  color: var(--muted);
  font-weight: 900;
  border-radius: 6px;
  width: 18px;
  height: 18px;
  cursor: pointer;
  flex: 0 0 auto;
}

.mdLiChildren {
  margin-left: 12px;
  padding-left: 8px;
  border-left: 2px dashed rgba(17, 24, 39, 0.08);
}

.mdTaskStart {
  border: 1px solid rgba(17, 24, 39, 0.18);
  background: rgba(255, 255, 255, 0.8);
  color: var(--text);
  border-radius: 999px;
  width: 20px;
  height: 20px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.mdTaskStart:hover {
  border-color: var(--accentBorder);
  background: var(--accentSoft);
  color: var(--accent);
}

.mdTaskStart.running {
  border-color: var(--accentBorder);
  background: var(--accentSoft);
  color: var(--accent);
  box-shadow: 0 0 0 2px rgba(251, 146, 60, 0.2);
}

.mdTaskStart.running.over {
  border-color: rgba(185, 28, 28, 0.4);
  background: rgba(254, 226, 226, 0.8);
  color: #b91c1c;
}

.mdCheck {
  border: 0;
  background: transparent;
  padding: 0;
  cursor: pointer;
}

.mdCheck:disabled {
  cursor: default;
  opacity: 0.5;
}

.mdCheckBox {
  width: 16px;
  height: 16px;
  border-radius: 4px;
  border: 1px solid rgba(17, 24, 39, 0.2);
  background: rgba(255, 255, 255, 0.7);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.mdCheck.checked .mdCheckBox {
  background: var(--accentSoft);
  border-color: var(--accentBorder);
}

.mdCheck.checked .mdCheckBox::after {
  content: '';
  width: 6px;
  height: 10px;
  border-right: 2px solid var(--accent);
  border-bottom: 2px solid var(--accent);
  transform: rotate(45deg);
}

.mdChip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  font-weight: 900;
  color: rgba(17, 24, 39, 0.72);
  background: rgba(255, 255, 255, 0.75);
  border: 1px solid rgba(17, 24, 39, 0.12);
  border-radius: 999px;
  padding: 0 6px;
  margin: 0 4px 2px 0;
  white-space: nowrap;
}

.mdChip-tag {
  background: rgba(234, 179, 8, 0.12);
  border-color: rgba(234, 179, 8, 0.22);
  color: rgba(161, 98, 7, 0.85);
}

.mdChip-person {
  background: rgba(59, 130, 246, 0.10);
  border-color: rgba(59, 130, 246, 0.22);
  color: rgba(30, 64, 175, 0.85);
}

.mdChip-ctx {
  background: rgba(16, 185, 129, 0.12);
  border-color: rgba(16, 185, 129, 0.22);
  color: rgba(6, 95, 70, 0.85);
}

.mdChip-loc {
  background: rgba(244, 114, 182, 0.12);
  border-color: rgba(244, 114, 182, 0.22);
  color: rgba(190, 24, 93, 0.85);
}

.mdChip-goal,
.mdChip-project,
.mdChip-skill {
  background: rgba(99, 102, 241, 0.12);
  border-color: rgba(99, 102, 241, 0.24);
  color: rgba(67, 56, 202, 0.9);
}

.md code {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
  font-size: 12.5px;
  padding: 2px 6px;
  border-radius: 8px;
  background: rgba(17, 24, 39, 0.06);
  border: 1px solid rgba(17, 24, 39, 0.10);
}

.md pre {
  padding: 12px;
  border-radius: 12px;
  background: rgba(17, 24, 39, 0.06);
  border: 1px solid rgba(17, 24, 39, 0.10);
  overflow: auto;
}

.md pre code {
  padding: 0;
  border: none;
  background: transparent;
}

.md blockquote {
  margin: 10px 0;
  padding: 8px 12px;
  border-left: 4px solid var(--accentBorder);
  background: var(--accentSoft);
  border-radius: 10px;
}

.md table {
  width: 100%;
  border-collapse: collapse;
  margin: 10px 0;
  font-size: 13px;
}

.md th,
.md td {
  border: 1px solid rgba(17, 24, 39, 0.10);
  padding: 8px 10px;
  vertical-align: top;
}

.md th {
  background: rgba(17, 24, 39, 0.04);
  font-weight: 950;
}

.md a {
  color: var(--accent);
  font-weight: 800;
  text-decoration: none;
}

.md a:hover {
  text-decoration: underline;
}

.detailActions {
  margin-top: 12px;
  display: flex;
  gap: 10px;
}

.detailActions.compact {
  margin-top: 6px;
}

.detailCompleteToggle {
  width: 32px;
  height: 32px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel);
  color: var(--muted);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  cursor: pointer;
  transition: all 0.15s ease;
}

.detailCompleteToggle:hover {
  border-color: var(--accentBorder);
  color: var(--accent);
}

.detailCompleteToggle.checked {
  background: rgba(16, 185, 129, 0.16);
  border-color: rgba(16, 185, 129, 0.5);
  color: #16a34a;
}

.primaryButton,
.secondaryButton {
  height: var(--control-h-md);
  border-radius: var(--radius-md);
  padding: var(--control-pad-md);
  font-weight: 800;
}

.primaryButton {
  background: var(--cta-gradient);
  border-color: var(--cta-border);
  color: #fff;
}

.secondaryButton {
  background: var(--panel);
}

/* Bottom capture bar */
.bottomDock {
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--panel);
  box-shadow: var(--shadow2);
  padding: 10px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.dockIconButton {
  width: 44px;
  height: 44px;
  border-radius: 12px;
  display: grid;
  place-items: center;
  background: var(--panel2);
}

.dockInputWrap {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 0;
}

.dockInput {
  height: 44px;
  border-radius: 12px;
  border: 1px solid var(--border);
  padding: 0 12px;
  outline: none;
  background: var(--panel2);
}

.dockHint {
  font-size: 11px;
  color: var(--muted);
}

.dockPrimaryButton {
  height: 44px;
  border-radius: 12px;
  padding: 0 14px;
  font-weight: 900;
  background: var(--accent);
  border-color: var(--accentBorder);
  color: #fff;
}

.dockPrimaryButton:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.bottomNav {
  border-top: 1px solid var(--border);
  background: var(--glass);
  backdrop-filter: blur(10px);
  display: grid;
  grid-template-columns: 1fr 1fr 90px 1fr 1fr;
  align-items: center;
  padding: 6px 10px;
  gap: 8px;
}

.navBtn {
  height: 40px;
  border-radius: 10px;
  border: 1px solid transparent;
  background: transparent;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  color: var(--muted);
  font-weight: 800;
  font-size: 10px;
}

.navBtn:hover {
  border-color: var(--border);
  background: var(--panelAlpha);
  color: var(--text);
}

.navBtn svg {
  opacity: 0.9;
}

.navPlus {
  height: 46px;
  width: 46px;
  margin: 0 auto;
  border-radius: 14px;
  border: 1px solid var(--accentBorder);
  position: relative;
  overflow: hidden;
  background: var(--accentSoft);
  box-shadow: 0 10px 18px var(--accentMid);
}

.navPlusGlow {
  position: absolute;
  inset: -20px;
  background: conic-gradient(from 180deg, var(--accentBorder), transparent 35%, var(--accentMid));
  filter: blur(10px);
  opacity: 0.35;
}

.navPlus svg {
  position: relative;
  color: #fff;
}

.rightExpand {
  position: fixed;
  right: 14px;
  top: 14px;
  width: 42px;
  height: 42px;
  border-radius: 14px;
  background: var(--glass);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(17, 24, 39, 0.12);
  box-shadow: 0 10px 22px rgba(17, 24, 39, 0.08);
  display: grid;
  place-items: center;
}

.captureFab {
  position: fixed;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  width: 46px;
  height: 46px;
  border-radius: 16px;
  background: #D95D39 !important;
  border: none;
  color: #fff;
  box-shadow: 0 8px 20px rgba(217, 93, 57, 0.35);
  display: grid;
  place-items: center;
  z-index: 44;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.captureFab:hover {
  background: #D95D39 !important;
  transform: translateX(-50%) translateY(-2px) scale(1.05);
}

.captureFab:active {
  background: #D95D39 !important;
  transform: translateX(-50%) scale(0.98);
}

.captureFab:focus {
  background: #D95D39 !important;
  outline: none;
}

.captureFab svg {
  transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.captureFab:hover svg {
  transform: rotate(90deg);
}

.modalOverlay {
  position: fixed;
  inset: 0;
  background: var(--overlay);
  backdrop-filter: blur(6px);
  display: grid;
  place-items: center;
  z-index: 50;
}

.docOverlay {
  padding: 0;
  place-items: stretch;
  background: var(--bg);
  backdrop-filter: none;
}

.modalCard {
  width: min(720px, calc(100vw - 28px));
  border-radius: 18px;
  border: 1px solid rgba(255, 255, 255, 0.18);
  background: var(--glass);
  box-shadow: 0 30px 60px rgba(15, 23, 42, 0.25);
  overflow: hidden;
}

.docCard {
  width: 100%;
  height: 100%;
  border-radius: 0;
  border: none;
  background: var(--bg);
  box-shadow: none;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* Capture Modal Polish - Glassmorphism */
.captureModalCard {
  background: var(--glass, linear-gradient(165deg, var(--panel) 0%, var(--panel2) 100%));
  backdrop-filter: blur(24px) saturate(180%);
  -webkit-backdrop-filter: blur(24px) saturate(180%);
  border: 1px solid var(--border);
  border-radius: 28px;
  box-shadow:
    0 8px 32px var(--panelAlpha, rgba(0, 0, 0, 0.1)),
    0 0 80px -20px var(--accentSoft);
}

/* Fallback for browsers without backdrop-filter */
@supports not (backdrop-filter: blur(1px)) {
  .captureModalCard {
    background: var(--panel);
  }
}

.captureModalHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border);
  background: color-mix(in srgb, var(--panel2) 70%, transparent);
}

.captureModalHeaderLeft {
  display: flex;
  align-items: center;
  gap: 12px;
}

.captureLivePill {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  border-radius: 999px;
  color: var(--muted);
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--panel) 80%, transparent);
}

.captureLivePill.active {
  color: var(--accent);
  border-color: var(--accentBorder);
  background: var(--accentSoft);
}

.captureLiveDot {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: var(--muted);
}

.captureLivePill.active .captureLiveDot {
  background: var(--accent);
  box-shadow: 0 0 10px color-mix(in srgb, var(--accent) 60%, transparent);
}

.captureAttachRow {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 20px;
  font-size: 12px;
  font-weight: 700;
  color: var(--muted);
  border-bottom: 1px solid var(--border);
  background: color-mix(in srgb, var(--panel) 70%, transparent);
}

.captureAttachLabel {
  text-transform: uppercase;
  letter-spacing: 0.08em;
  font-size: 11px;
}

.captureAttachTitle {
  color: var(--text);
  font-weight: 800;
}

.captureAttachDetach {
  margin-left: auto;
  width: 24px;
  height: 24px;
  border-radius: 8px;
  display: grid;
  place-items: center;
  color: var(--muted);
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--panel) 80%, transparent);
}

.captureAttachDetach:hover {
  color: var(--text);
  border-color: var(--accentBorder);
}

.captureModalBody {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 18px 20px 22px;
  overflow: hidden;
}

.captureSheet {
  border-radius: 20px;
  border: 1px solid var(--border);
  background: linear-gradient(180deg, color-mix(in srgb, var(--panel) 95%, transparent) 0%, color-mix(in srgb, var(--panel2) 92%, transparent) 100%);
  padding: 16px 18px;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.35);
}

.captureSheetHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}

.captureSheetTitle {
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.16em;
  color: var(--muted);
}

.captureSheetMeta {
  display: inline-flex;
  align-items: center;
  gap: 10px;
}

.captureSheetStatus {
  font-size: 11px;
  font-weight: 800;
  padding: 2px 8px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--panel) 70%, transparent);
  border: 1px solid var(--border);
  color: var(--muted);
}

.captureSheetStatus.active {
  background: var(--accentSoft);
  border-color: var(--accentBorder);
  color: var(--accent);
}

.captureSheetCount {
  font-size: 11px;
  color: var(--muted2);
  font-weight: 700;
}

.captureTextarea {
  width: 100%;
  min-height: 180px;
  max-height: 280px;
  background: transparent;
  border: none;
  outline: none;
  resize: none;
  font-weight: 600;
  color: var(--text);
  line-height: 1.6;
}

.captureInterim {
  margin-top: 14px;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px dashed color-mix(in srgb, var(--accent) 40%, transparent);
  background: color-mix(in srgb, var(--accentSoft) 45%, transparent);
  color: var(--muted);
  font-size: 13px;
  font-weight: 700;
  animation: fadeIn 0.2s ease-out;
}

.captureInterimLead {
  font-weight: 900;
  margin-right: 6px;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.capturePreviewPanel {
  border-radius: 20px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--panel2) 85%, transparent);
  padding: 14px 16px 16px;
  max-height: 240px;
  overflow-y: auto;
}

.captureStatusBar {
  padding: 10px 20px;
  background: color-mix(in srgb, var(--panel2) 80%, transparent);
  border-top: 1px solid var(--border);
  font-size: 11px;
  font-weight: 800;
  letter-spacing: 0.02em;
}

.captureFooter {
  padding: 14px 18px 16px;
  border-top: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  background: var(--panel);
}

.captureOutline {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.captureOutline.compact {
  gap: 10px;
}

.captureOutlineHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.captureOutlineTitle {
  font-size: 12px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
}

.captureOutlineMeta {
  display: inline-flex;
  flex-wrap: wrap;
  gap: 6px;
}

.captureOutlineMetaChip {
  font-size: 11px;
  font-weight: 800;
  padding: 2px 8px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--panel) 70%, transparent);
  border: 1px solid var(--border);
  color: var(--muted);
}

.captureOutlineMetaChip.active {
  background: var(--accentSoft);
  border-color: var(--accentBorder);
  color: var(--accent);
}

.captureOutlineList {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.captureOutlineItem {
  display: flex;
  gap: 12px;
  align-items: flex-start;
}

.captureOutlineBullet {
  width: 10px;
  height: 10px;
  border-radius: 999px;
  margin-top: 7px;
  background: var(--accent);
  box-shadow: 0 0 0 5px color-mix(in srgb, var(--accentSoft) 70%, transparent);
}

.captureOutlineContent {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.captureOutlineLine {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 14px;
  font-weight: 700;
  color: var(--text);
}

.captureOutlineLine.compact {
  font-size: 13px;
}

.captureOutlineIndex {
  font-size: 11px;
  font-weight: 900;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--muted2);
}

.captureOutlineSnippet {
  color: var(--text);
  font-weight: 700;
  line-height: 1.4;
}

.captureOutlineChips {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.captureOutlineKinds {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.captureOutlineKind {
  font-size: 10px;
  font-weight: 800;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  color: var(--muted);
  background: color-mix(in srgb, var(--panel) 80%, transparent);
}

.captureOutlineKind.question {
  color: rgba(180, 83, 9, 0.95);
  border-color: rgba(245, 158, 11, 0.35);
  background: rgba(251, 191, 36, 0.12);
}

.captureOutlineKind.event {
  color: rgba(67, 56, 202, 0.95);
  border-color: rgba(99, 102, 241, 0.35);
  background: rgba(99, 102, 241, 0.12);
}

.captureOutlineKind.task {
  color: rgba(5, 150, 105, 0.95);
  border-color: rgba(16, 185, 129, 0.35);
  background: rgba(16, 185, 129, 0.12);
}

.captureOutlineKind.habit {
  color: rgba(190, 24, 93, 0.95);
  border-color: rgba(236, 72, 153, 0.35);
  background: rgba(236, 72, 153, 0.12);
}

.captureOutlineKind.tracker {
  color: rgba(67, 56, 202, 0.95);
  border-color: rgba(99, 102, 241, 0.35);
  background: rgba(99, 102, 241, 0.12);
}

.captureOutlineTrackerValue {
  margin-left: 4px;
  padding: 0 4px;
  border-radius: 6px;
  background: rgba(99, 102, 241, 0.12);
  color: rgba(67, 56, 202, 0.95);
  font-weight: 900;
}

.captureOutlineSublist {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-top: 2px;
}

.captureOutlineSubItem {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  font-weight: 600;
  color: var(--text);
}

.captureOutlineSubText {
  flex: 1;
  min-width: 0;
}

.captureOutlineSubTime {
  font-size: 11px;
  color: var(--muted2);
  font-weight: 700;
}

.captureOutlineSubBadge {
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  padding: 1px 6px;
  border-radius: 999px;
  background: rgba(16, 185, 129, 0.15);
  color: rgba(5, 150, 105, 0.9);
}

.captureOutlineSubMore {
  font-size: 11px;
  color: var(--muted2);
  font-weight: 600;
}

.mdChip-tracker {
  background: rgba(99, 102, 241, 0.12);
  border-color: rgba(99, 102, 241, 0.24);
  color: rgba(67, 56, 202, 0.9);
}

/* Recording state - breathing glow */
.captureModalCard.recording {
  animation: breathingGlow 3s ease-in-out infinite;
}

@keyframes breathingGlow {
  0%, 100% {
    box-shadow:
      0 8px 32px var(--panelAlpha, rgba(0, 0, 0, 0.1)),
      0 0 40px var(--accentSoft);
  }
  50% {
    box-shadow:
      0 8px 32px var(--panelAlpha, rgba(0, 0, 0, 0.1)),
      0 0 60px var(--accent);
  }
}

/* Extended toggle button */
.extended-toggle {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 700;
  background: var(--panel2);
  border: 1px solid var(--border);
  color: var(--muted);
  cursor: pointer;
  transition: all 0.2s ease;
}

.extended-toggle:hover {
  border-color: var(--accent);
}

.extended-toggle.active {
  background: var(--accentSoft);
  border-color: var(--accent);
  color: var(--accent);
}

/* Waveform visualization */
.waveform-container {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 3px;
  height: 32px;
  padding: 8px 24px;
}

.waveform-bar {
  width: 4px;
  background: linear-gradient(to top, var(--accent), var(--accentSoft));
  border-radius: 2px;
  animation: waveform 1.2s ease-in-out infinite;
}

.waveform-bar:nth-child(1) { animation-delay: 0s; }
.waveform-bar:nth-child(2) { animation-delay: 0.1s; }
.waveform-bar:nth-child(3) { animation-delay: 0.2s; }
.waveform-bar:nth-child(4) { animation-delay: 0.3s; }
.waveform-bar:nth-child(5) { animation-delay: 0.4s; }
.waveform-bar:nth-child(6) { animation-delay: 0.3s; }
.waveform-bar:nth-child(7) { animation-delay: 0.2s; }
.waveform-bar:nth-child(8) { animation-delay: 0.1s; }
.waveform-bar:nth-child(9) { animation-delay: 0s; }

@keyframes waveform {
  0%, 100% { transform: scaleY(0.3); opacity: 0.5; }
  50% { transform: scaleY(1); opacity: 1; }
}

/* Entity chip animations */
.entity-chip-enter {
  animation: chipAppear 0.3s ease-out;
}

@keyframes chipAppear {
  from { opacity: 0; transform: translateY(8px) scale(0.9); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

.captureVoiceBtn {
  position: relative;
  overflow: hidden;
}
.captureVoiceBtn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at center, var(--accentSoft) 0%, transparent 70%);
  opacity: 0;
  transition: opacity 0.3s ease;
}
.captureVoiceBtn:hover::before {
  opacity: 0.5;
}
.captureVoiceBtnActive {
  animation: voicePulse 1.5s ease-in-out infinite;
}
.captureVoiceBtnActive::before {
  opacity: 1;
}

@keyframes voicePulse {
  0%, 100% {
    box-shadow: 0 0 0 0 var(--accentSoft), 0 4px 12px rgba(0, 0, 0, 0.15);
  }
  50% {
    box-shadow: 0 0 0 8px transparent, 0 4px 16px rgba(0, 0, 0, 0.2);
  }
}

.modalHeader {
  padding: 10px 12px 8px;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 10px;
  border-bottom: 1px solid var(--border);
  background: var(--panel);
}

.modalHeaderActions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.modalMagic {
  height: 30px;
  padding: 0 10px;
  font-size: 12px;
}

.modalTitle {
  font-weight: 950;
  letter-spacing: 0.2px;
}

.modalSub {
  margin-top: 4px;
  font-size: 12px;
  color: var(--muted);
}

.capAttachBanner {
  margin-top: 8px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 8px 10px;
  border-radius: 12px;
  background: var(--accentSoft);
  border: 1px solid var(--accentMid);
}

.capAttachLabel {
  font-size: 12px;
  font-weight: 900;
  color: var(--text);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.capAttachClear {
  height: 30px;
  padding: 0 10px;
  border-radius: 10px;
  font-weight: 900;
  background: rgba(17, 24, 39, 0.04);
  border: 1px solid rgba(17, 24, 39, 0.10);
  color: var(--text);
}

.capAttachClear:hover {
  filter: brightness(1.03);
}

.modalClose {
  width: 36px;
  height: 36px;
  border-radius: 12px;
  display: grid;
  place-items: center;
  background: rgba(17, 24, 39, 0.04);
  border: 1px solid rgba(17, 24, 39, 0.08);
}

.modalTextarea {
  width: 100%;
  border: none;
  outline: none;
  padding: 12px;
  min-height: 190px;
  font-size: 12px;
  line-height: 1.4;
  background: transparent;
  resize: vertical;
}

.capEditor {
  position: relative;
}

.capEditorInterim {
  position: absolute;
  left: 12px;
  right: 12px;
  bottom: 10px;
  padding: 6px 8px;
  border-radius: 10px;
  border: 1px solid rgba(17, 24, 39, 0.10);
  background: rgba(255, 255, 255, 0.72);
  color: var(--muted);
  font-size: 11px;
  font-weight: 800;
  pointer-events: none;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

:root[data-theme='dark'] .capEditorInterim {
  background: rgba(11, 16, 32, 0.68);
  border-color: rgba(148, 163, 184, 0.08);
}

.capPreview {
  padding: 0 12px 10px;
}

.eventBody {
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.eventTitleRow {
  display: flex;
}

.eventTitleInput {
  width: 100%;
  height: 40px;
  border-radius: 12px;
  border: 1px solid rgba(17, 24, 39, 0.10);
  padding: 0 12px;
  font-weight: 950;
  background: var(--glass3);
  outline: none;
  color: var(--text);
}

.eventGrid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}

@media (max-width: 720px) {
  .eventGrid {
    grid-template-columns: 1fr;
  }
}

.eventGrid label {
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 700;
}

.eventCheck {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 800;
}

.eventNotes {
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 700;
}

.eventNotesHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.eventNotesArea {
  width: 100%;
  min-height: 120px;
  border-radius: 12px;
  border: 1px solid rgba(17, 24, 39, 0.10);
  padding: 10px;
  font-size: 12px;
  line-height: 1.4;
  background: var(--glass3);
  outline: none;
  color: var(--text);
  resize: vertical;
}

.capInterim {
  padding: 0 12px 10px;
  color: var(--muted);
  font-size: 11px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.capProgress {
  padding: 0 12px 10px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.capProgressLine {
  font-size: 11px;
  font-weight: 800;
  color: var(--muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.capPreviewTitle {
  font-size: 11px;
  font-weight: 900;
  color: var(--muted);
  letter-spacing: 0.6px;
  text-transform: uppercase;
  margin-bottom: 8px;
}

.capPreviewList {
  display: flex;
  flex-direction: column;
  gap: 6px;
  max-height: 180px;
  overflow: auto;
  padding-right: 4px;
}

.capItem {
  display: grid;
  grid-template-columns: 18px 52px 1fr auto;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid rgba(17, 24, 39, 0.08);
  background: rgba(17, 24, 39, 0.03);
  cursor: pointer;
}

:root[data-theme='dark'] .capItem {
  border-color: rgba(148, 163, 184, 0.08);
  background: rgba(148, 163, 184, 0.06);
}

.capKind {
  height: 20px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0 8px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 900;
  color: var(--text);
  border: 1px solid rgba(17, 24, 39, 0.10);
  background: rgba(255, 255, 255, 0.65);
}

:root[data-theme='dark'] .capKind {
  border-color: rgba(148, 163, 184, 0.08);
  background: rgba(11, 16, 32, 0.72);
}

.capTitle {
  font-weight: 900;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  min-width: 0;
}

.capMeta {
  font-size: 12px;
  font-weight: 800;
  color: var(--muted);
  white-space: nowrap;
}

.modalActions {
  padding: 10px 12px 12px;
  border-top: 1px solid rgba(17, 24, 39, 0.08);
  display: flex;
  align-items: center;
  gap: 10px;
}

.capStatus {
  padding: 8px 14px 0;
  font-size: 12px;
  font-weight: 800;
  color: var(--muted);
}

.modalSpacer {
  flex: 1;
}

.modalMic {
  height: 40px;
  border-radius: 999px;
  padding: 0 12px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-weight: 900;
  background: rgba(17, 24, 39, 0.04);
  border: 1px solid rgba(17, 24, 39, 0.10);
  position: relative;
  overflow: hidden;
}

.modalMic.active {
  background: var(--accentMid);
  border-color: var(--accentBorder);
}

.modalMic.magicRecord::before {
  content: '';
  position: absolute;
  inset: 1px;
  border-radius: inherit;
  background: linear-gradient(135deg, var(--accentSoft), rgba(236, 72, 153, 0.08));
  opacity: 0.6;
  pointer-events: none;
}

.modalMic.magicRecord::after {
  content: '';
  position: absolute;
  inset: -10%;
  border-radius: inherit;
  border: 1px solid var(--accentBorder);
  opacity: 0;
  transform: scale(0.85);
  pointer-events: none;
}

.modalMic.magicRecord.active::after {
  animation: magicPulse 1.6s ease-out infinite;
}

@keyframes magicPulse {
  0% {
    opacity: 0.65;
    transform: scale(0.85);
  }
  70% {
    opacity: 0;
    transform: scale(1.25);
  }
  100% {
    opacity: 0;
    transform: scale(1.25);
  }
}

.docGrid {
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: row;
  gap: 16px;
  padding: 16px;
  overflow: auto;
}

/* Responsive: stack vertically on narrow screens */
@media (max-width: 900px) {
  .docGrid {
    flex-direction: column;
  }
  .docProps {
    width: auto;
    flex-shrink: 0;
  }
}

.docProps {
  width: 320px;
  flex-shrink: 0;
  border: 1px solid var(--border);
  background: var(--panel);
  border-radius: 12px;
  padding: 12px;
  overflow-y: auto;
  max-height: 100%;
}

.docPropsTitle {
  font-weight: 950;
  margin-bottom: 10px;
}

.docPropsGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 16px;
  font-size: 12px;
  align-items: start;
}

.docPropsGrid .detailRow,
.docPropsGrid .detailGrid {
  margin-top: 0;
}

.docPropLabel {
  color: var(--muted);
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.6px;
  font-size: 11px;
}

.docPropValue {
  color: var(--text);
  font-weight: 700;
  min-height: 36px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel2);
  padding: 0 10px;
  display: flex;
  align-items: center;
}

.docBody {
  flex: 1;
  min-width: 0;
  min-height: 0;
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 12px;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--panel);
}

.docTitleRow {
  display: flex;
  align-items: center;
  gap: 10px;
}

.docTitleInput {
  flex: 1;
  height: 44px;
  border-radius: 12px;
  border: 1px solid var(--border);
  padding: 0 12px;
  font-weight: 950;
  background: var(--panel2);
  outline: none;
}

.docMagicBtn {
  height: 36px;
  padding: 0 12px;
  border-radius: 10px;
  border: 1px solid var(--accentBorder);
  background: var(--accentSoft);
  color: var(--text);
  font-weight: 900;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.docTabsRow {
  display: flex;
  align-items: center;
  gap: 10px;
}

.docTabs {
  display: inline-flex;
  gap: 8px;
}

.docTab {
  height: 30px;
  padding: 0 12px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--panel2);
  font-weight: 800;
  color: var(--muted);
  cursor: pointer;
}

.docTab.active {
  border-color: var(--accentBorder);
  background: var(--accentSoft);
  color: var(--text);
}

.docPropInput {
  height: 36px;
  border-radius: 10px;
  border: 1px solid var(--border);
  padding: 0 10px;
  background: var(--panel2);
  color: var(--text);
  outline: none;
  font: inherit;
}

.docTranscriptPanel {
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.docTranscriptChips {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.docTranscriptChip {
  height: 26px;
  padding: 0 10px;
  border-radius: 999px;
  border: 1px solid rgba(17, 24, 39, 0.12);
  background: rgba(17, 24, 39, 0.04);
  color: var(--text);
  font-size: 12px;
  font-weight: 900;
  cursor: pointer;
}

.docTranscriptChip.active {
  border-color: var(--accentBorder);
  background: var(--accentSoft);
}

.docTranscriptEmpty {
  color: var(--muted);
  font-size: 12px;
  font-weight: 700;
}

.docTranscriptBox {
  flex: 1;
  min-height: 0;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--panel2);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.docTranscriptTextarea {
  flex: 1;
  min-height: 0;
  width: 100%;
  border: none;
  outline: none;
  padding: 12px;
  font-size: 14px;
  line-height: 1.45;
  background: transparent;
  color: var(--text);
  resize: none;
}

.docBody .mdEditor {
  flex: 1;
  min-height: 0;
  background: var(--panel2);
  border-color: var(--border);
}

.docBody .mdEditorTop {
  background: var(--panel2);
  border-bottom: 1px solid var(--border);
  justify-content: flex-start;
}

.docBody .mdTextarea {
  min-height: 0;
  resize: none;
  background: transparent;
}

.docBody .mdPreviewPane {
  min-height: 0;
  background: transparent;
}

.docEmpty {
  color: var(--muted);
  padding: 12px;
}

/* Shared page helpers */
.page {
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-height: 0;
  overflow: auto;
}

.pageHeader {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 12px;
}

.title {
  font-size: 18px;
  font-weight: 900;
}

.subhead {
  margin-top: 4px;
  font-size: 12px;
  color: var(--muted);
}

.glassCard {
  border: 1px solid var(--border);
  background: var(--panel);
  border-radius: 12px;
  padding: 12px;
}

/* Ecosystem layout */
.ecoSection {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.ecoSectionHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 0 4px;
}

.ecoSectionTitle {
  display: flex;
  align-items: center;
  gap: 12px;
}

.ecoSectionTitleText {
  font-size: 18px;
  font-weight: 800;
}

.ecoSectionSubtitle {
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
}

.ecoSectionMeta {
  font-size: 11px;
  font-weight: 700;
  color: var(--muted);
}

.ecoCardGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 12px;
}

.ecoCard {
  border: 1px solid var(--border);
  background: var(--panel);
  border-radius: 16px;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  cursor: pointer;
  transition: border-color 120ms ease, box-shadow 120ms ease, transform 120ms ease;
}

.ecoCard:hover {
  border-color: rgba(17, 24, 39, 0.12);
  box-shadow: 0 16px 30px rgba(15, 23, 42, 0.08);
  transform: translateY(-1px);
}

.ecoCard.active {
  border-color: rgba(217, 93, 57, 0.35);
  box-shadow: 0 18px 30px rgba(217, 93, 57, 0.12);
}

.ecoCardTop {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 8px;
}

.ecoCardTitle {
  font-size: 14px;
  font-weight: 800;
  color: var(--text);
}

.ecoCardActions {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.ecoActionBtn {
  height: 24px;
  padding: 0 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--panel2);
  font-size: 10px;
  font-weight: 800;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--muted);
  transition: all 120ms ease;
}

.ecoActionBtn:hover {
  color: var(--text);
  border-color: rgba(17, 24, 39, 0.2);
}

.ecoActionBtn.danger {
  color: #CF423C;
  border-color: rgba(207, 66, 60, 0.3);
  background: rgba(207, 66, 60, 0.08);
}

.ecoCardMeta {
  display: grid;
  gap: 6px;
  font-size: 11px;
  color: var(--muted);
}

.ecoMetaRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.ecoMiniInput {
  width: 72px;
  height: 26px;
  background: var(--panel2);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 0 8px;
  font-size: 11px;
  font-weight: 700;
  color: var(--text);
  text-align: center;
  outline: none;
}

.ecoCardChips {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.ecoChipCount {
  font-size: 10px;
  font-weight: 700;
  color: var(--muted);
}

.ecoAddRow {
  display: flex;
  gap: 10px;
}

.ecoAddInput {
  flex: 1;
  height: 40px;
  border-radius: 14px;
  padding: 0 14px;
  border: 1px solid var(--border);
  background: var(--panel2);
  font-size: 12px;
  font-weight: 600;
  outline: none;
}

.ecoAddButton {
  height: 40px;
  padding: 0 16px;
  border-radius: 14px;
  background: var(--accent);
  color: #fff;
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  border: none;
}

.ecoSidebar {
  width: min(600px, 100%);
  flex-shrink: 0;
  position: sticky;
  top: 24px;
  align-self: flex-start;
}

.ecoSidebarCard {
  border: 1px solid var(--border);
  background: var(--panel);
  border-radius: 18px;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-height: calc(100vh - 160px);
  overflow-y: auto;
}

.ecoSidebarHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.ecoSidebarTitle {
  font-size: 16px;
  font-weight: 800;
}

.ecoSidebarSubtitle {
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
}

.ecoEmptyState {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  gap: 8px;
  padding: 20px 0;
  font-size: 11px;
  font-weight: 700;
  color: var(--muted);
}

.ecoDetailHeader {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
}

.ecoDetailEyebrow {
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
}

.ecoDetailTitle {
  font-size: 18px;
  font-weight: 800;
}

.ecoDetailActions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.ecoDetailRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  font-size: 12px;
  font-weight: 600;
}

.ecoDetailLabel {
  font-size: 11px;
  font-weight: 700;
  color: var(--muted);
}

.ecoEmpty {
  padding: 12px;
  font-size: 11px;
  font-weight: 700;
  color: var(--muted);
}

.empty {
  color: var(--muted);
}

.authOverlay {
  position: absolute;
  inset: 0;
  background: rgba(15, 23, 42, 0.25);
  backdrop-filter: blur(6px);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
  z-index: 80;
}

.authCard {
  width: min(440px, 92vw);
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: var(--shadow2);
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.authHeader {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
}

.authTitle {
  font-size: 18px;
  font-weight: 900;
}

.authSubtitle {
  font-size: 12px;
  color: var(--muted);
  margin-top: 4px;
}

.authDismiss {
  height: 28px;
  font-size: 11px;
  padding: 0 10px;
}

.authField {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.authLabel {
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--muted);
}

.authActions {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
}

.authError {
  color: #CF423C;
  font-size: 12px;
  font-weight: 700;
}

.authStatus {
  color: var(--muted);
  font-size: 12px;
  font-weight: 600;
}

/* Dashboard Layout Modes */
.dashboardContainer {
  --widget-padding: 20px;
  --widget-gap: 32px;
  --title-size: 12px;
  --chart-scale: 1;
  --legend-gap: 24px;
}

.dashboardContainer.dense {
  --widget-padding: 10px;
  --widget-gap: 10px;
  --title-size: 9px;
  --chart-scale: 0.7;
  --legend-gap: 8px;
}

.dashboardContainer.masonry {
  --widget-padding: 14px;
  --widget-gap: 12px;
  --title-size: 10px;
  --chart-scale: 0.85;
  --legend-gap: 12px;
}

.dashboardContainer.spacious {
  --widget-padding: 24px;
  --widget-gap: 32px;
  --title-size: 14px;
  --chart-scale: 1;
  --legend-gap: 24px;
}

.dashboardGrid {
  display: grid;
  gap: var(--widget-gap, 32px);
  max-width: 1600px;
  margin: 0 auto;
}

.dashboardGrid.dense {
  grid-template-columns: repeat(4, 1fr);
}

@media (max-width: 1400px) {
  .dashboardGrid.dense {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (max-width: 1000px) {
  .dashboardGrid.dense {
    grid-template-columns: repeat(2, 1fr);
  }
}

.dashboardGrid.masonry {
  display: block;
  column-count: 3;
  column-gap: var(--widget-gap);
}

@media (max-width: 1200px) {
  .dashboardGrid.masonry {
    column-count: 2;
  }
}

@media (max-width: 800px) {
  .dashboardGrid.masonry {
    column-count: 1;
  }
}

.dashboardGrid.spacious {
  grid-template-columns: repeat(3, 1fr);
}

@media (max-width: 1200px) {
  .dashboardGrid.spacious {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 800px) {
  .dashboardGrid.spacious {
    grid-template-columns: 1fr;
  }
}

/* Dashboard Widget Card */
.dashWidget {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: var(--widget-padding, 20px);
  transition: all 200ms ease;
  break-inside: avoid;
  margin-bottom: var(--widget-gap);
}

.dashboardGrid:not(.masonry) .dashWidget {
  margin-bottom: 0;
}

.dashWidget.collapsed {
  padding: 8px 12px;
}

.dashWidget.collapsed .dashWidgetContent {
  display: none;
}

.dashWidgetHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  cursor: pointer;
  user-select: none;
  margin-bottom: var(--legend-gap);
}

.dashWidget.collapsed .dashWidgetHeader {
  margin-bottom: 0;
}

.dashWidgetTitle {
  font-size: var(--title-size, 12px);
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.15em;
  color: var(--muted);
}

.dashWidgetCollapse {
  width: 20px;
  height: 20px;
  border-radius: 6px;
  border: 1px solid var(--border);
  background: var(--panel);
  color: var(--muted);
  display: grid;
  place-items: center;
  transition: transform 200ms ease, opacity 150ms ease;
  opacity: 0;
  flex-shrink: 0;
}

.dashWidget:hover .dashWidgetCollapse {
  opacity: 1;
}

.dashWidget.collapsed .dashWidgetCollapse {
  opacity: 1;
  transform: rotate(-90deg);
}

.dashWidgetContent {
  display: grid;
  gap: var(--legend-gap);
}

/* Dense mode specific adjustments */
.dense .dashWidgetContent h3 {
  font-size: 10px;
  margin-bottom: 4px;
}

.dense .dashWidgetContent .space-y-8 {
  gap: 8px;
}

.dense .dashWidgetContent .space-y-6 {
  gap: 6px;
}

.dense .dashWidgetContent .space-y-3 {
  gap: 3px;
}

.dense .dashWidgetContent .py-4 {
  padding-top: 4px;
  padding-bottom: 4px;
}

/* Chart containers - no transforms, use native size props instead */
.chartContainer {
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Compact legend items */
.dense .grid-cols-2 {
  gap: 4px 8px;
}

.dense .text-xs {
  font-size: 9px;
}

/* View mode selector */
.viewModeSelect {
  padding: 8px 12px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--panel);
  font-size: 11px;
  font-weight: 700;
  color: var(--text);
  cursor: pointer;
  transition: border-color 150ms ease, box-shadow 150ms ease;
}

.viewModeSelect:hover {
  border-color: var(--border2);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.viewModeSelect:focus {
  outline: none;
  border-color: #D95D39;
}

/* Full-width widgets (heatmaps) */
.dashWidget.fullWidth {
  grid-column: 1 / -1;
}

/* Drag-and-drop grab handle */
.dashWidgetGrabHandle {
  position: absolute;
  top: 8px;
  left: 8px;
  width: 24px;
  height: 24px;
  display: grid;
  place-items: center;
  cursor: grab;
  opacity: 0;
  color: var(--muted);
  transition: opacity 150ms ease;
  z-index: 10;
}

.dashWidgetGrabHandle:active {
  cursor: grabbing;
}

.dashWidget:hover .dashWidgetGrabHandle {
  opacity: 0.4;
}

.dashWidget:hover .dashWidgetGrabHandle:hover {
  opacity: 1;
}

/* Drag states */
.dashWidget.dragging {
  opacity: 0.5;
  transform: scale(0.98);
  z-index: 100;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
}

.dashWidget.dragOver {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(217, 93, 57, 0.3);
}

/* Timeline */
.tlRoot {
  padding: 12px;
}

.tlHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 10px;
}

.tlTitleRow {
  display: flex;
  align-items: baseline;
  gap: 10px;
}

.tlTitle {
  font-weight: 950;
}

.tlResults {
  font-size: 12px;
  color: var(--muted);
  font-weight: 700;
}

.tlFilters {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: 10px;
}

.tlFiltersEmpty {
  font-size: 12px;
  color: var(--muted);
}

.tlChip {
  height: 28px;
  border-radius: 999px;
  padding: 0 10px;
  font-size: 12px;
  font-weight: 900;
  background: var(--panel2);
  color: var(--muted);
}

.tlChip.active {
  background: var(--accentSoft);
  border-color: var(--accentMid);
  color: var(--text);
}

.tlList {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.tlDayLabel {
  font-size: 12px;
  font-weight: 950;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.7px;
  margin-bottom: 8px;
}

.tlDayItems {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.tlBrick {
  width: 100%;
  text-align: left;
  border-radius: 14px;
  border: 1px solid rgba(17, 24, 39, 0.10);
  background: var(--glass);
  padding: 10px 12px;
  box-shadow: 0 8px 16px rgba(17, 24, 39, 0.05);
}

.tlBrick.event {
  border-color: var(--accentMid);
}

.tlBrick.capture {
  border-color: rgba(59, 130, 246, 0.18);
}

.tlBrickTop {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.tlBrickIcon {
  width: 18px;
  height: 18px;
  border-radius: 9px;
  border: 1px solid var(--accentBorder);
  background: var(--accentSoft);
  display: grid;
  place-items: center;
  flex: 0 0 auto;
}

.tlBrickTitle {
  font-weight: 900;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.tlBrickLeft {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 0;
}

.tlBrickTime {
  color: var(--muted);
  font-weight: 800;
  font-size: 12px;
  white-space: nowrap;
}

.tlBrickMeta {
  margin-top: 6px;
  color: var(--muted);
  font-size: 12px;
}

.tlBrickTags {
  margin-top: 8px;
  color: var(--muted);
  font-size: 12px;
  font-weight: 800;
}

/* Kanban */
.kbRoot {
  padding: 12px;
}

.kbHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 12px;
}

.kbRight {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.kbLeft {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}

.kbTitleRow {
  display: flex;
  align-items: baseline;
  gap: 10px;
  min-width: 0;
}

.kbTitle {
  font-weight: 900;
}

.kbResults {
  font-size: 12px;
  color: var(--muted);
  font-weight: 700;
}

.kbToolBtn {
  height: 30px;
  border-radius: 999px;
  padding: 0 10px;
  background: transparent;
  border: 1px solid transparent;
  color: var(--muted);
  font-weight: 800;
}

.kbToolBtn:hover {
  background: rgba(17, 24, 39, 0.04);
  border-color: rgba(17, 24, 39, 0.08);
  color: var(--text);
}

.kbNew {
  height: 34px;
  border-radius: 10px;
  padding: 0 12px;
  font-weight: 800;
  background: var(--accentSoft);
  border-color: var(--accentBorder);
}

.kbGrid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
}

.kbCol {
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--panel2);
  min-height: 520px;
  display: flex;
  flex-direction: column;
}

.kbColHeader {
  padding: 10px 10px 8px;
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.kbColTitle {
  font-size: 12px;
  font-weight: 900;
  text-transform: uppercase;
  color: var(--muted);
}

.kbCount {
  font-size: 12px;
  color: var(--muted);
}

.kbColBody {
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.kbCard {
  border: 1px solid var(--border);
  background: var(--panel);
  border-radius: 12px;
  padding: 10px;
  cursor: pointer;
  box-shadow: 0 6px 14px rgba(17, 24, 39, 0.04);
}

.kbCardTitle {
  font-weight: 800;
}

.kbCardMeta {
  margin-top: 6px;
  font-size: 12px;
  color: var(--muted);
  display: flex;
  gap: 8px;
  align-items: center;
}

.kbTag {
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--panel2);
}

.kbTag.muted {
  opacity: 0.6;
}

.kbDot {
  opacity: 0.6;
}

/* Tasks table */
.taskTable {
  --task-grid: 48px minmax(220px, 2fr) minmax(140px, 1fr) 110px 110px 110px 140px 140px minmax(160px, 1fr) 90px 110px 110px;
  border-radius: 22px;
  border: 1px solid var(--border);
  background: var(--panel);
  box-shadow: var(--shadow2);
  overflow: hidden;
}

.taskTableHeader {
  display: grid;
  grid-template-columns: var(--task-grid);
  gap: 8px;
  align-items: center;
  padding: 12px 16px;
  background: rgba(255, 255, 255, 0.6);
  border-bottom: 1px solid var(--border);
  font-size: 11px;
  font-weight: 900;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--muted);
}

.taskTableBody {
  display: flex;
  flex-direction: column;
}

.taskTableEmpty {
  padding: 48px 16px;
  text-align: center;
  font-size: 12px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--muted);
}

.taskRow {
  display: grid;
  grid-template-columns: var(--task-grid);
  gap: 8px;
  align-items: center;
  padding: 12px 16px;
  border-bottom: 1px solid rgba(15, 23, 42, 0.06);
  transition: background 120ms ease, transform 120ms ease;
  cursor: pointer;
}

.taskRow:hover {
  background: var(--accentSoft);
}

.taskRow.active {
  background: var(--accentSoft);
}

.taskCol {
  min-width: 0;
  font-size: 12px;
  color: var(--text);
}

.taskCol.check {
  display: flex;
  align-items: center;
  justify-content: center;
}

.taskCheck {
  width: 26px;
  height: 26px;
  border-radius: 10px;
  border: 2px solid rgba(15, 23, 42, 0.2);
  display: grid;
  place-items: center;
  transition: all 120ms ease;
  background: transparent;
}

.taskCheck.active {
  border-color: #3d8856;
  background: #3d8856;
  box-shadow: 0 8px 16px rgba(61, 136, 86, 0.3);
}

.taskTitleRow {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.taskTitle {
  font-weight: 900;
  font-size: 13px;
  line-height: 1.2;
}

.taskTitle.done {
  text-decoration: line-through;
  color: var(--muted);
}

.taskSnippet {
  font-size: 11px;
  color: var(--muted);
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}

.taskTagRow {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.taskTag {
  padding: 3px 8px;
  border-radius: 999px;
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  background: var(--accentSoft);
  color: #6d28d9;
}

.taskMuted {
  color: var(--muted);
}

.taskPill {
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.06em;
}

.taskPill.low {
  background: rgba(59, 130, 246, 0.12);
  color: #2563eb;
}

.taskPill.medium {
  background: rgba(245, 158, 11, 0.18);
  color: #b45309;
}

.taskPill.high {
  background: rgba(239, 68, 68, 0.18);
  color: #b91c1c;
}

.taskDate {
  font-weight: 800;
  font-size: 11px;
}

@media (max-width: 1200px) {
  .taskTable {
    overflow: auto;
  }
}

/* TickTick-inspired Tasks */
.ttRoot {
  height: 100%;
}

.ttShell {
  display: grid;
  grid-template-columns: 200px 1fr;
  height: 100%;
  min-height: 640px;
}

.ttLeft {
  border-right: 1px solid var(--border);
  background: var(--panel2);
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 5px;
}

.ttLeftTitle {
  font-weight: 950;
  padding: 8px 8px 4px 8px;
  color: var(--text);
}

.ttNavItem {
  width: 100%;
  text-align: left;
  display: grid;
  grid-template-columns: 22px 1fr auto;
  gap: 8px;
  align-items: center;
  padding: 7px 8px;
  border-radius: 10px;
  background: transparent;
  border: 1px solid transparent;
  color: var(--text);
  font-weight: 900;
}

.ttNavItem:hover {
  background: rgba(17, 24, 39, 0.04);
  border-color: rgba(17, 24, 39, 0.06);
}

.ttNavItem.active {
  background: var(--accentSoft);
  border-color: var(--accentMid);
}

.ttNavIcon {
  color: var(--muted);
  display: grid;
  place-items: center;
}

.ttNavCount {
  color: var(--muted);
  font-weight: 900;
  font-size: 12px;
}

.ttMain {
  display: flex;
  flex-direction: column;
  padding: 10px;
  gap: 10px;
}

.ttHeader {
  display: flex;
  gap: 12px;
  justify-content: space-between;
  flex-wrap: wrap;
  align-items: flex-start;
}

.ttHeaderLeft {
  min-width: 280px;
}

.ttTitleRow {
  display: flex;
  align-items: baseline;
  gap: 10px;
}

.ttTitle {
  font-weight: 950;
}

.ttResults {
  font-size: 12px;
  color: var(--muted);
  font-weight: 800;
}

.ttSearchRow {
  margin-top: 8px;
}

.ttSearch {
  width: min(520px, 100%);
  height: 30px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel);
  padding: 0 12px;
}

.ttHeaderRight {
  display: flex;
  align-items: center;
  gap: 10px;
}

.ttQuickAdd {
  display: flex;
  gap: 8px;
  align-items: center;
  border: 1px solid var(--border);
  background: var(--panel);
  border-radius: 10px;
  padding: 4px;
}

.ttQuickInput {
  width: min(420px, 42vw);
  height: 28px;
  border: none;
  background: transparent;
  padding: 0 8px;
  outline: none;
}

.ttQuickBtn {
  height: 28px;
  border-radius: 9px;
  padding: 0 12px;
  font-weight: 950;
  background: var(--accentSoft);
  border: 1px solid var(--accentMid);
  color: var(--text);
}

.ttList {
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  background: var(--panel);
}

.ttEmpty {
  padding: 16px;
  color: var(--muted);
  font-weight: 800;
}

.ttRow {
  display: grid;
  grid-template-columns: 30px 1fr auto;
  gap: 10px;
  align-items: center;
  padding: 8px 10px;
  border-bottom: 1px solid var(--border);
  cursor: pointer;
}

.ttRow:last-child {
  border-bottom: none;
}

.ttRow:hover {
  background: rgba(17, 24, 39, 0.03);
}

.ttRow.selected {
  background: var(--accentSoft);
}

.ttRow.done .ttRowTitle {
  text-decoration: line-through;
  color: var(--muted);
}

.ttCheck {
  width: 22px;
  height: 22px;
  border-radius: 8px;
  border: 1px solid rgba(17, 24, 39, 0.18);
  background: rgba(255, 255, 255, 0.75);
  display: grid;
  place-items: center;
}

.ttCheckBox {
  width: 10px;
  height: 10px;
  border-radius: 3px;
  border: 1px solid rgba(17, 24, 39, 0.25);
}

.ttCheck.checked {
  border-color: var(--accentMid);
  background: var(--accentSoft);
}

.ttCheck.checked .ttCheckBox {
  background: var(--accent);
  border-color: var(--accent);
}

.ttRowMain {
  min-width: 0;
}

.ttRowTitle {
  font-weight: 950;
  font-size: 14px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.ttRowMeta {
  margin-top: 4px;
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
}

.ttDue {
  font-size: 12px;
  font-weight: 900;
  color: rgba(17, 24, 39, 0.55);
}

.ttDue.muted {
  color: var(--muted);
}

.ttTag {
  height: 20px;
  border-radius: 999px;
  padding: 0 8px;
  font-size: 11px;
  font-weight: 900;
  background: var(--panel2);
  color: var(--muted);
  border: 1px solid var(--border);
}

.ttRowRight {
  font-size: 12px;
  font-weight: 900;
  color: var(--muted);
}

/* Agenda */
.agRoot {
  padding: 6px;
  display: flex;
  flex-direction: column;
  height: 100%;
  flex: 1;
  min-height: 0;
  overflow: hidden;
  --ag-slot-h: 88px;
  --ag-grid-line: rgba(15, 23, 42, 0.08);
  --ag-header-bg: var(--panel2);
  --ag-today-bg: rgba(17, 24, 39, 0.04);
  --ag-time-bg: var(--panel2);
}

:root[data-theme='dark'] .agRoot {
  --ag-grid-line: rgba(148, 163, 184, 0.06);
  --ag-header-bg: rgba(15, 19, 32, 0.92);
  --ag-today-bg: rgba(255, 255, 255, 0.05);
  --ag-time-bg: rgba(15, 19, 32, 0.92);
}

.agRoot.agWeek {
  padding: 4px;
  --ag-slot-h: 80px;
  --ag-grid-line: rgba(15, 23, 42, 0.06);
  --ag-header-bg: var(--panel);
  --ag-today-bg: rgba(163, 184, 124, 0.12);
  --ag-time-bg: rgba(248, 250, 252, 0.8);
  background: var(--panel);
  border-radius: 14px;
}

.agRoot.agThreeDay {
  --ag-slot-h: 84px;
}

.agRoot.agWeek .agDayHeader {
  border-radius: 12px 12px 0 0;
}

.agRoot.agWeek .agGrid {
  border-radius: 0 0 12px 12px;
  border-color: rgba(15, 23, 42, 0.08);
}

.agRoot.agWeek .agDayHeaderTitle {
  gap: 5px;
}

.agRoot.agWeek .agDayHeaderDate {
  border: 1px solid rgba(15, 23, 42, 0.08);
}

.agRoot.agWeek .agDayHeaderDate,
.agRoot.agWeek .agDayHeaderDow {
  font-variant-numeric: tabular-nums;
}

.agRoot.agWeek .agTimeCol {
  background: var(--ag-time-bg);
}

.agRoot.agWeek .agRow {
  border-bottom: 1px solid rgba(15, 23, 42, 0.06);
}

.agRoot.agWeek .agDayCol {
  background: linear-gradient(180deg, rgba(248, 250, 252, 0.55), rgba(255, 255, 255, 0.9));
}

.agRoot.agWeek .agDayCol.today {
  background: linear-gradient(180deg, rgba(163, 184, 124, 0.12), rgba(255, 255, 255, 0.9));
}

.agRoot.agWeek .agEvent {
  border-radius: 6px;
  border-color: var(--accentBorder);
  background: var(--accentSoft);
  box-shadow: inset 0 0 0 1px var(--accentSoft);
}

.agRoot.agWeek .agEventTitleRow {
  gap: 4px;
}

.agRoot.agWeek .agEventTitle {
  letter-spacing: 0.02em;
  line-height: 1.1;
}

.agRoot.agWeek .agAllDayPill {
  gap: 4px;
  padding: 0 5px;
}

.agRoot.agWeek .agAllDayText {
  letter-spacing: 0.02em;
  line-height: 1.1;
}

.agRoot.agWeek .agStripe {
  width: 2px;
}

.agRoot.agWeek .agEventMeta {
  opacity: 0.75;
}

.agRoot.agWeek .agEventMeta,
.agRoot.agWeek .agResults,
.agRoot.agWeek .agSubtitle {
  font-variant-numeric: tabular-nums;
}

.agRoot.agWeek .agAllDayPill {
  border-radius: 6px;
}

.agRoot.agWeek .agAllDayIcon {
  width: 10px;
  height: 10px;
}

.agRoot.agWeek .agAllDayPills {
  gap: 4px;
}

.agRoot.agWeek .agSegments {
  opacity: 0.85;
}

.agRoot.agWeek .agSegLine {
  background: rgba(15, 23, 42, 0.12);
}

.agRoot.agWeek .agSegLabel {
  background: rgba(255, 255, 255, 0.85);
}

.agRoot.agWeek .agHeader {
  margin-bottom: 6px;
}

.agRoot.agWeek .agDayHeaderCell {
  padding: 4px 4px 5px;
  font-size: 9px;
}

.agRoot.agWeek .agDayHeaderDow {
  font-size: 8px;
}

.agRoot.agWeek .agDayHeaderDate {
  font-size: 10px;
  padding: 1px 6px;
}

.agRoot.agWeek .agAllDayLabel {
  font-size: 8px;
}

.agRoot.agWeek .agAllDayPill {
  height: 18px;
}

.agRoot.agWeek .agAllDayText {
  font-size: 9px;
}

.agRoot.agWeek .agTimeCell {
  padding: 6px 4px 6px 6px;
  font-size: 9px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.agRoot.agWeek .agModeBtn {
  height: 24px;
  min-width: 32px;
  font-size: 10px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.agRoot.agWeek .agNavBtn,
.agRoot.agWeek .agNew {
  height: 28px;
  font-size: 10px;
}

.agRoot.agWeek .agTitle {
  font-size: 11px;
  letter-spacing: 0.02em;
}

.agRoot.agWeek .agResults,
.agRoot.agWeek .agSubtitle {
  font-size: 10px;
}

.agRoot.agWeek .agEvent {
  padding: 5px 7px;
  border-radius: 7px;
}

.agRoot.agWeek .agEventTitle {
  font-size: 10px;
  font-weight: 800;
}

.agRoot.agWeek .agEventMeta {
  font-size: 9px;
  margin-top: 1px;
}

.agRoot.agWeek .agEventIcon {
  width: 12px;
  height: 12px;
  border-radius: 5px;
}

.agRoot.agWeek .agCheck {
  width: 12px;
  height: 12px;
  border-radius: 4px;
}

.agRoot.agWeek .agCheckBox {
  width: 6px;
  height: 6px;
  border-radius: 2px;
}

.agRoot.agWeek .agSegLabel {
  font-size: 9px;
  height: 14px;
}

.agRoot.agWeek .agLogMark {
  width: 14px;
  height: 14px;
  border-radius: 5px;
}

:root[data-theme='dark'] .agRoot.agWeek {
  --ag-grid-line: rgba(148, 163, 184, 0.06);
  --ag-header-bg: rgba(11, 16, 32, 0.92);
  --ag-today-bg: rgba(163, 184, 124, 0.18);
  --ag-time-bg: rgba(11, 16, 32, 0.85);
}

:root[data-theme='dark'] .agRoot.agWeek .agGrid {
  border-color: rgba(148, 163, 184, 0.08);
}

:root[data-theme='dark'] .agRoot.agWeek .agRow {
  border-bottom: 1px solid rgba(148, 163, 184, 0.06);
}

:root[data-theme='dark'] .agRoot.agWeek .agDayCol {
  background: linear-gradient(180deg, rgba(11, 16, 32, 0.88), rgba(9, 13, 26, 0.96));
}

:root[data-theme='dark'] .agRoot.agWeek .agDayCol.today {
  background: linear-gradient(180deg, rgba(163, 184, 124, 0.18), rgba(11, 16, 32, 0.96));
}

:root[data-theme='dark'] .agRoot.agWeek .agDayHeaderDate {
  border-color: rgba(148, 163, 184, 0.10);
}

:root[data-theme='dark'] .agRoot.agWeek .agSegLine {
  background: rgba(148, 163, 184, 0.10);
}

:root[data-theme='dark'] .agRoot.agWeek .agSegLabel {
  background: rgba(11, 16, 32, 0.8);
}

.agRoot.compact {
  --ag-slot-h: 32px;
}

.agRoot.compact .agEvent {
  padding: 4px 6px;
  border-radius: 6px;
}

.agRoot.compact .agEventTitle {
  font-size: 11px;
}

.agRoot.compact .agEventMeta {
  font-size: 9px;
}

.agRoot.compact .agAllDayPill {
  height: 18px;
}

.agRoot.compact .agAllDayText {
  font-size: 9px;
}

.agRoot.agMonth {
  background: var(--panel);
  border-radius: 14px;
  padding: 8px;
  overflow: hidden;
}

.agMonthWrap {
  border: 1px solid var(--ag-grid-line);
  border-radius: 12px;
  overflow: hidden;
  background: var(--panel);
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

.agMonthHeaderRow {
  display: grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  border-bottom: 1px solid var(--ag-grid-line);
  background: var(--ag-header-bg);
}

.agMonthDow {
  padding: 6px 4px;
  font-size: 9px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
  text-align: center;
}

.agMonthGrid {
  display: grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  grid-auto-rows: minmax(120px, 1fr);
  flex: 1;
  min-height: 0;
  background: var(--panel);
}

.agMonthCell {
  border-right: 1px solid var(--ag-grid-line);
  border-bottom: 1px solid var(--ag-grid-line);
  padding: 6px 8px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-height: 0;
  background: var(--panel);
}

.agMonthCell:nth-child(7n) {
  border-right: none;
}

.agMonthCell.muted {
  opacity: 0.4;
}

.agMonthDay {
  width: 26px;
  height: 26px;
  border-radius: 10px;
  display: grid;
  place-items: center;
  font-size: 12px;
  font-weight: 900;
  color: var(--text);
  background: rgba(17, 24, 39, 0.04);
}

.agMonthDay.today {
  background: var(--accent);
  color: #fff;
}

.agMonthPills {
  display: flex;
  flex-direction: column;
  gap: 4px;
  overflow: hidden;
}

.agMonthPill {
  height: 20px;
  border-radius: 8px;
  border: 1px solid var(--accentMid);
  padding: 0 6px;
  display: inline-flex;
  align-items: center;
  gap: 5px;
  font-size: 10px;
  font-weight: 800;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  background: var(--accentSoft);
}

.agMonthMore {
  font-size: 9px;
  font-weight: 800;
  color: var(--muted);
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.agHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 10px;
}

.agRight {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.agLeft {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.agTitleRow {
  display: flex;
  align-items: baseline;
  gap: 10px;
}

.agNavBtn {
  height: var(--control-h-xs);
  border-radius: 999px;
  padding: var(--control-pad-sm);
  background: var(--panel2);
  font-weight: 800;
  color: var(--muted);
}

.agTitle {
  margin-left: 6px;
  font-weight: 900;
}

.agResults {
  font-size: 12px;
  color: var(--muted);
  font-weight: 700;
}

.agSubtitle {
  font-size: 12px;
  color: var(--muted);
}

.agToolBtn {
  height: var(--control-h-xs);
  border-radius: 999px;
  padding: var(--control-pad-sm);
  background: transparent;
  border: 1px solid transparent;
  color: var(--muted);
  font-weight: 800;
}

.agToolBtn:hover {
  background: rgba(17, 24, 39, 0.04);
  border-color: rgba(17, 24, 39, 0.08);
  color: var(--text);
}

.agMode {
  display: inline-flex;
  gap: 6px;
  padding: 2px;
  border-radius: 999px;
  background: var(--panel2);
  border: 1px solid var(--border);
}

.agModeBtn {
  height: var(--control-h-xs);
  min-width: 34px;
  border-radius: 999px;
  padding: var(--control-pad-sm);
  background: transparent;
  border: 1px solid transparent;
  color: var(--muted);
  font-weight: 900;
  font-size: 12px;
}

.agModeBtn.active {
  background: var(--panel);
  border-color: rgba(17, 24, 39, 0.10);
  color: var(--text);
}

.agZoom {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--panel);
}

.agZoomLabel {
  font-size: 11px;
  font-weight: 900;
  color: var(--muted);
}

.agZoomBtn {
  height: 24px;
  border-radius: 999px;
  padding: 0 10px;
  font-size: 11px;
  font-weight: 900;
  background: var(--panel2);
  border: 1px solid transparent;
  color: var(--muted);
}

.agZoomBtn.active {
  background: var(--accentSoft);
  border-color: rgba(217, 93, 57, 0.35);
  color: var(--text);
}

.agNew {
  height: var(--control-h-sm);
  border-radius: var(--radius-md);
  padding: var(--control-pad-md);
  font-weight: 900;
  background: var(--cta-gradient);
  border-color: var(--cta-border);
  color: #fff;
}

.agFilters {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: 10px;
}

.agFiltersEmpty {
  font-size: 12px;
  color: var(--muted);
}

.agChip {
  height: var(--control-h-sm);
  border-radius: 999px;
  padding: 0 12px;
  font-size: 12px;
  font-weight: 800;
  background: var(--panel2);
  color: var(--muted);
}

.agChip.active {
  background: var(--accentSoft);
  border-color: var(--accentMid);
  color: var(--text);
}

.agDayHeader {
  border: 1px solid var(--ag-grid-line);
  border-bottom: none;
  border-radius: 10px 10px 0 0;
  overflow: hidden;
  display: grid;
  background: var(--ag-header-bg);
}

.agAllDayLabel {
  padding: 5px 6px;
  font-size: 9px;
  color: var(--muted);
  border-right: 1px solid var(--ag-grid-line);
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.agDayHeaderCell {
  padding: 6px 6px 7px;
  font-size: 10px;
  color: var(--muted);
  border-right: 1px solid var(--ag-grid-line);
  font-weight: 700;
  background: var(--ag-header-bg);
}

.agDayHeaderTitle {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  text-align: center;
  color: var(--text);
}

.agDayHeaderDow {
  font-size: 9px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.agDayHeaderDate {
  font-size: 11px;
  font-weight: 800;
  padding: 2px 7px;
  border-radius: 999px;
  background: rgba(15, 23, 42, 0.06);
  color: var(--text);
}

:root[data-theme='dark'] .agDayHeaderDate {
  background: rgba(148, 163, 184, 0.08);
}

.agAllDayPills {
  margin-top: 6px;
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.agAllDayPill {
  height: 20px;
  border-radius: 7px;
  border: 1px solid var(--accentBorder);
  background: var(--accentSoft);
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 0 6px;
  overflow: hidden;
  text-align: left;
  transition: transform 120ms ease, box-shadow 120ms ease;
}

.agRoot.agWeek .agAllDayLabel {
  padding: 4px 4px;
  font-size: 8px;
}

.agRoot.agWeek .agAllDayPills {
  margin-top: 4px;
  gap: 2px;
}

.agRoot.agWeek .agAllDayPill {
  height: 18px;
  border-radius: 6px;
  padding: 0 5px;
  border-color: var(--accentBorder);
  background: var(--accentSoft);
}

.agRoot.agWeek .agAllDayPill.active {
  border-color: var(--accentBorder);
  background: var(--accentSoft);
}

.agRoot.agWeek .agAllDayIcon {
  width: 10px;
  height: 10px;
  border-radius: 5px;
}

.agRoot.agWeek .agAllDayText {
  font-size: 9px;
  letter-spacing: 0.02em;
}

.agRoot.agWeek .agDayHeaderCell {
  border-right: 1px solid rgba(15, 23, 42, 0.06);
}

.agRoot.agWeek .agAllDayLabel {
  border-right: 1px solid rgba(15, 23, 42, 0.08);
}

:root[data-theme='dark'] .agRoot.agWeek .agDayHeaderCell {
  border-right: 1px solid rgba(148, 163, 184, 0.06);
}

:root[data-theme='dark'] .agRoot.agWeek .agAllDayLabel {
  border-right: 1px solid rgba(148, 163, 184, 0.08);
}

.agAllDayPill.active {
  border-color: var(--accentBorder);
}

.agAllDayIcon {
  width: 12px;
  height: 12px;
  border-radius: 6px;
  display: grid;
  place-items: center;
  border: 1px solid var(--accentBorder);
  background: rgba(17, 24, 39, 0.03);
  flex: 0 0 auto;
}

.agAllDayText {
  font-weight: 700;
  font-size: 10px;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.agDayHeaderCell:last-child {
  border-right: none;
}

.agDayHeaderCell.today .agDayHeaderDate {
  background: var(--accent);
  color: #fff;
}

.agGrid {
  border: 1px solid var(--ag-grid-line);
  border-top: none;
  border-radius: 0 0 10px 10px;
  overflow-y: auto;
  overflow-x: hidden;
  min-height: 0;
  flex: 1;
  height: 100%;
  overscroll-behavior: contain;
}

.agGridInner {
  display: grid;
  min-width: 100%;
  min-height: calc(var(--ag-slot-rows, 96) * var(--ag-slot-h));
}

.agTimeCol {
  background: var(--ag-time-bg);
  border-right: 1px solid var(--ag-grid-line);
}

.agTimeCell {
  height: var(--ag-slot-h);
  padding: 8px 6px 8px 8px;
  font-size: 9px;
  color: var(--muted);
  border-bottom: 1px solid var(--ag-grid-line);
  font-weight: 700;
}

.agTimeCell.hour {
  color: var(--text);
}

.agDayCol {
  position: relative;
  background: var(--panel);
  border-right: 1px solid var(--ag-grid-line);
}

.agDayCol:last-child {
  border-right: none;
}

.agDayCol.today {
  background: linear-gradient(180deg, var(--ag-today-bg), var(--panel));
}

.agRow {
  height: var(--ag-slot-h);
  border-bottom: 1px solid var(--ag-grid-line);
}

.agRow.hour {
  border-bottom-color: var(--border2);
}

.agEvent {
  position: absolute;
  left: 6px;
  width: calc(100% - 12px);
  border-radius: 8px;
  border: 1px solid var(--accentBorder);
  background: var(--accentSoft);
  padding: 6px 8px;
  cursor: pointer;
  overflow: hidden;
  transition: transform 120ms ease, box-shadow 120ms ease, background 120ms ease, border-color 120ms ease;
  display: flex;
  flex-direction: column;
  gap: 2px;
  isolation: isolate;
}


.agSegments {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 1;
}

.agSeg {
  position: absolute;
  left: 6px;
  right: 6px;
  height: 0;
}

.agSegLine {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 1px;
  background: rgba(17, 24, 39, 0.18);
}

:root[data-theme='dark'] .agSegLine {
  background: rgba(148, 163, 184, 0.10);
}

.agSegLabel {
  position: absolute;
  top: -8px;
  left: 0;
  font-size: 10px;
  font-weight: 900;
  color: var(--muted);
  background: rgba(255, 255, 255, 0.72);
  border: 1px solid rgba(17, 24, 39, 0.10);
  border-radius: 999px;
  padding: 0 6px;
  height: 16px;
  display: inline-flex;
  align-items: center;
  max-width: 70%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

:root[data-theme='dark'] .agSegLabel {
  background: rgba(11, 16, 32, 0.68);
  border-color: rgba(148, 163, 184, 0.08);
}

.agStripe {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  opacity: 0.9;
  z-index: 1;
}

.agEventIcon {
  width: 14px;
  height: 14px;
  border-radius: 6px;
  border: 1px solid var(--accentBorder);
  background: var(--accentSoft);
  display: grid;
  place-items: center;
  color: var(--text);
  flex: 0 0 auto;
}

.agEvent.done {
  opacity: 0.75;
  filter: grayscale(0.2);
}

.agEvent.done .agEventTitle {
  text-decoration: line-through;
}

.agEventTitleRow {
  display: flex;
  align-items: center;
  gap: 5px;
  position: relative;
  z-index: 1;
}

.agCheck {
  width: 14px;
  height: 14px;
  padding: 0;
  border-radius: 5px;
  border: 1px solid rgba(17, 24, 39, 0.18);
  background: rgba(255, 255, 255, 0.75);
  display: grid;
  place-items: center;
}

.agCheckBox {
  width: 8px;
  height: 8px;
  border-radius: 2px;
  border: 1px solid rgba(17, 24, 39, 0.25);
  background: transparent;
}

.agCheck.checked .agCheckBox {
  background: var(--accent);
  border-color: var(--accent);
}

.agResize {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 8px;
  cursor: ns-resize;
  background: linear-gradient(180deg, transparent, rgba(17, 24, 39, 0.08));
  opacity: 0.6;
}

.agLogMark {
  position: absolute;
  width: 18px;
  height: 18px;
  border-radius: 6px;
  border: 1px solid var(--accentBorder);
  background: var(--accentSoft);
  display: grid;
  place-items: center;
  cursor: pointer;
  z-index: 2;
  transition: transform 120ms ease, box-shadow 120ms ease;
}

.agDraft {
  position: absolute;
  left: 6px;
  width: calc(100% - 12px);
  border-radius: 10px;
  border: 1px dashed var(--accent);
  background: var(--accentSoft);
  pointer-events: none;
}

.agEvent:hover .agResize {
  opacity: 1;
}

.agEvent:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 14px rgba(15, 23, 42, 0.12);
}

.agAllDayPill:hover,
.agLogMark:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 12px rgba(15, 23, 42, 0.12);
}

.agEventTitle {
  font-weight: 800;
  font-size: 11px;
  white-space: normal;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  line-height: 1.2;
}

.agEventMeta {
  margin-top: 2px;
  font-size: 10px;
  color: var(--muted);
  white-space: normal;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  position: relative;
  z-index: 1;
}

/* Tiimo-inspired Day Timeline */
.tmRoot {
  padding: 6px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  height: 100%;
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

.tmHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
}

.tmAllDay {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 0 2px;
}

.tmAllDayPill {
  height: 30px;
  border-radius: 12px;
  border: 1px solid var(--accentBorder);
  background: var(--accentSoft);
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 0 10px;
  overflow: hidden;
  max-width: 260px;
}

.tmAllDayPill.active {
  border-color: var(--accentBorder);
}

.tmAllDayIcon {
  width: 20px;
  height: 20px;
  border-radius: 9px;
  border: 1px solid var(--accentBorder);
  background: rgba(17, 24, 39, 0.03);
  display: grid;
  place-items: center;
  flex: 0 0 auto;
}

.tmAllDayText {
  font-weight: 900;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.tmLeft {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.tmTitleRow {
  display: flex;
  align-items: baseline;
  gap: 10px;
  margin-left: 6px;
}

.tmTitle {
  font-weight: 900;
}

.tmSubtitle {
  font-size: 12px;
  color: var(--muted);
  font-weight: 800;
}

.tmNavBtn {
  height: var(--control-h-xs);
  border-radius: 999px;
  padding: var(--control-pad-sm);
  background: var(--panel2);
  font-weight: 900;
  color: var(--muted);
}

.tmRight {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.tmZoom {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border: 1px solid var(--border);
  background: var(--panel);
  border-radius: 999px;
}

.tmZoomLabel {
  font-size: 12px;
  color: var(--muted);
  font-weight: 900;
}

.tmZoomBtn {
  height: 26px;
  border-radius: 999px;
  padding: 0 10px;
  font-size: 11px;
  font-weight: 900;
  background: var(--panel2);
  border: 1px solid transparent;
  color: var(--muted);
}

.tmZoomBtn.active {
  background: var(--accentSoft);
  border-color: rgba(217, 93, 57, 0.35);
  color: var(--text);
}

.tmNew {
  height: var(--control-h-sm);
  border-radius: var(--radius-md);
  padding: var(--control-pad-md);
  font-weight: 900;
  background: var(--cta-gradient);
  border: 1px solid var(--cta-border);
  color: #fff;
}

.tmTimeline {
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow-y: auto;
  overflow-x: hidden;
  flex: 1;
  min-height: 0;
  height: 100%;
  overscroll-behavior: contain;
  --tm-log-col: clamp(120px, 12vw, 200px);
}

.tmTimelineInner {
  display: grid;
  grid-template-columns: 64px minmax(0, 1fr) var(--tm-log-col);
  min-width: 100%;
  min-height: calc(var(--tm-slot-rows, 96) * var(--tm-slot-h));
}

.tmTimeCol {
  background: var(--panel2);
  border-right: 1px solid var(--border);
}

.tmTimeCell {
  height: var(--tm-slot-h);
  padding: 8px 8px;
  font-size: 11px;
  color: var(--muted);
  border-bottom: 1px solid var(--border);
  font-weight: 900;
}

.tmTimeCell.hour {
  color: var(--text);
}

.tmGrid {
  position: relative;
  background: var(--panel);
}

.tmLogCol {
  position: relative;
  background: var(--panel2);
  border-left: 1px solid var(--border);
  /* lane centerline offset from the right edge */
  --tm-lane-x: 10px;
}

/* Drag rail - vertical guide that appears during tracker drag */
.tmLogRail {
  position: absolute;
  right: var(--tm-lane-x);
  transform: translateX(50%);
  width: 4px;
  top: 0;
  bottom: 0;
  background: var(--accentMid);
  border-radius: 2px;
  opacity: 0;
  transition: opacity 0.15s ease;
  z-index: 5;
  pointer-events: none;
}

.tmLogCol.dragging .tmLogRail {
  opacity: 0.5;
}

/* Ghost position indicator - shows snapped drop position */
.tmLogGhost {
  position: absolute;
  right: var(--tm-lane-x);
  transform: translate(50%, -50%);
  width: 16px;
  height: 16px;
  background: var(--accent);
  border-radius: 50%;
  pointer-events: none;
  z-index: 6;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

/* Fade the dragging pill */
.tmLogBubble.isDragging {
  opacity: 0.4;
}

.tmLogResize {
  position: absolute;
  left: -6px;
  top: 0;
  bottom: 0;
  width: 12px;
  cursor: col-resize;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 3;
}

.tmLogResizeGrip {
  width: 4px;
  height: 48px;
  border-radius: 999px;
  background: rgba(17, 24, 39, 0.18);
  box-shadow: 0 0 0 1px rgba(17, 24, 39, 0.08);
  transition: background 120ms ease, box-shadow 120ms ease;
}

.tmLogResize:hover .tmLogResizeGrip {
  background: rgba(217, 93, 57, 0.45);
  box-shadow: 0 0 0 1px rgba(217, 93, 57, 0.35);
}

:root[data-theme='dark'] .tmLogResizeGrip {
  background: rgba(148, 163, 184, 0.12);
  box-shadow: 0 0 0 1px rgba(148, 163, 184, 0.08);
}

:root[data-theme='dark'] .tmLogResize:hover .tmLogResizeGrip {
  background: rgba(217, 93, 57, 0.55);
  box-shadow: 0 0 0 1px rgba(217, 93, 57, 0.4);
}

.tmLogLaneLine {
  position: absolute;
  right: calc(var(--tm-lane-x) - 1px);
  top: 0;
  bottom: 0;
  width: 2px;
  border-radius: 999px;
  background: var(--accentBorder);
  transform: none;
  z-index: 1;
}

.tmLogBubble {
  position: absolute;
  left: 0;
  right: 0;
  height: 0;
  pointer-events: auto;
  cursor: grab;
  --tm-pill-right: 30px;
  z-index: 2;
}

.tmLogBubble:active {
  cursor: grabbing;
}

.tmLogDot {
  position: absolute;
  right: var(--tm-lane-x);
  top: 0;
  transform: translate(50%, -50%);
  width: 12px;
  height: 12px;
  border-radius: 999px;
  border: 2px solid var(--accent);
  background: var(--accentMid);
  box-shadow: 0 4px 14px rgba(17, 24, 39, 0.10);
}

.tmLogConnector {
  position: absolute;
  right: var(--tm-lane-x);
  top: 0;
  transform: translateY(-50%);
  height: 2px;
  width: calc(var(--tm-pill-right) - var(--tm-lane-x));
  border-radius: 999px;
  background: var(--accentBorder);
}

.tmLogMark {
  position: absolute;
  right: var(--tm-lane-x);
  transform: translate(50%, -50%);
  width: 26px;
  height: 26px;
  padding: 0;
  border-radius: 999px;
  border: 1px solid var(--accentBorder);
  background: var(--accentSoft);
  color: var(--text);
  display: grid;
  place-items: center;
  cursor: pointer;
  pointer-events: auto;
  box-shadow: 0 10px 20px rgba(17, 24, 39, 0.08);
}

.tmLogMark:hover {
  filter: brightness(1.03);
}

.tmLogMark:active {
  transform: translate(50%, -50%) scale(0.98);
}

.tmRow {
  height: var(--tm-slot-h);
  border-bottom: 1px solid var(--border);
}

.tmRow.hour {
  border-bottom-color: var(--border2);
}

.tmLogPill {
  position: absolute;
  transform: translateY(-50%);
  right: var(--tm-pill-right);
  height: 30px;
  max-width: calc(100% - var(--tm-pill-right) - 12px);
  border-radius: 999px;
  padding: 0 12px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: var(--accentSoft);
  border: 1px solid var(--accentMid);
  color: var(--text);
  cursor: pointer;
  overflow: hidden;
  pointer-events: auto;
}

.tmLogMenu {
  position: absolute;
  right: 70px;
  transform: translateY(-50%);
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(17, 24, 39, 0.12);
  background: rgba(255, 255, 255, 0.95);
  box-shadow: 0 10px 24px rgba(17, 24, 39, 0.16);
  z-index: 5;
  width: 190px;
}

.tmLogMenuTitle {
  font-size: 12px;
  font-weight: 900;
  color: var(--text);
  margin-bottom: 8px;
}

.tmLogMenuRow {
  display: flex;
  align-items: center;
  gap: 8px;
}

.tmLogMenuValue {
  font-size: 12px;
  font-weight: 900;
  color: var(--text);
  width: 28px;
  text-align: right;
}

.tmLogMenuSlider {
  flex: 1;
}

.detailPoints {
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 8px 10px;
  background: var(--panel2);
  display: grid;
  gap: 4px;
}

.detailPointsValue {
  font-size: 13px;
  font-weight: 900;
  color: var(--text);
}

.detailPointsMeta {
  font-size: 11px;
  font-weight: 800;
  color: var(--muted);
}

.sbDragHandle {
  width: 18px;
  height: 18px;
  border-radius: 6px;
  border: 1px solid var(--border);
  background: rgba(17, 24, 39, 0.04);
  display: grid;
  place-items: center;
  color: var(--muted);
  cursor: grab;
}

.sbDragHandle:active {
  cursor: grabbing;
}

.tmLogIcon {
  width: 18px;
  height: 18px;
  border-radius: 9px;
  border: 1px solid var(--accentBorder);
  background: var(--accentSoft);
  display: grid;
  place-items: center;
  color: var(--text);
  flex: 0 0 auto;
}

.tmLogText {
  font-size: 12px;
  font-weight: 900;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.tmCard {
  position: absolute;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(17, 24, 39, 0.12);
  background: rgba(255, 255, 255, 0.78);
  box-shadow: 0 8px 20px rgba(17, 24, 39, 0.08);
  cursor: grab;
  overflow: hidden;
  isolation: isolate;
}


.tmStripe {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  opacity: 0.9;
}

.tmCard:active {
  cursor: grabbing;
}

.tmCard.task {
  border-color: rgba(59, 130, 246, 0.22);
  background: rgba(255, 255, 255, 0.78);
}

.tmCard.done {
  opacity: 0.78;
  filter: grayscale(0.15);
}

.tmCard.done .tmCardTitle {
  text-decoration: line-through;
}

.tmCardTop {
  display: grid;
  grid-template-columns: 22px 1fr auto;
  gap: 8px;
  align-items: start;
  position: relative;
  z-index: 1;
}

.tmCardTitleGroup {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.tmCardMeta {
  font-size: 10px;
  font-weight: 900;
  color: var(--muted);
  letter-spacing: 0.02em;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  line-height: 1.1;
}

.tmCardTopRight {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 4px;
  min-width: 0;
}

/* Top-right checkbox for tasks */
.tmCheckTop {
  width: 20px;
  height: 20px;
  padding: 0;
  border-radius: 6px;
  border: 1.5px solid rgba(17, 24, 39, 0.18);
  background: rgba(255, 255, 255, 0.8);
  display: grid;
  place-items: center;
  color: rgba(17, 24, 39, 0.5);
  cursor: pointer;
  flex-shrink: 0;
}

.tmCheckTop:hover {
  border-color: var(--accentBorder);
  background: var(--accentSoft);
}

.tmCheckTop.checked {
  border-color: var(--accentBorder);
  background: var(--accentMid);
  color: var(--accent);
}

/* Middle section for tags */
.tmCardMiddle {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 4px;
  position: relative;
  z-index: 1;
}

.tmCardEmoji {
  width: 22px;
  height: 22px;
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.7);
  border: 1px solid rgba(17, 24, 39, 0.10);
  display: grid;
  place-items: center;
  font-weight: 900;
  color: var(--text);
}

.tmCardEmoji svg {
  opacity: 0.9;
}

.tmCardTitle {
  font-weight: 950;
  font-size: 13px;
  color: var(--text);
  white-space: normal;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  line-height: 1.25;
}

.tmCardTime {
  font-size: 12px;
  color: var(--muted);
  font-weight: 900;
  font-variant-numeric: tabular-nums;
}

.tmSegments {
  position: absolute;
  inset: 0 10px 0 10px;
  pointer-events: none;
  z-index: 1;
}

.tmSeg {
  position: absolute;
  left: 0;
  right: 0;
  height: 0;
}

.tmSegLine {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 1px;
  background: rgba(17, 24, 39, 0.16);
}

:root[data-theme='dark'] .tmSegLine {
  background: rgba(148, 163, 184, 0.10);
}

.tmSegLabel {
  position: absolute;
  top: -8px;
  left: 0;
  font-size: 10px;
  color: var(--muted);
  font-weight: 900;
  background: rgba(255, 255, 255, 0.72);
  border: 1px solid rgba(17, 24, 39, 0.12);
  border-radius: 999px;
  padding: 0 6px;
  height: 16px;
  display: inline-flex;
  align-items: center;
  max-width: 70%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

:root[data-theme='dark'] .tmSegLabel {
  background: rgba(11, 16, 32, 0.68);
  border-color: rgba(148, 163, 184, 0.08);
}

.tmCardBottom {
  position: absolute;
  left: 10px;
  right: 10px;
  bottom: 6px;
  display: flex;
  align-items: center;
  gap: 6px;
  z-index: 1;
}

.tmCardBottomRight {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-left: auto;
}

.tmCardTagRow {
  display: flex;
  align-items: center;
  gap: 4px;
}

.tmChecklist {
  display: inline-flex;
  gap: 6px;
  align-items: center;
}

.tmChkItem {
  width: 14px;
  height: 14px;
  border-radius: 5px;
  border: 1px solid rgba(17, 24, 39, 0.20);
  background: rgba(17, 24, 39, 0.02);
  cursor: pointer;
}

.tmChkItem.checked {
  border-color: rgba(16, 185, 129, 0.55);
  background: rgba(16, 185, 129, 0.18);
}

.tmChkBox {
  display: block;
  width: 100%;
  height: 100%;
}

.tmTag {
  height: 22px;
  border-radius: 999px;
  padding: 0 9px;
  background: rgba(255, 255, 255, 0.55);
  border: 1px solid rgba(17, 24, 39, 0.10);
  color: rgba(17, 24, 39, 0.62);
  font-weight: 900;
  font-size: 11px;
  display: inline-flex;
  align-items: center;
}

/* Compact tags for smaller cards */
.tmTag.compact {
  height: 18px;
  padding: 0 6px;
  font-size: 10px;
}

.tmSpacer {
  flex: 1;
}

.tmPlay {
  width: 26px;
  height: 26px;
  padding: 0;
  border-radius: 8px;
  border: 1px solid rgba(17, 24, 39, 0.14);
  background: rgba(255, 255, 255, 0.75);
  display: grid;
  place-items: center;
  color: rgba(17, 24, 39, 0.62);
  margin-right: 6px;
}

.tmPlay.active {
  border-color: var(--accentMid);
  background: var(--accentSoft);
  color: var(--accent);
}

.tmPlayCompact {
  width: 20px;
  height: 20px;
  border-radius: 7px;
  margin-right: 0;
}

/* Points badge */
.tmCardPoints {
  height: 18px;
  padding: 0 7px;
  border-radius: 999px;
  background: rgba(234, 179, 8, 0.12);
  border: 1px solid rgba(234, 179, 8, 0.2);
  font-size: 10px;
  font-weight: 800;
  color: rgba(161, 98, 7, 0.85);
  display: inline-flex;
  align-items: center;
}

:root[data-theme='dark'] .tmCardPoints {
  background: rgba(234, 179, 8, 0.15);
  border-color: rgba(234, 179, 8, 0.25);
  color: rgba(253, 224, 71, 0.9);
}

/* Time info section at bottom-right */
.tmCardTimeInfo {
  display: flex;
  align-items: center;
  font-size: 11px;
  font-weight: 900;
  font-variant-numeric: tabular-nums;
  color: var(--muted);
  white-space: nowrap;
}

.tmCardTimeRange {
  white-space: nowrap;
}

.tmCardTimeDivider {
  width: 1px;
  height: 12px;
  background: rgba(17, 24, 39, 0.18);
  margin: 0 6px;
  flex-shrink: 0;
}

:root[data-theme='dark'] .tmCardTimeDivider {
  background: rgba(148, 163, 184, 0.10);
}

.tmCardElapsed {
  color: var(--accent);
  white-space: nowrap;
}

:root[data-theme='dark'] .tmCardElapsed {
  color: rgba(167, 139, 250, 0.95);
}

.tmCheck {
  width: 24px;
  height: 24px;
  padding: 0;
  border-radius: 8px;
  border: 1px solid rgba(17, 24, 39, 0.14);
  background: rgba(255, 255, 255, 0.75);
  display: grid;
  place-items: center;
  color: rgba(17, 24, 39, 0.62);
}

.tmCheck.checked {
  border-color: var(--accentMid);
  background: var(--accentSoft);
  color: var(--accent);
}

.tmResize {
  position: absolute;
  left: 8px;
  right: 8px;
  bottom: 0;
  height: 12px;
  cursor: ns-resize;
  background: linear-gradient(180deg, transparent, rgba(17, 24, 39, 0.10));
  opacity: 0.55;
}

.tmCard:hover .tmResize {
  opacity: 1;
}

.tmDraft {
  position: absolute;
  left: 10px;
  right: 10px;
  border-radius: 18px;
  border: 1px dashed var(--accentBorder);
  background: var(--accentSoft);
  pointer-events: none;
}

/* Size class adjustments */
.tmCard.micro {
  padding: 6px 10px;
}

.tmCard.micro .tmCardTop {
  gap: 6px;
}

.tmCard.micro .tmCardEmoji {
  width: 18px;
  height: 18px;
  border-radius: 7px;
}

.tmCard.micro .tmCardEmoji svg {
  width: 12px;
  height: 12px;
}

.tmCard.micro .tmCardTitle {
  font-size: 11px;
  -webkit-line-clamp: 1;
}

.tmCard.micro .tmCardMeta {
  font-size: 9px;
}

.tmCard.micro .tmCardBottom {
  bottom: 4px;
}

.tmCard.micro .tmCardTimeInfo {
  font-size: 10px;
}

.tmCard.compact {
  padding: 8px 10px;
}

.tmCard.compact .tmCardTitle {
  -webkit-line-clamp: 2;
}

.tmCard.compact .tmCardMeta {
  font-size: 10px;
}

.tmCard.compact .tmCardBottom {
  bottom: 5px;
}

.tmCard.standard .tmCardTitle {
  -webkit-line-clamp: 2;
}

.tmCard.full .tmCardTitle {
  -webkit-line-clamp: 3;
}

/* Planner (Obsidian-dense) */
.plTasks {
  height: 100%;
  border: none;
  background: transparent;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

.plTasksHeader {
  padding: 8px;
  border-bottom: 1px solid var(--border);
  display: flex;
  gap: 8px;
  align-items: center;
}

.plTasksTitle {
  font-weight: 950;
}

.plTasksSearch {
  flex: 1;
  height: 28px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel2);
  padding: 0 10px;
}

.plTasksQuick {
  padding: 8px;
  border-bottom: 1px solid var(--border);
  display: flex;
  gap: 8px;
}

.plTasksQuickInput {
  flex: 1;
  height: 28px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel2);
  padding: 0 10px;
}

.plTasksQuickBtn {
  height: 28px;
  border-radius: 10px;
  padding: 0 10px;
  font-weight: 950;
  background: var(--accentSoft);
  border: 1px solid var(--accentMid);
}

.plTasksList {
  padding: 6px;
  overflow: auto;
}

.plTasksEmpty {
  padding: 10px;
  color: var(--muted);
  font-weight: 800;
}

.plTaskRow {
  display: grid;
  grid-template-columns: 26px 1fr;
  gap: 8px;
  align-items: center;
  padding: 7px 8px;
  border-radius: 10px;
  cursor: pointer;
}

.plTaskRow:hover {
  background: rgba(17, 24, 39, 0.03);
}

.plTaskRow.selected {
  background: var(--accentSoft);
}

.plTaskCheck {
  width: 20px;
  height: 20px;
  border-radius: 7px;
  border: 1px solid rgba(17, 24, 39, 0.18);
  background: rgba(255, 255, 255, 0.75);
  display: grid;
  place-items: center;
}

.plTaskBox {
  width: 9px;
  height: 9px;
  border-radius: 3px;
  border: 1px solid rgba(17, 24, 39, 0.25);
}

.plTaskCheck.checked {
  border-color: var(--accentMid);
  background: var(--accentSoft);
}

.plTaskCheck.checked .plTaskBox {
  background: var(--accent);
  border-color: var(--accent);
}

.plTaskTitle {
  min-width: 0;
  font-weight: 900;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.plRight {
  height: 100%;
  border: none;
  background: transparent;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

.plHeader {
  padding: 8px;
  border-bottom: 1px solid var(--border);
  display: flex;
  justify-content: space-between;
  gap: 10px;
  flex-wrap: wrap;
  align-items: center;
}

.plHeaderLeft {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
}

.plNavBtn {
  height: var(--control-h-xs);
  border-radius: 999px;
  padding: var(--control-pad-sm);
  background: var(--panel2);
  color: var(--muted);
  font-weight: 900;
}

.plRange {
  margin-left: 4px;
  color: var(--muted);
  font-weight: 900;
  font-size: 12px;
}

.plHeaderRight {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
}

.plModes {
  display: inline-flex;
  gap: 6px;
  padding: 2px;
  border-radius: 999px;
  background: var(--panel2);
  border: 1px solid var(--border);
}

.plModeToggle {
  height: var(--control-h-xs);
  border-radius: 999px;
  padding: var(--control-pad-sm);
  font-weight: 900;
  font-size: 11px;
  letter-spacing: 0.03em;
  text-transform: uppercase;
  color: var(--muted);
  border: 1px solid transparent;
  background: transparent;
}

.plModeToggle[data-state='on'] {
  background: var(--panel);
  border-color: rgba(17, 24, 39, 0.10);
  color: var(--text);
}

.plNew {
  height: var(--control-h-sm);
  border-radius: var(--radius-md);
  padding: var(--control-pad-md);
  font-weight: 950;
  background: var(--cta-gradient);
  border: 1px solid var(--cta-border);
  color: #fff;
}

.plBody {
  flex: 1;
  min-height: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  padding: 8px;
}

.plHero {
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.plHero > * {
  flex: 1;
  min-height: 0;
}

.plGantt {
  padding: 10px;
}

.plGanttTitleRow {
  display: flex;
  align-items: baseline;
  gap: 10px;
}

.plGanttTitle {
  font-weight: 950;
}

.plGanttSub {
  font-size: 12px;
  color: var(--muted);
  font-weight: 900;
}

.plGanttToolbar {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 10px;
  align-items: center;
}

.plGanttSearch {
  height: 30px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel2);
  padding: 0 10px;
  min-width: 200px;
}

.plGanttToggle {
  display: inline-flex;
  gap: 6px;
  padding: 2px;
  border-radius: 999px;
  background: var(--panel2);
  border: 1px solid var(--border);
}

.plGanttToggleBtn {
  height: 24px;
  min-width: 52px;
  border-radius: 999px;
  padding: 0 10px;
  font-weight: 900;
  font-size: 11px;
  color: var(--muted);
  border: 1px solid transparent;
  background: transparent;
}

.plGanttToggleBtn.active {
  background: var(--panel);
  border-color: rgba(17, 24, 39, 0.10);
  color: var(--text);
}

.plGanttTags {
  margin-top: 10px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.plGanttTag {
  height: 24px;
  border-radius: 999px;
  padding: 0 10px;
  font-size: 11px;
  font-weight: 800;
  background: var(--panel2);
  color: var(--muted);
}

.plGanttTag.active {
  background: var(--accentSoft);
  border-color: var(--accentMid);
  color: var(--text);
}

.plGanttScaleWrapper {
  margin-top: 12px;
}

.plGanttMonthRow {
  display: grid;
  grid-template-columns: repeat(var(--pl-gantt-cols), minmax(0, 1fr));
  border: 1px solid var(--border);
  border-bottom: none;
  border-radius: 8px 8px 0 0;
  overflow: hidden;
}

.plGanttMonthCell {
  padding: 8px 12px;
  font-size: 13px;
  font-weight: 700;
  color: var(--text);
  background: var(--bgCard);
  border-right: 1px solid var(--border);
  text-align: center;
}

.plGanttMonthCell:last-child {
  border-right: none;
}

.plGanttScale {
  display: grid;
  grid-template-columns: repeat(var(--pl-gantt-cols), minmax(0, 1fr));
  border: 1px solid var(--border);
  border-radius: 0 0 8px 8px;
  overflow: hidden;
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
}

.plGanttScaleCell {
  padding: 6px 2px;
  text-align: center;
  background: var(--bg);
  border-right: 1px solid var(--border);
  border-bottom: none;
}

.plGanttScaleCell:last-child {
  border-right: none;
}

.plGanttScaleCell:hover {
  background: var(--bgHover);
}

.plGanttRows {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 10px;
}

.plGanttRow {
  display: grid;
  grid-template-columns: 220px 1fr;
  gap: 12px;
  align-items: center;
  cursor: grab;
}

.plGanttRow:active {
  cursor: grabbing;
}

.plGanttRowTitle {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.plGanttRowName {
  font-weight: 900;
  font-size: 12px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.plGanttRowMeta {
  font-size: 11px;
  color: var(--muted);
  font-weight: 800;
}

.plGanttRowTrack {
  position: relative;
  height: 18px;
  border-radius: 999px;
  background: linear-gradient(90deg, var(--accentSoft) 1px, transparent 1px);
  background-size: calc(100% / var(--pl-gantt-cols)) 100%;
}

.plGanttBar {
  position: absolute;
  top: 2px;
  bottom: 2px;
  border-radius: 999px;
  background: var(--accent);
  box-shadow: 0 4px 10px rgba(17, 24, 39, 0.12);
}

.plGanttBar.task {
  background: rgba(37, 99, 235, 0.65);
}

.plGanttEmpty {
  padding: 16px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 800;
}

.plGanttList {
  margin-top: 10px;
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
}

.plGanttRow {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  padding: 8px 10px;
  border-bottom: 1px solid var(--border);
  cursor: pointer;
}

.plGanttRow:last-child {
  border-bottom: none;
}

.plGanttRow:hover {
  background: rgba(17, 24, 39, 0.03);
}

.plGanttRowTitle {
  font-weight: 900;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.plGanttRowMeta {
  color: var(--muted);
  font-weight: 900;
  font-size: 12px;
}

/* Month */
.moGrid {
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  display: grid;
  grid-template-columns: repeat(7, minmax(0, 1fr));
  grid-auto-rows: 34px;
}

.moDow {
  background: var(--panel2);
  border-right: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
  padding: 8px 10px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 900;
  text-transform: uppercase;
  letter-spacing: 0.6px;
}

.moDow:nth-child(7n) {
  border-right: none;
}

.moCell {
  border-right: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
  padding: 8px;
  min-height: 120px;
  grid-row: span 4;
  background: var(--panel);
  cursor: default;
}

.moCell:nth-child(7n) {
  border-right: none;
}

.moCell.other {
  background: rgba(17, 24, 39, 0.02);
  color: rgba(17, 24, 39, 0.5);
}

.moDayNum {
  font-weight: 900;
  font-size: 12px;
  color: var(--muted);
  margin-bottom: 6px;
}

.moChips {
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 0;
}

.moChip {
  border-radius: 8px;
  border: 1px solid var(--accentMid);
  background: var(--accentSoft);
  padding: 4px 6px;
  font-size: 12px;
  font-weight: 800;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  gap: 6px;
}

.moChipIcon {
  width: 16px;
  height: 16px;
  border-radius: 7px;
  border: 1px solid var(--accentBorder);
  background: var(--accentSoft);
  display: grid;
  place-items: center;
  flex: 0 0 auto;
}

.moChipTitle {
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
}

.moChip.task {
  border-color: rgba(59, 130, 246, 0.22);
  background: rgba(59, 130, 246, 0.10);
}

.moChip.log {
  border-color: rgba(17, 24, 39, 0.12);
  background: rgba(17, 24, 39, 0.06);
}

.moChip.done {
  opacity: 0.7;
}

.moMore {
  font-size: 12px;
  color: var(--muted);
  font-weight: 800;
}

/* Assistant (reuse previous styles but light) */
.assistantShell {
  display: flex;
  flex-direction: column;
  min-height: 520px;
}

.assistantTop {
  display: flex;
  gap: 12px;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 10px;
}

.assistantHint {
  font-size: 12px;
  color: var(--muted);
  padding-top: 6px;
}

.assistantKey {
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 280px;
}

.assistantKey label {
  font-size: 12px;
  color: var(--muted);
  font-weight: 800;
}

.assistantKeyInput {
  height: 36px;
  border-radius: 10px;
  border: 1px solid var(--border);
  padding: 0 10px;
  outline: none;
  background: var(--panel2);
}

.assistantMessages {
  flex: 1;
  border: 1px solid var(--border);
  background: var(--panel2);
  border-radius: 12px;
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  overflow: auto;
}

.assistantEmpty {
  color: var(--muted);
  font-size: 12px;
}

.bubble {
  max-width: 80%;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--panel);
  padding: 10px;
}

.bubble.user {
  margin-left: auto;
  border-color: var(--accentMid);
  background: var(--accentSoft);
}

.bubbleRole {
  font-size: 11px;
  font-weight: 900;
  color: var(--muted);
  margin-bottom: 6px;
}

.bubbleText {
  white-space: pre-wrap;
}

.assistantComposer {
  margin-top: 10px;
  display: flex;
  gap: 10px;
}

.assistantInput {
  flex: 1;
  height: 40px;
  border-radius: 10px;
  border: 1px solid var(--border);
  padding: 0 10px;
  outline: none;
  background: var(--panel2);
}

.assistantControls {
  display: flex;
  align-items: center;
}

/* Notes */
.notesRoot {
  padding: 14px;
}

.notesHeader {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 10px;
}

.notesTitle {
  font-weight: 950;
  letter-spacing: 0.02em;
}

.notesSub {
  margin-top: 4px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 800;
}

.notesNew {
  height: 34px;
  border-radius: 10px;
  padding: 0 10px;
  font-weight: 950;
  background: var(--accentSoft);
  border-color: var(--accentMid);
  transition: transform 120ms ease, box-shadow 120ms ease;
}

.notesSearchRow {
  display: flex;
  margin-bottom: 10px;
}

.notesSearch {
  width: 100%;
  height: 34px;
  border-radius: 10px;
  border: 1px solid var(--border);
  padding: 0 10px;
  outline: none;
  background: var(--panel2);
  transition: border-color 120ms ease, box-shadow 120ms ease;
}

/* 
   Notes View - Clean Redesign
    */

.notesViewRoot {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--bg);
  overflow: hidden;
}

/* Header */
.notesHeader {
  padding: 20px 24px 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  border-bottom: 1px solid var(--border);
  background: var(--panel);
}

.notesHeaderTop {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}

.notesHeaderTop h1 {
  font-size: 20px;
  font-weight: 800;
  letter-spacing: -0.02em;
}

.notesHeaderTop p {
  font-size: 11px;
  color: var(--muted);
  font-weight: 600;
  margin-top: 2px;
}

.notesHeaderActions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.notesViewToggle {
  display: flex;
  background: var(--panel2);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 2px;
}

.notesViewToggle button {
  width: 32px;
  height: 28px;
  border: none;
  background: transparent;
  border-radius: 6px;
  color: var(--muted);
  cursor: pointer;
  display: grid;
  place-items: center;
  transition: all 120ms ease;
}

.notesViewToggle button:hover {
  color: var(--text);
}

.notesViewToggle button.active {
  background: var(--bg);
  color: var(--text);
  box-shadow: 0 1px 2px rgba(0,0,0,0.06);
}

.notesNewBtn {
  height: 32px;
  padding: 0 12px;
  background: var(--accent);
  color: white;
  border: none;
  border-radius: 8px;
  font-weight: 700;
  font-size: 12px;
  display: flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
  transition: all 120ms ease;
}

.notesNewBtn:hover {
  filter: brightness(1.1);
  transform: translateY(-1px);
}

/* Search Row */
.notesSearchRow {
  display: flex;
  align-items: center;
  gap: 10px;
}

.notesSearchInput {
  flex: 1;
  max-width: 280px;
  height: 32px;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 0 10px;
  background: var(--panel2);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: var(--muted);
}

.notesSearchInput input {
  flex: 1;
  border: none;
  background: transparent;
  outline: none;
  font-size: 12px;
  font-weight: 500;
  color: var(--text);
}

.notesSearchInput input::placeholder {
  color: var(--muted);
}

.notesSortSelect {
  height: 32px;
  padding: 0 10px;
  background: var(--panel2);
  border: 1px solid var(--border);
  border-radius: 8px;
  font-size: 12px;
  font-weight: 600;
  color: var(--text);
  cursor: pointer;
}

/* Filter Row */
.notesFilterRow {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding-top: 4px;
}

.notesFilterTabs {
  display: inline-flex;
  flex-wrap: wrap;
  gap: 6px;
  padding: 4px;
  border-radius: 999px;
  background: var(--panel2);
  border: 1px solid var(--border);
}

.notesFilterTab {
  height: 26px;
  padding: 0 12px;
  border-radius: 999px;
  border: none;
  background: transparent;
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--muted);
  cursor: pointer;
  transition: all 120ms ease;
}

.notesFilterTab.active {
  background: var(--panel);
  color: var(--text);
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.notesFilterChips {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.notesFilterChip {
  height: 26px;
  padding: 0 10px;
  background: var(--panel2);
  border: 1px solid var(--border);
  border-radius: 999px;
  font-size: 11px;
  font-weight: 700;
  color: var(--muted);
  cursor: pointer;
  transition: all 120ms ease;
}

.notesFilterChip:hover {
  border-color: var(--border2);
  color: var(--text);
}

.notesFilterChip.active {
  background: var(--accent);
  border-color: var(--accent);
  color: #fff;
}

.notesFilterChipRemove {
  margin-left: 6px;
  font-weight: 800;
}

/* Tag Bar */
.notesTagBar {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
  padding-top: 4px;
}

.notesTagChip {
  height: 26px;
  padding: 0 10px;
  background: var(--panel2);
  border: 1px solid var(--border);
  border-radius: 999px;
  font-size: 11px;
  font-weight: 700;
  color: var(--muted);
  cursor: pointer;
  transition: all 120ms ease;
}

.notesTagChip:hover {
  border-color: var(--border2);
  color: var(--text);
}

.notesTagChip.active {
  background: var(--accent);
  border-color: var(--accent);
  color: white;
}

/* Content Area */
.notesExplorerBody {
  flex: 1;
  display: grid;
  grid-template-columns: minmax(0, 1fr) minmax(320px, 600px);
  grid-template-rows: minmax(0, 1fr);
  gap: 24px;
  padding: 20px 24px 40px;
  overflow: hidden;
  min-height: 0;
}

.notesContent {
  overflow: auto;
  padding-right: 6px;
  min-height: 0;
}

.notesEmpty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  height: 200px;
  color: var(--muted);
  font-size: 12px;
  font-weight: 600;
  opacity: 0.5;
}

/* Cards Grid */
.notesMasonry {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 16px;
}

.notesCard {
  width: 100%;
  text-align: left;
  display: flex;
  flex-direction: column;
  padding: 20px;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 16px;
  cursor: pointer;
  transition: all 150ms ease;
}

.notesCard:hover {
  border-color: var(--border2);
  box-shadow: 0 8px 24px rgba(0,0,0,0.08);
  transform: translateY(-2px);
}

.notesCard.active {
  border-color: var(--accent);
  background: var(--accentSoft);
  box-shadow: 0 4px 16px rgba(217, 93, 57, 0.15);
}

.notesCardTitle {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
}

.notesCardTitle > span:first-child {
  font-size: 15px;
  font-weight: 700;
  line-height: 1.35;
  color: var(--text);
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  letter-spacing: -0.01em;
}

.notesCardDate {
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
  white-space: nowrap;
  flex-shrink: 0;
  opacity: 0.6;
}

.notesCardPreview {
  font-size: 13px;
  color: var(--muted);
  line-height: 1.5;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
  margin-top: 10px;
}

.notesCardMeta {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  margin-top: 14px;
  padding-top: 14px;
  border-top: 1px solid var(--border);
}

.notesCardPlace,
.notesCardPerson {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
}

.notesCardWords {
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
  opacity: 0.5;
  margin-left: auto;
}

.notesCardTags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 12px;
}

.notesCardTags span {
  padding: 4px 10px;
  background: var(--panel2);
  border-radius: 6px;
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
}

.notesInspector {
  border: 1px solid var(--border);
  background: var(--panel);
  border-radius: 20px;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-height: calc(100vh - 160px);
  overflow-y: auto;
  position: sticky;
  top: 24px;
}

.notesInspectorHeader {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
}

.notesInspectorEyebrow {
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
}

.notesInspectorTitle {
  font-size: 18px;
  font-weight: 800;
}

.notesInspectorMeta {
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
  margin-top: 4px;
}

.notesInspectorSection {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.notesInspectorLabel {
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
}

.notesInspectorChips {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.notesInspectorChip {
  height: 26px;
  padding: 0 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--panel2);
  font-size: 11px;
  font-weight: 700;
  color: var(--muted);
  cursor: pointer;
  transition: all 120ms ease;
}

.notesInspectorChip.active {
  background: var(--accent);
  border-color: var(--accent);
  color: #fff;
}

.notesInspectorChipRemove {
  margin-left: 6px;
  font-weight: 800;
}

.notesInspectorEmptyMeta {
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
  opacity: 0.7;
}

.notesInspectorEditor {
  min-height: 220px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--panel2);
  padding: 10px 12px;
  font-size: 12px;
  line-height: 1.5;
  resize: vertical;
}

.notesInspectorActions {
  display: flex;
  align-items: center;
  gap: 10px;
}

.notesInspectorSave {
  height: 30px;
  padding: 0 12px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--panel2);
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.notesInspectorSave:disabled {
  opacity: 0.5;
}

.notesInspectorHint {
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
}

.notesInspectorEmpty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  gap: 12px;
  color: var(--muted);
  font-size: 12px;
  font-weight: 600;
  min-height: 260px;
  opacity: 0.6;
}

/* Table View */
.notesTable {
  display: flex;
  flex-direction: column;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
}

.notesTableHeader {
  display: grid;
  grid-template-columns: 1fr 90px 140px 1fr;
  gap: 12px;
  padding: 10px 14px;
  background: var(--panel2);
  border-bottom: 1px solid var(--border);
  font-size: 10px;
  font-weight: 700;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.notesTableBody {
  display: flex;
  flex-direction: column;
}

.notesTableRow {
  display: grid;
  grid-template-columns: 1fr 90px 140px 1fr;
  gap: 12px;
  padding: 12px 14px;
  border: none;
  border-bottom: 1px solid var(--border);
  background: transparent;
  text-align: left;
  cursor: pointer;
  transition: background 100ms ease;
}

.notesTableRow:last-child {
  border-bottom: none;
}

.notesTableRow:hover {
  background: var(--panel2);
}

.notesTableRow.active {
  background: var(--accentSoft);
}

.notesTableCell {
  font-size: 12px;
  font-weight: 500;
  color: var(--text);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.notesTableCell.title {
  font-weight: 600;
}

.notesTableCell.date {
  color: var(--muted);
  font-size: 11px;
}

.notesTableCell.tags {
  display: flex;
  gap: 4px;
  overflow: hidden;
}

.notesTableTag {
  padding: 2px 6px;
  background: var(--panel2);
  border-radius: 4px;
  font-size: 10px;
  font-weight: 600;
  color: var(--muted);
  white-space: nowrap;
}

.notesTableCell.preview {
  color: var(--muted);
  font-size: 11px;
}

/* Responsive */
@media (max-width: 1200px) {
  .notesExplorerBody {
    grid-template-columns: 1fr;
  }

  .notesInspector {
    position: static;
    max-height: none;
  }
}

@media (max-width: 768px) {
  .notesHeader {
    padding: 16px;
  }

  .notesExplorerBody {
    padding: 16px;
  }

  .notesContent {
    padding-right: 0;
  }

  .notesMasonry {
    grid-template-columns: 1fr;
  }
}

/* Dark theme adjustments */
:root[data-theme='dark'] .notesCard:hover {
  box-shadow: 0 8px 20px rgba(0,0,0,0.25);
}

:root[data-theme='dark'] .notesTable {
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

/* ChatGPT-like Chat */
.chatPage {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.chatEmbedTop {
  display: flex;
  gap: 8px;
  align-items: center;
  padding: 8px 0 10px;
}

.chatPage.embedded .chatLayout {
  grid-template-columns: 1fr;
  gap: 0;
  padding: 0;
}

.chatPage.embedded .chatFrame {
  max-width: none;
  justify-self: stretch;
  border-radius: 12px;
}

.chatPage.embedded .chatMsgs {
  padding: 10px;
}

.chatPage.embedded .chatKey {
  width: 100%;
  min-width: 0;
}

.chatTopbar {
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
  background: var(--glass2);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.chatTitleMain {
  font-weight: 950;
  letter-spacing: 0.2px;
}

.chatTitleSub {
  margin-top: 2px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 800;
}

.chatControls {
  display: flex;
  gap: 10px;
  align-items: center;
}

.chatKey {
  height: 34px;
  border-radius: 10px;
  border: 1px solid var(--border);
  padding: 0 10px;
  outline: none;
  background: var(--panel2);
  width: 240px;
}

.chatClear {
  height: 34px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel2);
  padding: 0 10px;
  font-weight: 900;
  color: var(--text);
  cursor: pointer;
}

.chatLayout {
  flex: 1;
  display: grid;
  grid-template-columns: 1fr 320px;
  gap: 12px;
  padding: 12px;
  min-height: 0;
}

@media (max-width: 980px) {
  .chatLayout {
    grid-template-columns: 1fr;
  }
  .chatSide {
    display: none;
  }
}

.chatFrame {
  border-radius: 16px;
  border: 1px solid var(--border);
  background: var(--glass);
  display: flex;
  flex-direction: column;
  min-height: 0;
  max-width: 980px;
  justify-self: center;
  width: 100%;
}

.chatMsgs {
  flex: 1;
  overflow: auto;
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  min-height: 0;
}

.chatEmpty {
  color: var(--muted);
  font-weight: 800;
  font-size: 12px;
}

.chatMsg {
  max-width: 86%;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: var(--panel);
  padding: 10px 12px;
}

.chatMsg.user {
  margin-left: auto;
  border-color: var(--accentMid);
  background: var(--accentSoft);
}

.chatRole {
  font-size: 11px;
  font-weight: 950;
  color: var(--muted);
  margin-bottom: 6px;
}

.chatText {
  white-space: pre-wrap;
  line-height: 1.35;
}

.chatComposer {
  padding: 12px;
  border-top: 1px solid var(--border);
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  background: var(--glass2);
}

.chatInput {
  height: 40px;
  border-radius: 12px;
  border: 1px solid var(--border);
  padding: 0 12px;
  outline: none;
  background: var(--panel2);
}

.chatSend {
  height: 40px;
  border-radius: 12px;
  border: 1px solid var(--accentBorder);
  background: var(--accentMid);
  color: var(--text);
  font-weight: 950;
  padding: 0 14px;
  cursor: pointer;
}

.chatSend:disabled {
  opacity: 0.55;
  cursor: not-allowed;
}

.chatSide {
  border-radius: 16px;
  border: 1px solid var(--border);
  background: var(--glass);
  padding: 12px;
  overflow: auto;
  min-height: 0;
}

.chatSideTitle {
  font-weight: 950;
  margin-bottom: 10px;
}

.chatSideGroup {
  margin-top: 10px;
}

.chatSideLabel {
  font-size: 11px;
  font-weight: 950;
  color: var(--muted);
  letter-spacing: 0.6px;
  text-transform: uppercase;
  margin-bottom: 8px;
}

.chatSideEmpty {
  font-size: 12px;
  color: var(--muted);
  font-weight: 800;
}

.chatHit {
  width: 100%;
  text-align: left;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: var(--panel2);
  padding: 10px;
  cursor: pointer;
  margin-bottom: 8px;
}

.chatHitTop {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  align-items: baseline;
}

.chatHitTitle {
  font-weight: 950;
}

.chatHitTime {
  font-size: 12px;
  font-weight: 900;
  color: var(--muted);
  white-space: nowrap;
}

.chatHitSnippet {
  margin-top: 6px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 800;
  white-space: pre-wrap;
}

.segmented {
  display: inline-flex;
  padding: 2px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--panel2);
}

.segBtn {
  height: 30px;
  border-radius: 999px;
  padding: 0 10px;
  border: none;
  background: transparent;
  color: var(--muted);
  font-weight: 900;
  cursor: pointer;
}

.segBtn.active {
  background: var(--accentMid);
  color: var(--text);
}

/* Dashboard */
.dash {
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

/* Simple index pages (People/Places/Tags) */
.idxTop {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 10px;
}

.idxSearch {
  flex: 1;
  height: 36px;
  border-radius: 12px;
  border: 1px solid var(--border);
  padding: 0 12px;
  background: var(--panel2);
  color: var(--text);
  font-weight: 800;
}

.idxInput {
  height: 32px;
  width: 76px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel2);
  color: var(--text);
  font-weight: 900;
  padding: 0 8px;
  text-align: right;
}

.idxPill {
  height: 36px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--panel2);
  padding: 0 12px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-weight: 900;
  color: var(--muted);
  white-space: nowrap;
}

.idxGrid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

@media (max-width: 980px) {
  .idxGrid {
    grid-template-columns: 1fr;
  }
}

.idxList {
  border: 1px solid var(--border);
  border-radius: 14px;
  background: var(--panel);
  overflow: hidden;
}

.idxRow {
  width: 100%;
  text-align: left;
  padding: 10px 12px;
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  align-items: center;
  border-bottom: 1px solid rgba(17, 24, 39, 0.06);
  background: transparent;
  cursor: pointer;
  color: var(--text);
}

:root[data-theme='dark'] .idxRow {
  border-bottom-color: rgba(148, 163, 184, 0.08);
}

.idxRow:last-child {
  border-bottom: none;
}

.idxRow.active {
  background: var(--accentSoft);
}

.idxRowMain {
  min-width: 0;
}

.idxRowTitle {
  font-weight: 950;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.idxRowMeta {
  margin-top: 2px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 850;
}

.idxRowRight {
  font-size: 12px;
  color: var(--muted);
  font-weight: 850;
  white-space: nowrap;
}

.idxDetail {
  border: 1px solid var(--border);
  border-radius: 14px;
  background: var(--panel);
  padding: 12px;
  overflow: hidden;
}

.idxDetailTitle {
  font-weight: 950;
  margin-bottom: 10px;
}

.idxDetailList {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.idxItem {
  width: 100%;
  text-align: left;
  border-radius: 14px;
  border: 1px solid rgba(17, 24, 39, 0.10);
  background: rgba(17, 24, 39, 0.03);
  padding: 10px 12px;
  cursor: pointer;
  color: var(--text);
}

:root[data-theme='dark'] .idxItem {
  border-color: rgba(148, 163, 184, 0.08);
  background: rgba(148, 163, 184, 0.06);
}

.idxHint {
  margin-top: 10px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 800;
}

.idxItemTop {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  align-items: baseline;
}

.idxItemTitle {
  font-weight: 900;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.idxItemMeta {
  font-size: 12px;
  color: var(--muted);
  font-weight: 900;
  white-space: nowrap;
}

.idxItemSub {
  margin-top: 4px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 850;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

/* Rewards */
.rwGrid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
}

@media (max-width: 980px) {
  .rwGrid {
    grid-template-columns: 1fr;
  }
}

.rwCard {
  border: 1px solid var(--border);
  border-radius: 14px;
  background: var(--panel);
  padding: 12px;
}

.rwTitle {
  font-size: 12px;
  font-weight: 900;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  color: var(--muted);
}

.rwStatRow {
  margin-top: 12px;
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 10px;
}

.rwStat {
  border-radius: 14px;
  border: 1px solid rgba(17, 24, 39, 0.10);
  background: rgba(17, 24, 39, 0.03);
  padding: 10px;
}

:root[data-theme='dark'] .rwStat {
  border-color: rgba(148, 163, 184, 0.08);
  background: rgba(148, 163, 184, 0.06);
}

.rwStatLabel {
  font-size: 11px;
  color: var(--muted);
  font-weight: 900;
  text-transform: uppercase;
  letter-spacing: 0.4px;
}

.rwStatValue {
  margin-top: 4px;
  font-weight: 950;
  font-size: 18px;
}

.rwHint {
  margin-top: 10px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 850;
}

.rwStore {
  margin-top: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.rwItem {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  align-items: center;
  border-radius: 14px;
  border: 1px solid rgba(17, 24, 39, 0.10);
  background: rgba(17, 24, 39, 0.03);
  padding: 10px 12px;
}

:root[data-theme='dark'] .rwItem {
  border-color: rgba(148, 163, 184, 0.08);
  background: rgba(148, 163, 184, 0.06);
}

.rwItemName {
  font-weight: 950;
}

.rwItemDesc {
  margin-top: 2px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 850;
}

.rwBuy {
  height: 34px;
  border-radius: 999px;
  padding: 0 12px;
  font-weight: 950;
  background: var(--accentSoft);
  border: 1px solid var(--accentMid);
  color: var(--text);
  cursor: pointer;
  white-space: nowrap;
}

.rwBuy.disabled {
  opacity: 0.45;
  cursor: default;
}

/* Habits */
.hbGrid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
}

@media (max-width: 980px) {
  .hbGrid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 640px) {
  .hbGrid {
    grid-template-columns: 1fr;
  }
}

.hbCard {
  text-align: left;
  border-radius: 16px;
  border: 1px solid rgba(17, 24, 39, 0.10);
  background: rgba(17, 24, 39, 0.03);
  padding: 12px;
  color: var(--text);
}

:root[data-theme='dark'] .hbCard {
  border-color: rgba(148, 163, 184, 0.08);
  background: rgba(148, 163, 184, 0.06);
}

.hbName {
  font-weight: 950;
}

.hbMeta {
  margin-top: 4px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 850;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.hbDetail {
  margin-bottom: 12px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.hbDetailHead {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
}

.hbDetailTitle {
  font-weight: 950;
  font-size: 18px;
}

.hbDetailMeta {
  margin-top: 4px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 850;
}

.hbStats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 10px;
}

.hbStat {
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--panel2);
  padding: 10px 12px;
}

.hbStatLabel {
  font-size: 11px;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  font-weight: 900;
}

.hbStatValue {
  margin-top: 6px;
  font-weight: 950;
  font-size: 18px;
}

.hbActions {
  display: flex;
  gap: 6px;
  margin-bottom: 8px;
}

.hbActionBtn {
  height: 26px;
  border-radius: 8px;
  padding: 0 10px;
  border: 1px solid var(--border);
  background: var(--panel2);
  font-weight: 900;
  font-size: 12px;
  color: var(--text);
  cursor: pointer;
}

.hbActionBtn.neg {
  border-color: rgba(248, 113, 113, 0.4);
  background: rgba(248, 113, 113, 0.12);
  color: #b91c1c;
}

:root[data-theme='dark'] .hbActionBtn.neg {
  color: #fca5a5;
}

.hbHeat {
  margin-top: 8px;
  display: grid;
  grid-template-columns: repeat(var(--hb-heat-cols), 8px);
  grid-template-rows: repeat(7, 8px);
  gap: 2px;
}

.hbHeatCell {
  width: 8px;
  height: 8px;
  border-radius: 2px;
  background: rgba(148, 163, 184, 0.08);
}

.dashHead {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
}

.dashHeadRight {
  display: flex;
  gap: 10px;
  align-items: center;
}

.dashTitle {
  font-weight: 950;
  letter-spacing: 0.02em;
}

/* Reports */
.reportFilters {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
  margin-bottom: 12px;
}

.reportToggles {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  font-size: 12px;
  color: var(--muted);
  font-weight: 800;
}

.reportToggle {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.reportSummary {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 12px;
  margin-bottom: 12px;
}

.reportSummaryItem {
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--panel2);
  padding: 10px 12px;
}

.reportSummaryLabel {
  font-size: 11px;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  font-weight: 900;
}

.reportSummaryValue {
  margin-top: 6px;
  font-weight: 950;
  font-size: 18px;
}

.reportGrid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
}

@media (max-width: 980px) {
  .reportGrid {
    grid-template-columns: 1fr;
  }
}

.reportCard {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.reportCardTitle {
  font-weight: 950;
}

.reportList {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.reportRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--panel2);
}

.reportMain {
  min-width: 0;
}

.reportTitle {
  font-weight: 900;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.reportMeta {
  margin-top: 2px;
  font-size: 11px;
  color: var(--muted);
  font-weight: 800;
}

.reportMetrics {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  font-size: 11px;
  color: var(--muted);
  font-weight: 900;
}

.settingsTextarea {
  width: 100%;
  border-radius: 12px;
  border: 1px solid var(--border);
  padding: 10px 12px;
  background: var(--panel2);
  color: var(--text);
  font-family: inherit;
  font-size: 12px;
  line-height: 1.4;
  resize: vertical;
}

.dashSub {
  font-size: 12px;
  color: var(--muted);
  font-weight: 800;
  margin-top: 2px;
}

.dashRange {
  display: flex;
  gap: 6px;
  padding: 4px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--panel2);
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.4);
}

.dashRangeBtn {
  height: 30px;
  border-radius: 999px;
  padding: 0 10px;
  border: none;
  background: transparent;
  color: var(--muted);
  font-weight: 900;
  cursor: pointer;
  transition: transform 120ms ease, box-shadow 120ms ease;
}

.dashRangeBtn.active {
  background: var(--accentMid);
  color: var(--text);
}

.dashGrid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
}

.dashWidget {
  position: relative;
}

.dashWidget.editing .dashCard {
  outline: 2px dashed var(--accentBorder);
  outline-offset: 2px;
}

.dashWidgetControls {
  position: absolute;
  top: 8px;
  right: 8px;
  display: flex;
  gap: 6px;
  z-index: 2;
}

.dashWidgetBtn {
  height: 24px;
  border-radius: 8px;
  padding: 0 8px;
  border: 1px solid var(--border);
  background: var(--panel2);
  color: var(--muted);
  font-weight: 900;
  cursor: pointer;
  font-size: 11px;
  transition: transform 120ms ease, box-shadow 120ms ease;
}

.dashHidden {
  margin-top: 12px;
  border: 1px dashed var(--border);
  border-radius: 12px;
  padding: 10px 12px;
  background: var(--panel2);
}

.dashHiddenTitle {
  font-size: 12px;
  font-weight: 900;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--muted);
  margin-bottom: 8px;
}

.dashHiddenList {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.dashHiddenBtn {
  height: 28px;
  border-radius: 999px;
  padding: 0 12px;
  border: 1px solid var(--border);
  background: var(--panel);
  font-weight: 900;
  font-size: 12px;
  color: var(--text);
  transition: transform 120ms ease, box-shadow 120ms ease;
}

@media (max-width: 980px) {
  .dashGrid {
    grid-template-columns: 1fr;
  }
}

.dashCard {
  border: 1px solid var(--border);
  border-radius: 16px;
  background: linear-gradient(180deg, var(--panel), rgba(255, 255, 255, 0.9));
  padding: 12px;
  overflow: hidden;
  box-shadow: 0 18px 32px rgba(15, 23, 42, 0.08);
  transition: transform 140ms ease, box-shadow 140ms ease;
}

.dashCardTitle {
  font-size: 12px;
  font-weight: 900;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 8px;
}

.dashRow {
  display: grid;
  grid-template-columns: 240px 1fr;
  gap: 12px;
  align-items: center;
}

@media (max-width: 980px) {
  .dashRow {
    grid-template-columns: 1fr;
  }
}

.dashLegend {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding-right: 4px;
}

.dashLegend.compact {
  margin-top: 8px;
}

.dashLegendRow {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  font-size: 12px;
  font-weight: 850;
  color: var(--text);
}

.dashLegendKey {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  color: var(--text);
}

.dashLegendVal {
  color: var(--muted);
  font-weight: 900;
  white-space: nowrap;
}

.dashPie {
  width: 220px;
  height: 220px;
  display: block;
}

.dashPieTotal {
  font-size: 22px;
  font-weight: 950;
  fill: rgba(17, 24, 39, 0.92);
}

.dashPieSub {
  font-size: 12px;
  font-weight: 900;
  fill: rgba(107, 114, 128, 0.95);
}

.dashCard:hover {
  transform: translateY(-1px);
  box-shadow: 0 22px 36px rgba(15, 23, 42, 0.12);
}

.dashWidgetBtn:hover,
.dashHiddenBtn:hover,
.dashRangeBtn:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 18px rgba(15, 23, 42, 0.12);
}

:root[data-theme='dark'] .dashCard {
  background: linear-gradient(180deg, rgba(11, 16, 32, 0.98), rgba(11, 16, 32, 0.9));
  box-shadow: 0 18px 32px rgba(0, 0, 0, 0.3);
}

:root[data-theme='dark'] .dashPieTotal {
  fill: rgba(226, 232, 240, 0.9);
}

:root[data-theme='dark'] .dashPieSub {
  fill: rgba(148, 163, 184, 0.8);
}

.dashSmallNote {
  margin-top: 6px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 800;
}

.dashRadarWrap {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.dashRadar {
  width: 260px;
  height: 260px;
  display: block;
  margin: 0 auto;
}

.dashRadarLabel {
  font-size: 11px;
  font-weight: 900;
  fill: rgba(107, 114, 128, 0.95);
}

.dashList {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.dashListRow {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  font-size: 13px;
  font-weight: 850;
  border: 1px solid rgba(17, 24, 39, 0.10);
  background: rgba(17, 24, 39, 0.03);
  border-radius: 12px;
  padding: 8px 10px;
}

:root[data-theme='dark'] .dashListRow {
  border-color: rgba(148, 163, 184, 0.08);
  background: rgba(148, 163, 184, 0.06);
}

.dashListKey {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.dashListVal {
  color: var(--muted);
  font-weight: 900;
  white-space: nowrap;
}

.dashEmpty {
  font-size: 12px;
  color: var(--muted);
  font-weight: 900;
  padding: 6px 2px;
}

/* Life Tracker card grid (light) */
.lt-container {
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.lt-titlebar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.lt-title {
  font-weight: 900;
}

.lt-title-count {
  font-size: 12px;
  color: var(--muted);
  margin-left: 8px;
}

.lt-title-actions {
  display: flex;
  gap: 8px;
}

.lt-title-btn {
  height: 30px;
  border-radius: 999px;
  padding: 0 10px;
  background: var(--panel2);
  color: var(--muted);
  font-weight: 900;
}

.lt-title-btn.primary {
  background: var(--accentSoft);
  border-color: var(--accentMid);
  color: var(--text);
}

.lt-control-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--border);
}

.lt-mini {
  font-size: 12px;
  color: var(--muted);
}

.lt-control-bar-right {
  display: flex;
  gap: 10px;
  align-items: center;
}

.lt-control-group {
  display: flex;
  gap: 8px;
  align-items: center;
}

.lt-control-value {
  font-size: 12px;
  font-weight: 900;
  color: var(--muted);
}

.lt-control-btn {
  width: 30px;
  height: 30px;
  border-radius: 10px;
  display: grid;
  place-items: center;
  background: var(--panel2);
}

.lt-grid {
  display: grid;
  gap: 12px;
  --lt-grid-columns: 2;
  --lt-card-min-height: 240px;
  grid-template-columns: repeat(var(--lt-grid-columns), 1fr);
}

.lt-card {
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--panel);
  padding: 12px;
  min-height: var(--lt-card-min-height);
}

.lt-section {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.lt-section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--border);
}

.lt-section-title {
  font-size: 12px;
  font-weight: 900;
  color: var(--muted);
  letter-spacing: 0.7px;
}

.lt-section-actions {
  display: flex;
  gap: 6px;
}

.lt-play-btn,
.lt-maximize-btn {
  width: 30px;
  height: 30px;
  border-radius: 10px;
  border: none;
  background: transparent;
  color: var(--muted);
  cursor: pointer;
}

.lt-play-btn:hover,
.lt-maximize-btn:hover {
  background: rgba(17, 24, 39, 0.04);
  color: var(--text);
}

.lt-play-btn--playing {
  color: var(--accent);
  animation: lt-pulse 1s ease-in-out infinite;
}

@keyframes lt-pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.55;
  }
}

.lt-svg {
  width: 100%;
  flex: 1;
}

.lt-gridline {
  stroke: rgba(17, 24, 39, 0.10);
}

.lt-heat-label {
  fill: rgba(17, 24, 39, 0.50);
  font-size: 11px;
}

.lt-quick-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
  margin-top: 10px;
}

.lt-quick-tile {
  text-align: left;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--panel2);
  padding: 10px;
}

.lt-quick-emoji {
  font-size: 16px;
}

.lt-quick-label {
  margin-top: 8px;
  font-weight: 900;
}

.lt-quick-hint {
  margin-top: 6px;
  font-size: 12px;
  color: var(--muted);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
}

.lt-history {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 10px;
  overflow: auto;
  padding-right: 2px;
}

.lt-history-empty {
  margin-top: 10px;
  color: var(--muted);
  font-size: 13px;
}

.lt-history-item {
  text-align: left;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--panel2);
  padding: 10px;
}

.lt-history-item:hover {
  border-color: var(--accentMid);
  background: var(--accentSoft);
}

.lt-history-top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
}

.lt-history-time {
  font-size: 12px;
  color: var(--muted);
  font-weight: 900;
}

.lt-history-action {
  font-size: 12px;
  font-weight: 900;
  color: var(--accent);
}

.lt-history-text {
  margin-top: 8px;
  color: var(--text);
  font-size: 13px;
  line-height: 1.25;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.lt-workout-start {
  margin-top: 12px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.lt-workout-input {
  height: 36px;
  border-radius: 10px;
  border: 1px solid var(--border);
  padding: 0 10px;
  background: var(--panel2);
  color: var(--text);
  font-size: 13px;
  flex: 1;
  min-width: 180px;
}

.lt-workout-input.sm {
  height: 32px;
  font-size: 12px;
  min-width: 80px;
  flex: 0 0 auto;
}

.lt-workout-btn {
  height: 36px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel2);
  color: var(--text);
  font-weight: 900;
  font-size: 12px;
  padding: 0 12px;
  cursor: pointer;
}

.lt-workout-btn.primary {
  background: var(--accentSoft);
  border-color: var(--accentMid);
}

.lt-workout-active {
  margin-top: 12px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  height: 100%;
}

.lt-workout-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.lt-workout-title {
  font-weight: 900;
  font-size: 15px;
}

.lt-workout-meta {
  font-size: 12px;
  color: var(--muted);
  margin-top: 4px;
}

.lt-workout-add {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
}

.lt-workout-exercises {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 4px;
  overflow: auto;
  padding-right: 2px;
  flex: 1;
}

.lt-workout-empty {
  font-size: 12px;
  color: var(--muted);
}

.lt-workout-exercise {
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--panel2);
  padding: 10px;
}

.lt-workout-ex-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.lt-workout-ex-name {
  font-weight: 900;
}

.lt-workout-remove {
  width: 26px;
  height: 26px;
  border-radius: 8px;
  border: none;
  background: transparent;
  color: var(--muted);
  cursor: pointer;
}

.lt-workout-remove:hover {
  background: rgba(17, 24, 39, 0.06);
  color: var(--text);
}

.lt-workout-sets {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 8px;
}

.lt-workout-set {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel);
  padding: 6px 8px;
  font-size: 12px;
}

.lt-workout-set-inputs {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  align-items: center;
}

.lt-workout-prs {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 10px;
}

.lt-workout-pr {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel2);
  padding: 8px 10px;
  font-size: 13px;
}

.lt-imports {
  margin-top: 10px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.lt-import-row {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
}

.lt-import-btn {
  height: 36px;
  border-radius: 10px;
  border: 1px solid var(--accentMid);
  background: var(--accentSoft);
  color: var(--text);
  font-weight: 900;
  font-size: 12px;
  padding: 0 12px;
  display: inline-flex;
  align-items: center;
  cursor: pointer;
}

.lt-import-btn input {
  display: none;
}

.lt-import-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.lt-import-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel2);
  padding: 8px 10px;
}

.lt-import-provider {
  font-weight: 900;
  font-size: 13px;
}

.lt-import-meta {
  font-size: 12px;
  color: var(--muted);
}

.lt-container--has-maximized::before {
  content: '';
  position: fixed;
  inset: 0;
  background: rgba(17, 24, 39, 0.45);
  z-index: 40;
}

.lt-card--hidden {
  display: none;
}

.lt-card--maximized {
  position: fixed;
  inset: 18px;
  z-index: 50;
  overflow: auto;
  min-height: auto;
  padding: 18px;
  background: var(--panel);
}

.goalSection {
  background: var(--panel2);
  border: 1px solid var(--border);
  border-radius: 24px;
  padding: 18px;
  display: grid;
  gap: 16px;
}

.goalSectionPlan {
  padding: 22px;
  min-height: 420px;
}

.goalChipRow {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.goalChip {
  padding: 6px 12px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--panel);
  font-size: 11px;
  font-weight: 800;
  color: var(--muted);
  transition: border-color 120ms ease, color 120ms ease, box-shadow 120ms ease;
}

.goalChip:hover {
  color: var(--text);
  border-color: var(--border2);
  box-shadow: 0 10px 18px rgba(15, 23, 42, 0.08);
}

.goalChip.active {
  color: #D95D39;
  border-color: rgba(217, 93, 57, 0.35);
  box-shadow: 0 10px 18px rgba(217, 93, 57, 0.12);
}

.goalChipMeta {
  font-size: 10px;
  font-weight: 800;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--muted);
}

.goalLimitNote {
  font-size: 10px;
  font-weight: 800;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--muted);
}

.goalSectionHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.goalSectionEyebrow {
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.18em;
  color: var(--muted);
}

.goalSectionTitle {
  font-size: 15px;
  font-weight: 900;
  color: var(--text);
}

.goalSectionTitleRow {
  display: flex;
  align-items: center;
  gap: 8px;
}

.goalPlanAssistToggle {
  width: 28px;
  height: 28px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel);
  color: var(--muted);
  display: grid;
  place-items: center;
  transition: border-color 120ms ease, color 120ms ease, box-shadow 120ms ease;
}

.goalPlanAssistToggle:hover {
  color: var(--text);
  border-color: var(--border2);
  box-shadow: 0 8px 18px rgba(15, 23, 42, 0.08);
}

.goalPlanAssistToggle.active {
  color: #D95D39;
  border-color: rgba(217, 93, 57, 0.4);
  box-shadow: 0 10px 18px rgba(217, 93, 57, 0.12);
}

.goalSectionMeta {
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
}

.goalKpiGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 12px;
}

.goalKpiCard {
  border-radius: 18px;
  border: 1px solid var(--border);
  background: var(--panel);
  padding: 14px;
  display: grid;
  gap: 6px;
}

.goalKpiLabel {
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
}

.goalKpiValue {
  font-size: 20px;
  font-weight: 900;
  color: var(--text);
}

.goalKpiMeta {
  font-size: 11px;
  font-weight: 800;
  color: var(--muted);
}

.goalChecklist {
  display: grid;
  gap: 8px;
  overflow-x: auto;
  padding-bottom: 6px;
}

.goalChecklistRow {
  display: grid;
  grid-template-columns: 120px repeat(var(--goal-cols, 3), minmax(120px, 1fr));
  align-items: center;
  gap: 8px;
  min-width: max-content;
}

.goalChecklistHeader {
  padding-bottom: 8px;
  border-bottom: 1px dashed var(--border);
}

.goalChecklistDay {
  font-size: 11px;
  font-weight: 800;
  color: var(--text);
}

.goalChecklistCol {
  font-size: 10px;
  font-weight: 800;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.12em;
}

.goalChecklistCell {
  display: flex;
  align-items: center;
  gap: 6px;
  position: relative;
}

.goalCheck {
  width: 26px;
  height: 26px;
  border-radius: 8px;
  border: 1px solid rgba(17, 24, 39, 0.18);
  background: rgba(255, 255, 255, 0.75);
  color: rgba(17, 24, 39, 0.55);
  display: grid;
  place-items: center;
}

.goalCheck.checked {
  border-color: rgba(16, 185, 129, 0.4);
  background: rgba(16, 185, 129, 0.16);
  color: #166534;
}

.goalCheckLink {
  width: 24px;
  height: 24px;
  border-radius: 8px;
  border: 1px solid rgba(17, 24, 39, 0.14);
  background: rgba(255, 255, 255, 0.75);
  color: var(--muted);
  display: grid;
  place-items: center;
  transition: border-color 120ms ease, color 120ms ease;
}

.goalCheckLink:hover {
  color: var(--text);
  border-color: rgba(17, 24, 39, 0.24);
}

.goalCheckMenu {
  width: 24px;
  height: 24px;
  border-radius: 8px;
  border: 1px solid rgba(17, 24, 39, 0.14);
  background: rgba(255, 255, 255, 0.75);
  color: var(--muted);
  display: grid;
  place-items: center;
  transition: border-color 120ms ease, color 120ms ease;
}

.goalCheckMenu:hover {
  color: var(--text);
  border-color: rgba(17, 24, 39, 0.24);
}

.goalCheckMenuPopover {
  position: absolute;
  right: 0;
  top: calc(100% + 6px);
  z-index: 10;
  min-width: 140px;
  padding: 6px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--panel);
  box-shadow: 0 18px 30px rgba(15, 23, 42, 0.12);
  display: grid;
  gap: 4px;
}

.goalCheckMenuItem {
  text-align: left;
  padding: 6px 10px;
  border-radius: 8px;
  font-size: 11px;
  font-weight: 700;
  color: var(--text);
  background: transparent;
}

.goalCheckMenuItem:hover {
  background: rgba(15, 23, 42, 0.06);
}

.goalChecklistNav {
  display: flex;
  align-items: center;
  gap: 10px;
}

.goalChecklistNavButton {
  width: 28px;
  height: 28px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel);
  color: var(--muted);
  display: grid;
  place-items: center;
  transition: border-color 120ms ease, color 120ms ease, box-shadow 120ms ease;
}

.goalChecklistNavButton:hover {
  color: var(--text);
  border-color: var(--border2);
  box-shadow: 0 8px 18px rgba(15, 23, 42, 0.08);
}

.goalChecklistNavText {
  display: grid;
  gap: 2px;
  text-align: center;
}

.goalChecklistNavLabel {
  font-size: 11px;
  font-weight: 800;
  color: var(--text);
}

.goalChecklistNavMeta {
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
}

.goalPlan {
  display: grid;
  grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
  gap: 16px;
  align-items: stretch;
}

.goalPlanLeft {
  display: grid;
  gap: 12px;
}

.goalPlanAssist {
  border-radius: 16px;
  border: 1px dashed var(--border);
  background: rgba(255, 255, 255, 0.75);
  padding: 12px;
  display: grid;
  gap: 10px;
}

.goalPlanAssistHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.goalPlanAssistTitle {
  font-size: 12px;
  font-weight: 900;
  color: var(--text);
}

.goalPlanAssistSub {
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
}

.goalPlanAssistClose {
  width: 26px;
  height: 26px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--panel);
  color: var(--muted);
  display: grid;
  place-items: center;
  transition: border-color 120ms ease, color 120ms ease, box-shadow 120ms ease;
}

.goalPlanAssistClose:hover {
  color: var(--text);
  border-color: var(--border2);
  box-shadow: 0 8px 18px rgba(15, 23, 42, 0.08);
}

.goalPlanAssistGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 8px;
}

.goalPlanAssistField {
  display: grid;
  gap: 6px;
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
}

.goalPlanAssistInput,
.goalPlanAssistTextarea,
.goalPlanAssistOutput {
  width: 100%;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: #fff;
  padding: 8px 10px;
  font-size: 12px;
  font-weight: 600;
  color: var(--text);
  text-transform: none;
  letter-spacing: normal;
}

.goalPlanAssistTextarea {
  min-height: 72px;
  resize: vertical;
}

.goalPlanAssistOutput {
  min-height: 120px;
  background: rgba(255, 255, 255, 0.9);
  resize: vertical;
}

.goalPlanAssistEmpty {
  border-radius: 12px;
  border: 1px dashed var(--border);
  padding: 12px;
  background: rgba(255, 255, 255, 0.65);
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
}

.goalPlanAssistStatus {
  font-size: 11px;
  font-weight: 700;
  color: var(--muted);
}

.goalPlanAssistError {
  font-size: 11px;
  font-weight: 800;
  color: #B91C1C;
}

.goalPlanAssistActions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.goalPlanAssistBtn {
  height: 30px;
  padding: 0 12px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel);
  font-size: 11px;
  font-weight: 800;
  color: var(--text);
  transition: border-color 120ms ease, box-shadow 120ms ease;
}

.goalPlanAssistBtn:hover {
  border-color: var(--border2);
  box-shadow: 0 8px 18px rgba(15, 23, 42, 0.08);
}

.goalPlanAssistBtn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  box-shadow: none;
}

.goalPlanAssistBtn.primary {
  background: rgba(217, 93, 57, 0.18);
  border-color: rgba(217, 93, 57, 0.4);
  color: #D95D39;
}

.goalPlanEditor {
  min-height: 240px;
  width: 100%;
  border-radius: 16px;
  border: 1px solid rgba(17, 24, 39, 0.12);
  background: #fff;
  padding: 14px 16px;
  font-size: 12px;
  font-weight: 600;
  line-height: 1.6;
  color: var(--text);
  resize: vertical;
  box-shadow: 0 14px 26px rgba(15, 23, 42, 0.08);
}

.goalPlanOutline {
  border-radius: 16px;
  border: 1px dashed var(--border);
  background: rgba(255, 255, 255, 0.7);
  padding: 12px;
  display: grid;
  gap: 8px;
  max-height: 220px;
  overflow: auto;
}

.goalPlanOutlineEmpty {
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
}

.goalPlanOutlineItem {
  display: grid;
  gap: 4px;
  padding-left: calc(var(--plan-level, 0) * 14px);
}

.goalPlanOutlineTitle {
  font-size: 12px;
  font-weight: 800;
  color: var(--text);
}

.goalPlanOutlineTags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.goalPlanTag {
  padding: 2px 6px;
  border-radius: 999px;
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  background: rgba(17, 24, 39, 0.08);
  color: var(--muted);
}

.goalPlanPreview {
  --plan-row-gap: 4px;
  --plan-track-h: 12px;
  --plan-title-size: 11px;
  --plan-date-size: 9px;
  --plan-col-gap: 8px;
  --plan-label-min: 180px;
  --plan-label-max: 260px;
  --plan-bar-pad: 1px;
  border-radius: 16px;
  border: 1px solid var(--border);
  background: var(--panel);
  padding: 10px;
  display: grid;
  gap: 8px;
  grid-template-rows: auto 1fr;
  align-content: start;
  min-height: 240px;
  overflow: auto;
}

.goalPlanPreview.density-tight {
  --plan-row-gap: 2px;
  --plan-track-h: 10px;
  --plan-title-size: 10px;
  --plan-date-size: 8px;
  --plan-col-gap: 6px;
  --plan-label-min: 160px;
  --plan-label-max: 220px;
  --plan-bar-pad: 1px;
}

.goalPlanPreview.density-compact {
  --plan-row-gap: 4px;
  --plan-track-h: 12px;
  --plan-title-size: 11px;
  --plan-date-size: 9px;
  --plan-col-gap: 8px;
  --plan-label-min: 180px;
  --plan-label-max: 260px;
  --plan-bar-pad: 1px;
}

.goalPlanPreview.density-roomy {
  --plan-row-gap: 7px;
  --plan-track-h: 16px;
  --plan-title-size: 12px;
  --plan-date-size: 10px;
  --plan-col-gap: 10px;
  --plan-label-min: 200px;
  --plan-label-max: 300px;
  --plan-bar-pad: 2px;
}

.goalPlanPreviewHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.goalPlanPreviewHeading {
  display: grid;
  gap: 2px;
}

.goalPlanPreviewTitle {
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
}

.goalPlanPreviewRange {
  font-size: 10px;
  font-weight: 800;
  color: var(--muted);
}

.goalPlanPreviewActions {
  display: flex;
  align-items: center;
  gap: 6px;
}

.goalPlanPreviewDensity {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 9px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
}

.goalPlanPreviewDensityInput {
  width: 70px;
  height: 4px;
}

.goalPlanPreviewDensityValue {
  font-size: 9px;
  font-weight: 800;
  color: var(--text);
}

.goalPlanPreviewBtn {
  width: 28px;
  height: 28px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--panel);
  color: var(--muted);
  display: grid;
  place-items: center;
  transition: border-color 120ms ease, color 120ms ease, box-shadow 120ms ease;
}

.goalPlanPreviewBtn:hover {
  color: var(--text);
  border-color: var(--border2);
  box-shadow: 0 8px 18px rgba(15, 23, 42, 0.08);
}

.goalPlanPreviewBackdrop {
  position: fixed;
  inset: 0;
  background: rgba(17, 24, 39, 0.45);
  z-index: 55;
}

.goalPlanPreviewMaximized {
  position: fixed;
  inset: 18px;
  z-index: 60;
  min-height: auto;
  max-height: calc(100vh - 40px);
  overflow: auto;
  padding: 6px;
  box-shadow: 0 24px 40px rgba(15, 23, 42, 0.2);
}

.goalPlanPreviewBody {
  font-size: 12px;
  font-weight: 700;
  color: var(--muted);
}

.goalPlanTimeline {
  display: grid;
  gap: var(--plan-row-gap);
  --goal-plan-grid: 6;
}

.goalPlanTimelineRow {
  display: grid;
  grid-template-columns: minmax(var(--plan-label-min), var(--plan-label-max)) minmax(0, 1fr);
  gap: var(--plan-col-gap);
  align-items: center;
}

.goalPlanTimelineLabel {
  position: relative;
  display: flex;
  align-items: center;
  gap: 6px;
  min-width: 0;
  padding-left: calc(var(--plan-indent, 0px));
}

.goalPlanTimelineTitle {
  flex: 1 1 auto;
  min-width: 0;
  font-size: var(--plan-title-size);
  font-weight: 800;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.goalPlanTimelineDates {
  flex: 0 0 auto;
  font-size: var(--plan-date-size);
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--muted);
}

.goalPlanTimelineLabel.nested::before {
  content: '-';
  position: absolute;
  left: var(--plan-indent, 0px);
  top: 50%;
  transform: translateY(-50%);
  color: var(--muted);
}

.goalPlanTimelineLabel.nested {
  padding-left: calc(var(--plan-indent, 0px) + 10px);
}

.goalPlanTimelineTrack {
  position: relative;
  height: var(--plan-track-h);
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(217, 93, 57, 0.12) 1px, transparent 1px);
  background-size: calc(100% / var(--goal-plan-grid, 6)) 100%;
}

.goalPlanTimelineBar {
  position: absolute;
  top: var(--plan-bar-pad);
  bottom: var(--plan-bar-pad);
  border-radius: 999px;
  background: rgba(217, 93, 57, 0.7);
  box-shadow: 0 6px 14px rgba(217, 93, 57, 0.2);
}

.goalPlanTimelineRow.event .goalPlanTimelineBar {
  background: rgba(59, 130, 246, 0.7);
  box-shadow: 0 6px 14px rgba(59, 130, 246, 0.2);
}

.goalPlanTimelineMeta {
  flex: 0 0 auto;
  padding: 2px 6px;
  border-radius: 999px;
  font-size: 9px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  background: rgba(17, 24, 39, 0.08);
  color: var(--muted);
}

.goalPlanTimelineRow.event .goalPlanTimelineMeta {
  background: rgba(59, 130, 246, 0.15);
  color: #2563EB;
}

.goalPlanTimelineRow.empty .goalPlanTimelineTrack {
  background: none;
  border: 1px dashed rgba(17, 24, 39, 0.16);
}

.goalPlanTimelinePlaceholder {
  height: 100%;
  width: 100%;
  opacity: 0.4;
}

.goalPlanPreviewMaximized .goalPlanTimeline {
  gap: var(--plan-row-gap);
}

.goalPlanPreviewMaximized .goalPlanTimelineTrack {
  height: var(--plan-track-h);
}

.goalPlanPreviewMaximized .goalPlanTimelineRow.empty .goalPlanTimelineTrack {
  height: calc(var(--plan-track-h) - 2px);
}

.goalPlanTimelineScaleRow {
  display: grid;
  grid-template-columns: minmax(var(--plan-label-min), var(--plan-label-max)) minmax(0, 1fr);
  gap: var(--plan-col-gap);
  align-items: end;
  position: sticky;
  top: 0;
  z-index: 2;
  background: var(--panel);
  padding-bottom: 2px;
}

.goalPlanTimelineScaleLabel {
  font-size: var(--plan-date-size);
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--muted);
}

.goalPlanTimelineScale {
  display: grid;
  grid-template-columns: repeat(var(--goal-plan-grid, 6), minmax(0, 1fr));
  gap: 0;
}

.goalPlanTimelineScaleCell {
  padding: 2px 4px;
  border-right: 1px solid rgba(17, 24, 39, 0.08);
  font-size: var(--plan-date-size);
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--muted);
  background: rgba(17, 24, 39, 0.03);
}

.goalPlanTimelineScaleCell:last-child {
  border-right: none;
}

.goalPlanPreviewMaximized .goalPlanTimelineBar {
  top: 1px;
  bottom: 1px;
}

.goalWeeklyGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 12px;
}

.goalWeeklyCard {
  border-radius: 18px;
  border: 1px solid var(--border);
  background: var(--panel);
  padding: 14px;
  display: grid;
  gap: 6px;
}

.goalWeeklyLabel {
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
}

.goalWeeklyValue {
  font-size: 18px;
  font-weight: 900;
  color: var(--text);
}

.goalWeeklyMeta {
  font-size: 11px;
  font-weight: 800;
  color: var(--muted);
}

.goalActivity {
  display: grid;
  gap: 10px;
}

.goalActivityItem {
  text-align: left;
  border-radius: 16px;
  border: 1px solid var(--border);
  background: var(--panel);
  padding: 12px;
  transition: border-color 120ms ease, box-shadow 120ms ease, transform 120ms ease;
}

.goalActivityItem:hover {
  border-color: var(--border2);
  box-shadow: 0 14px 22px rgba(15, 23, 42, 0.08);
  transform: translateY(-1px);
}

.goalActivityTop {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 12px;
}

.goalActivityTitle {
  font-size: 13px;
  font-weight: 800;
  color: var(--text);
}

.goalActivityMeta {
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--muted);
}

.goalActivitySub {
  margin-top: 6px;
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--muted);
}

.goalActivityTable {
  display: grid;
  gap: 6px;
  overflow-x: auto;
}

.goalActivityRow {
  display: grid;
  grid-template-columns: 140px 90px 120px minmax(0, 1fr) minmax(0, 1.2fr);
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: var(--panel);
  font-size: 11px;
  font-weight: 800;
  color: var(--text);
  text-align: left;
  cursor: pointer;
  min-width: 720px;
}

.goalActivityRow:hover {
  border-color: var(--border2);
  box-shadow: 0 12px 20px rgba(15, 23, 42, 0.08);
}

.goalActivityHeader {
  background: transparent;
  border: none;
  padding: 0 4px 6px;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  font-size: 10px;
  color: var(--muted);
  cursor: default;
}

.goalActivityHeader:hover {
  box-shadow: none;
}

.goalActivityTitleCell {
  font-size: 12px;
  font-weight: 900;
}

.goalActivityNotes {
  color: var(--muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.goalProjects {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.goalProjectTag {
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--panel);
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--text);
}

.goalEmpty {
  padding: 12px 0;
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
}

.goalListItem {
  text-align: left;
  padding: 14px 16px;
  border-radius: 18px;
  border: 1px solid transparent;
  background: rgba(255, 255, 255, 0.6);
  display: grid;
  gap: 8px;
  transition: border-color 120ms ease, box-shadow 120ms ease, transform 120ms ease, background 120ms ease;
}

.goalListItem:hover {
  border-color: rgba(17, 24, 39, 0.08);
  background: rgba(255, 255, 255, 0.8);
  box-shadow: 0 16px 26px rgba(15, 23, 42, 0.08);
  transform: translateY(-1px);
}

.goalListItem.active {
  border-color: rgba(217, 93, 57, 0.35);
  background: #fff;
  box-shadow: 0 18px 30px rgba(217, 93, 57, 0.15);
}

.goalListTitleRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.goalListTitle {
  font-size: 16px;
  font-weight: 900;
  color: var(--text);
}

.goalListChevron {
  color: var(--muted);
}

.goalListItem.active .goalListTitle {
  color: #D95D39;
}

.goalListMeta {
  display: flex;
  flex-wrap: wrap;
  gap: 8px 12px;
  align-items: center;
}

.goalListDate {
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
}

.goalListStat {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  border-radius: 999px;
  background: var(--accentSoft);
  font-size: 10px;
  font-weight: 800;
  color: var(--text);
}

.goalListStatIcon {
  color: #5B5F97;
}

.goalListStatIcon.calendar {
  color: #488B86;
}

.goalCardGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 16px;
}

.goalCard {
  border: 1px solid var(--border);
  background: var(--panel);
  border-radius: 20px;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  text-align: left;
  transition: border-color 120ms ease, box-shadow 120ms ease, transform 120ms ease;
}

.goalCard:hover {
  border-color: rgba(17, 24, 39, 0.12);
  box-shadow: 0 16px 26px rgba(15, 23, 42, 0.08);
  transform: translateY(-1px);
}

.goalCard.active {
  border-color: rgba(217, 93, 57, 0.35);
  box-shadow: 0 18px 30px rgba(217, 93, 57, 0.12);
}

.goalCardHeader {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
}

.goalCardTitle {
  font-size: 18px;
  font-weight: 900;
}

.goalCardMeta {
  font-size: 11px;
  font-weight: 700;
  color: var(--muted);
}

.goalCardRemove {
  height: 26px;
  padding: 0 12px;
  border-radius: 999px;
  border: 1px solid rgba(207, 66, 60, 0.3);
  background: rgba(207, 66, 60, 0.08);
  color: #CF423C;
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.goalCardStats {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}

.goalCardStat {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  font-size: 11px;
  font-weight: 700;
  color: var(--muted);
  padding: 8px 10px;
  border-radius: 12px;
  background: var(--panel2);
  border: 1px solid var(--border);
}

.goalCardStat strong {
  color: var(--text);
  font-weight: 800;
  font-size: 13px;
}

.goalCardFooter {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.goalCardChip {
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--panel2);
  font-size: 10px;
  font-weight: 700;
}

.goalCardFooterEmpty {
  font-size: 11px;
  font-weight: 700;
  color: var(--muted);
}

.goalSidebar {
  width: min(600px, 100%);
  flex-shrink: 0;
  position: sticky;
  top: 24px;
  align-self: flex-start;
}

.habitSidebar {
  width: min(600px, 100%);
  flex-shrink: 0;
  position: sticky;
  top: 24px;
  align-self: flex-start;
}

@media (max-width: 1280px) {
  .ecoSidebar,
  .goalSidebar,
  .habitSidebar {
    width: 100%;
    position: static;
  }

  .ecoSidebarCard,
  .goalSidebarCard {
    max-height: none;
  }

  .habitRowCard {
    grid-template-columns: 1fr;
  }
}

.goalSidebarCard {
  border: 1px solid var(--border);
  background: var(--panel);
  border-radius: 18px;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-height: calc(100vh - 160px);
  overflow-y: auto;
}

.goalSidebarHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.goalSidebarTitle {
  font-size: 16px;
  font-weight: 800;
}

.goalSidebarSubtitle {
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
}

.goalSidebarContent {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.goalSidebarSection {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.goalSidebarEyebrow {
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
}

.goalSidebarName {
  font-size: 18px;
  font-weight: 800;
}

.goalSidebarMetrics {
  display: grid;
  gap: 8px;
  font-size: 11px;
  color: var(--muted);
}

.goalSidebarMetrics div {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.goalSidebarMetrics strong {
  color: var(--text);
  font-weight: 700;
}

.goalSidebarChips {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.goalSidebarChip {
  padding: 4px 10px;
  border-radius: 999px;
  background: var(--panel2);
  border: 1px solid var(--border);
  font-size: 10px;
  font-weight: 700;
}

.goalSidebarEmpty {
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
}

.goalSidebarActions {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.goalSidebarBtn {
  height: 36px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--panel2);
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--muted);
  transition: all 120ms ease;
}

.goalSidebarBtn:hover {
  color: var(--text);
  border-color: rgba(17, 24, 39, 0.2);
}

.goalSidebarBtn.danger {
  color: #CF423C;
  border-color: rgba(207, 66, 60, 0.35);
  background: rgba(207, 66, 60, 0.08);
}

.goalSidebarEmptyState {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.goalSidebarInput {
  height: 36px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--panel2);
  padding: 0 12px;
  font-size: 12px;
  font-weight: 600;
  outline: none;
}

.goalSidebarHint {
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
}

.habitRowCard {
  border: 1px solid var(--border);
  background: var(--panel);
  border-radius: 18px;
  padding: 16px;
  display: grid;
  grid-template-columns: 1.1fr 1.8fr 0.9fr;
  gap: 16px;
  transition: border-color 120ms ease, box-shadow 120ms ease, transform 120ms ease;
}

.habitRowCard:hover {
  border-color: rgba(17, 24, 39, 0.12);
  box-shadow: 0 16px 26px rgba(15, 23, 42, 0.08);
  transform: translateY(-1px);
}

.habitRowCard.active {
  border-color: rgba(217, 93, 57, 0.35);
  box-shadow: 0 18px 30px rgba(217, 93, 57, 0.12);
}

.habitRowInfo {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.habitRowTitle {
  font-size: 16px;
  font-weight: 900;
}

.habitRowMeta {
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: var(--muted);
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.habitRowParams {
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.habitRowChips {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.habitRowChart {
  min-height: 110px;
  display: flex;
  align-items: center;
}

.habitRowStats {
  display: grid;
  gap: 8px;
  font-size: 11px;
  color: var(--muted);
}

.habitRowStat {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.habitRowStat strong {
  font-size: 14px;
  font-weight: 800;
  color: var(--text);
}

.habitRowActions {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 4px;
}

.habitRowBtn {
  height: 28px;
  padding: 0 12px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--panel2);
  font-size: 10px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--muted);
}

.habitRowBtn.miss {
  color: #CF423C;
  border-color: rgba(207, 66, 60, 0.3);
  background: rgba(207, 66, 60, 0.08);
}

.habitRowBtn.done {
  color: #3D8856;
  border-color: rgba(61, 136, 86, 0.3);
  background: rgba(61, 136, 86, 0.08);
}

@media (max-width: 1200px) {
  .goalPlan {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 900px) {
  .goalChecklistRow {
    grid-template-columns: 90px repeat(var(--goal-cols, 3), minmax(110px, 1fr));
  }
}

/* 
   Calendar Context Menu
    */

.calContextMenu {
  position: fixed;
  z-index: 1000;
  min-width: 180px;
  background: var(--panel2);
  border: 1px solid var(--border2);
  border-radius: 10px;
  padding: 6px 0;
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.12),
    0 1px 4px rgba(0, 0, 0, 0.08);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

.calContextMenu button {
  display: block;
  width: 100%;
  padding: 10px 14px;
  text-align: left;
  background: none;
  border: none;
  font-size: 13px;
  font-weight: 500;
  color: var(--text);
  cursor: pointer;
  transition: background 0.15s ease;
}

.calContextMenu button:hover {
  background: var(--accentSoft);
}

.calContextMenu button.destructive {
  color: var(--destructive);
}

.calContextMenu button.destructive:hover {
  background: rgba(220, 38, 38, 0.1);
}

.calContextMenuDivider {
  margin: 6px 0;
  border: none;
  border-top: 1px solid var(--border);
}

/* 
   Current Time Indicator (Now Line)
    */

.tmNowIndicator,
.agNowIndicator {
  position: absolute;
  left: 0;
  right: 0;
  height: 2px;
  z-index: 50;
  pointer-events: none;
  display: flex;
  align-items: center;
}

.tmNowDot,
.agNowDot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #D95D39;
  flex-shrink: 0;
  margin-left: -5px;
  box-shadow: 0 0 6px rgba(217, 93, 57, 0.5);
}

.tmNowLine,
.agNowLine {
  flex: 1;
  height: 2px;
  background: #D95D39;
  box-shadow: 0 0 4px rgba(217, 93, 57, 0.4);
}

/* Active Session Banner */
.asbRoot {
  position: relative;
  border-radius: 20px;
  border: 1px solid var(--border);
  background: var(--panel);
  margin-bottom: 12px;
  overflow: hidden;
}

.asbLine {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  background: var(--accent);
  border-radius: 4px 0 0 4px;
}

.asbContent {
  padding: 10px 16px 10px 18px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.asbHeader {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.asbHeaderLeft {
  display: flex;
  align-items: center;
  gap: 8px;
}

.asbDot {
  position: relative;
  width: 10px;
  height: 10px;
}

.asbDot::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: var(--accent);
}

.asbDotPulse {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: var(--accent);
}

.asbLabel {
  font-size: 11px;
  font-weight: 900;
  letter-spacing: 0.8px;
  color: var(--muted);
  text-transform: uppercase;
}

.asbMinimizeBtn {
  width: 28px;
  height: 28px;
  border-radius: 8px;
  display: grid;
  place-items: center;
  color: var(--muted);
  background: transparent;
  border: none;
  cursor: pointer;
}

.asbMinimizeBtn:hover {
  background: var(--panelAlpha);
}

.asbBreadcrumb {
  font-size: 12px;
  font-weight: 700;
  color: var(--muted);
  margin-top: 4px;
}

.asbTitle {
  font-size: 15px;
  font-weight: 900;
  color: var(--text);
  text-align: center;
  margin-top: 0;
}

.asbClock {
  font-size: 30px;
  font-weight: 900;
  font-variant-numeric: tabular-nums;
  color: var(--accent);
  letter-spacing: -0.5px;
  margin: 0;
}

.asbProgressWrap {
  width: 100%;
  max-width: 280px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.asbProgressTrack {
  flex: 1;
  height: 6px;
  border-radius: 3px;
  background: var(--border2);
  overflow: hidden;
}

.asbProgressFill {
  height: 100%;
  border-radius: 3px;
  background: var(--accent);
}

.asbProgressPct {
  font-size: 12px;
  font-weight: 800;
  color: var(--muted);
  width: 36px;
  text-align: right;
}

.asbRemaining {
  font-size: 12px;
  font-weight: 700;
  color: var(--muted);
}

.asbXp {
  font-size: 16px;
  font-weight: 900;
  color: var(--accent);
  margin-top: 2px;
}

.asbActions {
  display: flex;
  gap: 12px;
  margin-top: 6px;
}

.asbOpenBtn {
  height: 32px;
  padding: 0 20px;
  border-radius: 12px;
  border: 1px solid var(--border2);
  background: transparent;
  color: var(--text);
  font-weight: 900;
  cursor: pointer;
  transition: all 0.15s ease;
}

.asbOpenBtn:hover {
  background: var(--panelAlpha);
  border-color: var(--accent);
}

.asbStopBtn {
  height: 32px;
  padding: 0 24px;
  border-radius: 12px;
  border: none;
  background: var(--accent);
  color: #fff;
  font-weight: 900;
  cursor: pointer;
  transition: all 0.15s ease;
}

.asbStopBtn:hover {
  filter: brightness(1.1);
}

/* Minimized Banner */
.asbMinimized {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 16px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--panel);
  margin-bottom: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.asbMinimized:hover {
  border-color: var(--accentBorder);
  background: var(--accentSoft);
}

.asbMinDot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--accent);
  animation: asbPulse 2s infinite ease-out;
}

@keyframes asbPulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.6; transform: scale(1.2); }
}

.asbMinTitle {
  flex: 1;
  font-weight: 900;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.asbMinClock {
  font-size: 14px;
  font-weight: 900;
  font-variant-numeric: tabular-nums;
  color: var(--accent);
}

.asbMinXp {
  font-size: 13px;
  font-weight: 800;
  color: var(--muted);
}

.asbMinExpand {
  width: 24px;
  height: 24px;
  border-radius: 6px;
  display: grid;
  place-items: center;
  color: var(--muted);
  background: transparent;
  border: none;
}

:root[data-theme='dark'] .asbRoot {
  background: rgba(15, 19, 32, 0.95);
}

:root[data-theme='dark'] .asbMinimized {
  background: rgba(15, 19, 32, 0.92);
}
